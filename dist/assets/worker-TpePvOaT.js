var $r=Object.defineProperty;var hn=Oe=>{throw TypeError(Oe)};var Kr=(Oe,De,je)=>De in Oe?$r(Oe,De,{enumerable:!0,configurable:!0,writable:!0,value:je}):Oe[De]=je;var gn=(Oe,De,je)=>Kr(Oe,typeof De!="symbol"?De+"":De,je),Nt=(Oe,De,je)=>De.has(Oe)||hn("Cannot "+je);var V=(Oe,De,je)=>(Nt(Oe,De,"read from private field"),je?je.call(Oe):De.get(Oe)),Me=(Oe,De,je)=>De.has(Oe)?hn("Cannot add the same private member more than once"):De instanceof WeakSet?De.add(Oe):De.set(Oe,je),Ve=(Oe,De,je,bt)=>(Nt(Oe,De,"write to private field"),bt?bt.call(Oe,je):De.set(Oe,je),je),Ce=(Oe,De,je)=>(Nt(Oe,De,"access private method"),je);(function(){"use strict";var it,Qe,tt,at,Te,It,pt,Mt,yn,jt,ut,Jr,Xr,Ge,wt;var Oe=(()=>{var J=self.location.href;return function(H){var E=H||{},e=typeof E<"u"?E:{},L,Y;e.ready=new Promise(function(n,t){L=n,Y=t});const le=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,le.debugModule("globalThis.location =",globalThis.location);const ee="emscripten-bug-17951";e[ee]=function n(t,s){t.env.foo=function(){};const r=e.locateFile(n.uri,typeof fe>"u"?"":fe);le.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),t).then(d=>s(d.instance,d.module)):async()=>i().then(d=>d.arrayBuffer()).then(d=>WebAssembly.instantiate(d,t)).then(d=>s(d.instance,d.module)))(),{}},e[ee].uri="sqlite3.wasm";var oe=Object.assign({},e),se="./this.program",ae=typeof window=="object",$=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var fe="";function we(n){return e.locateFile?e.locateFile(n,fe):fe+n}var xe,Ue,ce;(ae||$)&&($?fe=self.location.href:typeof document<"u"&&document.currentScript&&(fe=document.currentScript.src),J&&(fe=J),fe.indexOf("blob:")!==0?fe=fe.substr(0,fe.replace(/[?#].*/,"").lastIndexOf("/")+1):fe="",xe=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},$&&(ce=n=>{var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ue=(n,t,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){t(r.response);return}s()},r.onerror=s,r.send(null)});var Pe=e.print||console.log.bind(console),Re=e.printErr||console.warn.bind(console);Object.assign(e,oe),oe=null,e.arguments&&e.arguments,e.thisProgram&&(se=e.thisProgram),e.quit&&e.quit;var Fe;e.wasmBinary&&(Fe=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&dt("no native wasm support detected");var Je,Ze=!1;function Tt(n,t){n||dt(t)}var Et=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function nt(n,t,s){for(var r=t+s,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.buffer&&Et)return Et.decode(n.subarray(t,i));for(var a="";t<i;){var d=n[t++];if(!(d&128)){a+=String.fromCharCode(d);continue}var g=n[t++]&63;if((d&224)==192){a+=String.fromCharCode((d&31)<<6|g);continue}var D=n[t++]&63;if((d&240)==224?d=(d&15)<<12|g<<6|D:d=(d&7)<<18|g<<12|D<<6|n[t++]&63,d<65536)a+=String.fromCharCode(d);else{var R=d-65536;a+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return a}function Ft(n,t){return n?nt(ft,n,t):""}function mt(n,t,s,r){if(!(r>0))return 0;for(var i=s,a=s+r-1,d=0;d<n.length;++d){var g=n.charCodeAt(d);if(g>=55296&&g<=57343){var D=n.charCodeAt(++d);g=65536+((g&1023)<<10)|D&1023}if(g<=127){if(s>=a)break;t[s++]=g}else if(g<=2047){if(s+1>=a)break;t[s++]=192|g>>6,t[s++]=128|g&63}else if(g<=65535){if(s+2>=a)break;t[s++]=224|g>>12,t[s++]=128|g>>6&63,t[s++]=128|g&63}else{if(s+3>=a)break;t[s++]=240|g>>18,t[s++]=128|g>>12&63,t[s++]=128|g>>6&63,t[s++]=128|g&63}}return t[s]=0,s-i}function Kt(n,t,s){return mt(n,ft,t,s)}function ht(n){for(var t=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++s):t+=3}return t}var $e,ft,Jt,qe,Ne;function Xt(){var n=Je.buffer;e.HEAP8=$e=new Int8Array(n),e.HEAP16=Jt=new Int16Array(n),e.HEAP32=qe=new Int32Array(n),e.HEAPU8=ft=new Uint8Array(n),e.HEAPU16=new Uint16Array(n),e.HEAPU32=Ne=new Uint32Array(n),e.HEAPF32=new Float32Array(n),e.HEAPF64=new Float64Array(n),e.HEAP64=new BigInt64Array(n),e.HEAPU64=new BigUint64Array(n)}var Yt=e.INITIAL_MEMORY||16777216;e.wasmMemory?Je=e.wasmMemory:Je=new WebAssembly.Memory({initial:Yt/65536,maximum:32768}),Xt(),Yt=Je.buffer.byteLength;var Zt=[],en=[],tn=[];function jn(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)zn(e.preRun.shift());Pt(Zt)}function Bn(){!e.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,Pt(en)}function Un(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Qn(e.postRun.shift());Pt(tn)}function zn(n){Zt.unshift(n)}function Wn(n){en.unshift(n)}function Qn(n){tn.unshift(n)}var lt=0,gt=null;function Yr(n){return n}function Ot(n){lt++,e.monitorRunDependencies&&e.monitorRunDependencies(lt)}function vt(n){if(lt--,e.monitorRunDependencies&&e.monitorRunDependencies(lt),lt==0&&gt){var t=gt;gt=null,t()}}function dt(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",Re(n),Ze=!0,n+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(n);throw Y(t),t}var Hn="data:application/octet-stream;base64,";function nn(n){return n.startsWith(Hn)}var Xe;e.locateFile?(Xe="sqlite3.wasm",nn(Xe)||(Xe=we(Xe))):Xe=new URL("/assets/sqlite3-BqX9F35q.wasm",self.location.href).href;function rn(n){try{if(n==Xe&&Fe)return new Uint8Array(Fe);if(ce)return ce(n);throw"both async and sync fetching of the wasm failed"}catch(t){dt(t)}}function Vn(){return!Fe&&(ae||$)&&typeof fetch=="function"?fetch(Xe,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Xe+"'";return n.arrayBuffer()}).catch(function(){return rn(Xe)}):Promise.resolve().then(function(){return rn(Xe)})}function Gn(){var n={env:un,wasi_snapshot_preview1:un};function t(d,g){var D=d.exports;e.asm=D,e.asm.__indirect_function_table,Wn(e.asm.__wasm_call_ctors),vt()}Ot();function s(d){t(d.instance)}function r(d){return Vn().then(function(g){return WebAssembly.instantiate(g,n)}).then(function(g){return g}).then(d,function(g){Re("failed to asynchronously prepare wasm: "+g),dt(g)})}function i(){return!Fe&&typeof WebAssembly.instantiateStreaming=="function"&&!nn(Xe)&&typeof fetch=="function"?fetch(Xe,{credentials:"same-origin"}).then(function(d){var g=WebAssembly.instantiateStreaming(d,n);return g.then(s,function(D){return Re("wasm streaming compile failed: "+D),Re("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(e.instantiateWasm)try{var a=e.instantiateWasm(n,t);return a}catch(d){Re("Module.instantiateWasm callback failed with error: "+d),Y(d)}return i().catch(Y),{}}var ve,Be;function Pt(n){for(;n.length>0;)n.shift()(e)}var Ae={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(n).slice(1)},normalizeArray:(n,t)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(t)for(;s;s--)n.unshift("..");return n},normalize:n=>{var t=Ae.isAbs(n),s=n.substr(-1)==="/";return n=Ae.normalizeArray(n.split("/").filter(r=>!!r),!t).join("/"),!n&&!t&&(n="."),n&&s&&(n+="/"),(t?"/":"")+n},dirname:n=>{var t=Ae.splitPath(n),s=t[0],r=t[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=Ae.normalize(n),n=n.replace(/\/$/,"");var t=n.lastIndexOf("/");return t===-1?n:n.substr(t+1)},join:function(){var n=Array.prototype.slice.call(arguments);return Ae.normalize(n.join("/"))},join2:(n,t)=>Ae.normalize(n+"/"+t)};function $n(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>dt("randomDevice")}var rt={resolve:function(){for(var n="",t=!1,s=arguments.length-1;s>=-1&&!t;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,t=Ae.isAbs(r)}return n=Ae.normalizeArray(n.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+n||"."},relative:(n,t)=>{n=rt.resolve(n).substr(1),t=rt.resolve(t).substr(1);function s(R){for(var U=0;U<R.length&&R[U]==="";U++);for(var X=R.length-1;X>=0&&R[X]==="";X--);return U>X?[]:R.slice(U,X-U+1)}for(var r=s(n.split("/")),i=s(t.split("/")),a=Math.min(r.length,i.length),d=a,g=0;g<a;g++)if(r[g]!==i[g]){d=g;break}for(var D=[],g=d;g<r.length;g++)D.push("..");return D=D.concat(i.slice(d)),D.join("/")}};function Lt(n,t,s){var r=ht(n)+1,i=new Array(r),a=mt(n,i,0,i.length);return i.length=a,i}var ct={ttys:[],init:function(){},shutdown:function(){},register:function(n,t){ct.ttys[n]={input:[],output:[],ops:t},o.registerDevice(n,ct.stream_ops)},stream_ops:{open:function(n){var t=ct.ttys[n.node.rdev];if(!t)throw new o.ErrnoError(43);n.tty=t,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,d=0;d<r;d++){var g;try{g=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(g===void 0&&a===0)throw new o.ErrnoError(6);if(g==null)break;a++,t[s+d]=g}return a&&(n.node.timestamp=Date.now()),a},write:function(n,t,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<r;a++)n.tty.ops.put_char(n.tty,t[s+a])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(n){if(!n.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;n.input=Lt(t)}return n.input.shift()},put_char:function(n,t){t===null||t===10?(Pe(nt(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(Pe(nt(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,t){t===null||t===10?(Re(nt(n.output,0)),n.output=[]):t!=0&&n.output.push(t)},fsync:function(n){n.output&&n.output.length>0&&(Re(nt(n.output,0)),n.output=[])}}};function Kn(n,t){return ft.fill(0,n,n+t),n}function Jn(n,t){return Math.ceil(n/t)*t}function sn(n){n=Jn(n,65536);var t=dn(65536,n);return t?Kn(t,n):0}var ye={ops_table:null,mount:function(n){return ye.createNode(null,"/",16895,0)},createNode:function(n,t,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);ye.ops_table||(ye.ops_table={dir:{node:{getattr:ye.node_ops.getattr,setattr:ye.node_ops.setattr,lookup:ye.node_ops.lookup,mknod:ye.node_ops.mknod,rename:ye.node_ops.rename,unlink:ye.node_ops.unlink,rmdir:ye.node_ops.rmdir,readdir:ye.node_ops.readdir,symlink:ye.node_ops.symlink},stream:{llseek:ye.stream_ops.llseek}},file:{node:{getattr:ye.node_ops.getattr,setattr:ye.node_ops.setattr},stream:{llseek:ye.stream_ops.llseek,read:ye.stream_ops.read,write:ye.stream_ops.write,allocate:ye.stream_ops.allocate,mmap:ye.stream_ops.mmap,msync:ye.stream_ops.msync}},link:{node:{getattr:ye.node_ops.getattr,setattr:ye.node_ops.setattr,readlink:ye.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ye.node_ops.getattr,setattr:ye.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,t,s,r);return o.isDir(i.mode)?(i.node_ops=ye.ops_table.dir.node,i.stream_ops=ye.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=ye.ops_table.file.node,i.stream_ops=ye.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=ye.ops_table.link.node,i.stream_ops=ye.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=ye.ops_table.chrdev.node,i.stream_ops=ye.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[t]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,t){var s=n.contents?n.contents.length:0;if(!(s>=t)){var r=1024*1024;t=Math.max(t,s*(s<r?2:1.125)>>>0),s!=0&&(t=Math.max(t,256));var i=n.contents;n.contents=new Uint8Array(t),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,t){if(n.usedBytes!=t)if(t==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(t),s&&n.contents.set(s.subarray(0,Math.min(t,n.usedBytes))),n.usedBytes=t}},node_ops:{getattr:function(n){var t={};return t.dev=o.isChrdev(n.mode)?n.id:1,t.ino=n.id,t.mode=n.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=n.rdev,o.isDir(n.mode)?t.size=4096:o.isFile(n.mode)?t.size=n.usedBytes:o.isLink(n.mode)?t.size=n.link.length:t.size=0,t.atime=new Date(n.timestamp),t.mtime=new Date(n.timestamp),t.ctime=new Date(n.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(n,t){t.mode!==void 0&&(n.mode=t.mode),t.timestamp!==void 0&&(n.timestamp=t.timestamp),t.size!==void 0&&ye.resizeFileStorage(n,t.size)},lookup:function(n,t){throw o.genericErrors[44]},mknod:function(n,t,s,r){return ye.createNode(n,t,s,r)},rename:function(n,t,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(t,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,t.contents[s]=n,t.timestamp=n.parent.timestamp,n.parent=t},unlink:function(n,t){delete n.contents[t],n.timestamp=Date.now()},rmdir:function(n,t){var s=o.lookupNode(n,t);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[t],n.timestamp=Date.now()},readdir:function(n){var t=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&t.push(s);return t},symlink:function(n,t,s){var r=ye.createNode(n,t,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,t,s,r,i){var a=n.node.contents;if(i>=n.node.usedBytes)return 0;var d=Math.min(n.node.usedBytes-i,r);if(d>8&&a.subarray)t.set(a.subarray(i,i+d),s);else for(var g=0;g<d;g++)t[s+g]=a[i+g];return d},write:function(n,t,s,r,i,a){if(t.buffer===$e.buffer&&(a=!1),!r)return 0;var d=n.node;if(d.timestamp=Date.now(),t.subarray&&(!d.contents||d.contents.subarray)){if(a)return d.contents=t.subarray(s,s+r),d.usedBytes=r,r;if(d.usedBytes===0&&i===0)return d.contents=t.slice(s,s+r),d.usedBytes=r,r;if(i+r<=d.usedBytes)return d.contents.set(t.subarray(s,s+r),i),r}if(ye.expandFileStorage(d,i+r),d.contents.subarray&&t.subarray)d.contents.set(t.subarray(s,s+r),i);else for(var g=0;g<r;g++)d.contents[i+g]=t[s+g];return d.usedBytes=Math.max(d.usedBytes,i+r),r},llseek:function(n,t,s){var r=t;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,t,s){ye.expandFileStorage(n.node,t+s),n.node.usedBytes=Math.max(n.node.usedBytes,t+s)},mmap:function(n,t,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var a,d,g=n.node.contents;if(!(i&2)&&g.buffer===$e.buffer)d=!1,a=g.byteOffset;else{if((s>0||s+t<g.length)&&(g.subarray?g=g.subarray(s,s+t):g=Array.prototype.slice.call(g,s,s+t)),d=!0,a=sn(t),!a)throw new o.ErrnoError(48);$e.set(g,a)}return{ptr:a,allocated:d}},msync:function(n,t,s,r,i){return ye.stream_ops.write(n,t,0,r,s,!1),0}}};function Xn(n,t,s,r){var i="al "+n;Ue(n,a=>{Tt(a,'Loading data file "'+n+'" failed (no arrayBuffer).'),t(new Uint8Array(a)),i&&vt()},a=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&Ot()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,t={})=>{if(n=rt.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(t=Object.assign(s,t),t.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(X=>!!X),i=o.root,a="/",d=0;d<r.length;d++){var g=d===r.length-1;if(g&&t.parent)break;if(i=o.lookupNode(i,r[d]),a=Ae.join2(a,r[d]),o.isMountpoint(i)&&(!g||g&&t.follow_mount)&&(i=i.mounted.root),!g||t.follow)for(var D=0;o.isLink(i.mode);){var R=o.readlink(a);a=rt.resolve(Ae.dirname(a),R);var U=o.lookupPath(a,{recurse_count:t.recurse_count+1});if(i=U.node,D++>40)throw new o.ErrnoError(32)}}return{path:a,node:i}},getPath:n=>{for(var t;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return t?s[s.length-1]!=="/"?s+"/"+t:s+t:s}t=t?n.name+"/"+t:n.name,n=n.parent}},hashName:(n,t)=>{for(var s=0,r=0;r<t.length;r++)s=(s<<5)-s+t.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var t=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[t],o.nameTable[t]=n},hashRemoveNode:n=>{var t=o.hashName(n.parent.id,n.name);if(o.nameTable[t]===n)o.nameTable[t]=n.name_next;else for(var s=o.nameTable[t];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,t)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,t),i=o.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===n.id&&a===t)return i}return o.lookup(n,t)},createNode:(n,t,s,r)=>{var i=new o.FSNode(n,t,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var t=o.flagModes[n];if(typeof t>"u")throw new Error("Unknown file open mode: "+n);return t},flagsToPermissionString:n=>{var t=["r","w","rw"][n&3];return n&512&&(t+="w"),t},nodePermissions:(n,t)=>o.ignorePermissions?0:t.includes("r")&&!(n.mode&292)||t.includes("w")&&!(n.mode&146)||t.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var t=o.nodePermissions(n,"x");return t||(n.node_ops.lookup?0:2)},mayCreate:(n,t)=>{try{var s=o.lookupNode(n,t);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,t,s)=>{var r;try{r=o.lookupNode(n,t)}catch(a){return a.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,t)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(t)!=="r"||t&512)?31:o.nodePermissions(n,o.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,t=o.MAX_OPEN_FDS)=>{for(var s=n;s<=t;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,t,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(t,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var t=o.getDevice(n.node.rdev);n.stream_ops=t.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,t)=>n<<8|t,registerDevice:(n,t)=>{o.devices[n]={stream_ops:t}},getDevice:n=>o.devices[n],getMounts:n=>{for(var t=[],s=[n];s.length;){var r=s.pop();t.push(r),s.push.apply(s,r.mounts)}return t},syncfs:(n,t)=>{typeof n=="function"&&(t=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Re("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(d){return o.syncFSRequests--,t(d)}function a(d){if(d)return a.errored?void 0:(a.errored=!0,i(d));++r>=s.length&&i(null)}s.forEach(d=>{if(!d.type.syncfs)return a(null);d.type.syncfs(d,n,a)})},mount:(n,t,s)=>{var r=s==="/",i=!s,a;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var d=o.lookupPath(s,{follow_mount:!1});if(s=d.path,a=d.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var g={type:n,opts:t,mountpoint:s,mounts:[]},D=n.mount(g);return D.mount=g,g.root=D,r?o.root=D:a&&(a.mounted=g,a.mount&&a.mount.mounts.push(g)),D},unmount:n=>{var t=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(t.node))throw new o.ErrnoError(28);var s=t.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(d=>{for(var g=o.nameTable[d];g;){var D=g.name_next;i.includes(g.mount)&&o.destroyNode(g),g=D}}),s.mounted=null;var a=s.mount.mounts.indexOf(r);s.mount.mounts.splice(a,1)},lookup:(n,t)=>n.node_ops.lookup(n,t),mknod:(n,t,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,a=Ae.basename(n);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var d=o.mayCreate(i,a);if(d)throw new o.ErrnoError(d);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,t,s)},create:(n,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,o.mknod(n,t,0)),mkdir:(n,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,o.mknod(n,t,0)),mkdirTree:(n,t)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,t)}catch(a){if(a.errno!=20)throw a}}},mkdev:(n,t,s)=>(typeof s>"u"&&(s=t,t=438),t|=8192,o.mknod(n,t,s)),symlink:(n,t)=>{if(!rt.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(t,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=Ae.basename(t),a=o.mayCreate(r,i);if(a)throw new o.ErrnoError(a);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,t)=>{var s=Ae.dirname(n),r=Ae.dirname(t),i=Ae.basename(n),a=Ae.basename(t),d,g,D;if(d=o.lookupPath(n,{parent:!0}),g=d.node,d=o.lookupPath(t,{parent:!0}),D=d.node,!g||!D)throw new o.ErrnoError(44);if(g.mount!==D.mount)throw new o.ErrnoError(75);var R=o.lookupNode(g,i),U=rt.relative(n,r);if(U.charAt(0)!==".")throw new o.ErrnoError(28);if(U=rt.relative(t,s),U.charAt(0)!==".")throw new o.ErrnoError(55);var X;try{X=o.lookupNode(D,a)}catch{}if(R!==X){var I=o.isDir(R.mode),k=o.mayDelete(g,i,I);if(k)throw new o.ErrnoError(k);if(k=X?o.mayDelete(D,a,I):o.mayCreate(D,a),k)throw new o.ErrnoError(k);if(!g.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(R)||X&&o.isMountpoint(X))throw new o.ErrnoError(10);if(D!==g&&(k=o.nodePermissions(g,"w"),k))throw new o.ErrnoError(k);o.hashRemoveNode(R);try{g.node_ops.rename(R,D,a)}catch(M){throw M}finally{o.hashAddNode(R)}}},rmdir:n=>{var t=o.lookupPath(n,{parent:!0}),s=t.node,r=Ae.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!0);if(a)throw new o.ErrnoError(a);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var t=o.lookupPath(n,{follow:!0}),s=t.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var t=o.lookupPath(n,{parent:!0}),s=t.node;if(!s)throw new o.ErrnoError(44);var r=Ae.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!1);if(a)throw new o.ErrnoError(a);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var t=o.lookupPath(n),s=t.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return rt.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,t)=>{var s=o.lookupPath(n,{follow:!t}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,t,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,t)=>{o.chmod(n,t,!0)},fchmod:(n,t)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,t)},chown:(n,t,s,r)=>{var i;if(typeof n=="string"){var a=o.lookupPath(n,{follow:!r});i=a.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,t,s)=>{o.chown(n,t,s,!0)},fchown:(n,t,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,t,s)},truncate:(n,t)=>{if(t<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(n,t)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,t)},utime:(n,t,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open:(n,t,s)=>{if(n==="")throw new o.ErrnoError(44);t=typeof t=="string"?o.modeStringToFlags(t):t,s=typeof s>"u"?438:s,t&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=Ae.normalize(n);try{var i=o.lookupPath(n,{follow:!(t&131072)});r=i.node}catch{}}var a=!1;if(t&64)if(r){if(t&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),a=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(t&=-513),t&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!a){var d=o.mayOpen(r,t);if(d)throw new o.ErrnoError(d)}t&512&&!a&&o.truncate(r,0),t&=-131713;var g=o.createStream({node:r,path:o.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return g.stream_ops.open&&g.stream_ops.open(g),e.logReadFiles&&!(t&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),g},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(t){throw t}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,t,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,t,s),n.ungotten=[],n.position},read:(n,t,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var d=n.stream_ops.read(n,t,s,r,i);return a||(n.position+=d),d},write:(n,t,s,r,i,a)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var d=typeof i<"u";if(!d)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var g=n.stream_ops.write(n,t,s,r,i,a);return d||(n.position+=g),g},allocate:(n,t,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(t<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,t,s)},mmap:(n,t,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,t,s,r,i)},msync:(n,t,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,t,s,r,i):0,munmap:n=>0,ioctl:(n,t,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,t,s)},readFile:(n,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var s,r=o.open(n,t.flags),i=o.stat(n),a=i.size,d=new Uint8Array(a);return o.read(r,d,0,a,0),t.encoding==="utf8"?s=nt(d,0):t.encoding==="binary"&&(s=d),o.close(r),s},writeFile:(n,t,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof t=="string"){var i=new Uint8Array(ht(t)+1),a=mt(t,i,0,i.length);o.write(r,i,0,a,void 0,s.canOwn)}else if(ArrayBuffer.isView(t))o.write(r,t,0,t.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var t=o.lookupPath(n,{follow:!0});if(t.node===null)throw new o.ErrnoError(44);if(!o.isDir(t.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(t.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=t.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(t,s,r,i,a)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),ct.register(o.makedev(5,0),ct.default_tty_ops),ct.register(o.makedev(6,0),ct.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=$n();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var t=o.createNode(n,"fd",16895,73);return t.node_ops={lookup:(s,r)=>{var i=+r,a=o.getStream(i);if(!a)throw new o.ErrnoError(8);var d={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return d.parent=d,d}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?o.createDevice("/dev","stdin",e.stdin):o.symlink("/dev/tty","/dev/stdin"),e.stdout?o.createDevice("/dev","stdout",null,e.stdout):o.symlink("/dev/tty","/dev/stdout"),e.stderr?o.createDevice("/dev","stderr",null,e.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(t,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(t),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(ye,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:ye}},init:(n,t,s)=>{o.init.initialized=!0,o.ensureErrnoError(),e.stdin=n||e.stdin,e.stdout=t||e.stdout,e.stderr=s||e.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var t=o.streams[n];t&&o.close(t)}},getMode:(n,t)=>{var s=0;return n&&(s|=365),t&&(s|=146),s},findObject:(n,t)=>{var s=o.analyzePath(n,t);return s.exists?s.object:null},analyzePath:(n,t)=>{try{var s=o.lookupPath(n,{follow:!t});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=Ae.basename(n),s=o.lookupPath(n,{follow:!t}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,t,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var d=Ae.join2(n,a);try{o.mkdir(d)}catch{}n=d}}return d},createFile:(n,t,s,r,i)=>{var a=Ae.join2(typeof n=="string"?n:o.getPath(n),t),d=o.getMode(r,i);return o.create(a,d)},createDataFile:(n,t,s,r,i,a)=>{var d=t;n&&(n=typeof n=="string"?n:o.getPath(n),d=t?Ae.join2(n,t):n);var g=o.getMode(r,i),D=o.create(d,g);if(s){if(typeof s=="string"){for(var R=new Array(s.length),U=0,X=s.length;U<X;++U)R[U]=s.charCodeAt(U);s=R}o.chmod(D,g|146);var I=o.open(D,577);o.write(I,s,0,s.length,0,a),o.close(I),o.chmod(D,g)}return D},createDevice:(n,t,s,r)=>{var i=Ae.join2(typeof n=="string"?n:o.getPath(n),t),a=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var d=o.makedev(o.createDevice.major++,0);return o.registerDevice(d,{open:g=>{g.seekable=!1},close:g=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(g,D,R,U,X)=>{for(var I=0,k=0;k<U;k++){var M;try{M=s()}catch{throw new o.ErrnoError(29)}if(M===void 0&&I===0)throw new o.ErrnoError(6);if(M==null)break;I++,D[R+k]=M}return I&&(g.node.timestamp=Date.now()),I},write:(g,D,R,U,X)=>{for(var I=0;I<U;I++)try{r(D[R+I])}catch{throw new o.ErrnoError(29)}return U&&(g.node.timestamp=Date.now()),I}}),o.mkdev(i,a,d)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(xe)try{n.contents=Lt(xe(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,t,s,r,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(k){if(!(k>this.length-1||k<0)){var M=k%this.chunkSize,q=k/this.chunkSize|0;return this.getter(q)[M]}},a.prototype.setDataGetter=function(k){this.getter=k},a.prototype.cacheLength=function(){var k=new XMLHttpRequest;if(k.open("HEAD",s,!1),k.send(null),!(k.status>=200&&k.status<300||k.status===304))throw new Error("Couldn't load "+s+". Status: "+k.status);var M=Number(k.getResponseHeader("Content-length")),q,x=(q=k.getResponseHeader("Accept-Ranges"))&&q==="bytes",F=(q=k.getResponseHeader("Content-Encoding"))&&q==="gzip",O=1024*1024;x||(O=M);var N=(j,K)=>{if(j>K)throw new Error("invalid range ("+j+", "+K+") or no bytes requested!");if(K>M-1)throw new Error("only "+M+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",s,!1),M!==O&&c.setRequestHeader("Range","bytes="+j+"-"+K),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+s+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):Lt(c.responseText||"")},A=this;A.setDataGetter(j=>{var K=j*O,c=(j+1)*O-1;if(c=Math.min(c,M-1),typeof A.chunks[j]>"u"&&(A.chunks[j]=N(K,c)),typeof A.chunks[j]>"u")throw new Error("doXHR failed!");return A.chunks[j]}),(F||!M)&&(O=M=1,M=this.getter(0).length,O=M,Pe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=M,this._chunkSize=O,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!$)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new a;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var g={isDevice:!1,contents:d}}else var g={isDevice:!1,url:s};var D=o.createFile(n,t,g,r,i);g.contents?D.contents=g.contents:g.url&&(D.contents=null,D.url=g.url),Object.defineProperties(D,{usedBytes:{get:function(){return this.contents.length}}});var R={},U=Object.keys(D.stream_ops);U.forEach(I=>{var k=D.stream_ops[I];R[I]=function(){return o.forceLoadFile(D),k.apply(null,arguments)}});function X(I,k,M,q,x){var F=I.node.contents;if(x>=F.length)return 0;var O=Math.min(F.length-x,q);if(F.slice)for(var N=0;N<O;N++)k[M+N]=F[x+N];else for(var N=0;N<O;N++)k[M+N]=F.get(x+N);return O}return R.read=(I,k,M,q,x)=>(o.forceLoadFile(D),X(I,k,M,q,x)),R.mmap=(I,k,M,q,x)=>{o.forceLoadFile(D);var F=sn(k);if(!F)throw new o.ErrnoError(48);return X(I,$e,F,k,M),{ptr:F,allocated:!0}},D.stream_ops=R,D},createPreloadedFile:(n,t,s,r,i,a,d,g,D,R)=>{var U=t?rt.resolve(Ae.join2(n,t)):n;function X(I){function k(M){R&&R(),g||o.createDataFile(n,t,M,r,i,D),a&&a(),vt()}Browser.handledByPreloadPlugin(I,U,k,()=>{d&&d(),vt()})||k(I)}Ot(),typeof s=="string"?Xn(s,I=>X(I),d):X(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=()=>{Pe("creating db");var a=i.result;a.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var a=i.result,d=a.transaction([o.DB_STORE_NAME],"readwrite"),g=d.objectStore(o.DB_STORE_NAME),D=0,R=0,U=n.length;function X(){R==0?t():s()}n.forEach(I=>{var k=g.put(o.analyzePath(I).object.contents,I);k.onsuccess=()=>{D++,D+R==U&&X()},k.onerror=()=>{R++,D+R==U&&X()}}),d.onerror=s},i.onerror=s},loadFilesFromDB:(n,t,s)=>{t=t||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=s,i.onsuccess=()=>{var a=i.result;try{var d=a.transaction([o.DB_STORE_NAME],"readonly")}catch(I){s(I);return}var g=d.objectStore(o.DB_STORE_NAME),D=0,R=0,U=n.length;function X(){R==0?t():s()}n.forEach(I=>{var k=g.get(I);k.onsuccess=()=>{o.analyzePath(I).exists&&o.unlink(I),o.createDataFile(Ae.dirname(I),Ae.basename(I),k.result,!0,!0,!0),D++,D+R==U&&X()},k.onerror=()=>{R++,D+R==U&&X()}}),d.onerror=s},i.onerror=s}},me={DEFAULT_POLLMASK:5,calculateAt:function(n,t,s){if(Ae.isAbs(t))return t;var r;if(n===-100)r=o.cwd();else{var i=me.getStreamFromFD(n);r=i.path}if(t.length==0){if(!s)throw new o.ErrnoError(44);return r}return Ae.join2(r,t)},doStat:function(n,t,s){try{var r=n(t)}catch(g){if(g&&g.node&&Ae.normalize(t)!==Ae.normalize(o.getPath(g.node)))return-54;throw g}qe[s>>2]=r.dev,qe[s+8>>2]=r.ino,qe[s+12>>2]=r.mode,Ne[s+16>>2]=r.nlink,qe[s+20>>2]=r.uid,qe[s+24>>2]=r.gid,qe[s+28>>2]=r.rdev,Be=[r.size>>>0,(ve=r.size,+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[s+40>>2]=Be[0],qe[s+44>>2]=Be[1],qe[s+48>>2]=4096,qe[s+52>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),d=r.ctime.getTime();return Be=[Math.floor(i/1e3)>>>0,(ve=Math.floor(i/1e3),+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[s+56>>2]=Be[0],qe[s+60>>2]=Be[1],Ne[s+64>>2]=i%1e3*1e3,Be=[Math.floor(a/1e3)>>>0,(ve=Math.floor(a/1e3),+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[s+72>>2]=Be[0],qe[s+76>>2]=Be[1],Ne[s+80>>2]=a%1e3*1e3,Be=[Math.floor(d/1e3)>>>0,(ve=Math.floor(d/1e3),+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[s+88>>2]=Be[0],qe[s+92>>2]=Be[1],Ne[s+96>>2]=d%1e3*1e3,Be=[r.ino>>>0,(ve=r.ino,+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[s+104>>2]=Be[0],qe[s+108>>2]=Be[1],0},doMsync:function(n,t,s,r,i){if(!o.isFile(t.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var a=ft.slice(n,n+s);o.msync(t,a,i,s,r)},varargs:void 0,get:function(){me.varargs+=4;var n=qe[me.varargs-4>>2];return n},getStr:function(n){var t=Ft(n);return t},getStreamFromFD:function(n){var t=o.getStream(n);if(!t)throw new o.ErrnoError(8);return t}};function Yn(n,t){try{return n=me.getStr(n),o.chmod(n,t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Zn(n,t,s,r){try{if(t=me.getStr(t),t=me.calculateAt(n,t),s&-8)return-28;var i=o.lookupPath(t,{follow:!0}),a=i.node;if(!a)return-44;var d="";return s&4&&(d+="r"),s&2&&(d+="w"),s&1&&(d+="x"),d&&o.nodePermissions(a,d)?-2:0}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function er(n,t){try{return o.fchmod(n,t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function tr(n,t,s){try{return o.fchown(n,t,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function nr(n){return qe[_n()>>2]=n,n}function rr(n,t,s){me.varargs=s;try{var r=me.getStreamFromFD(n);switch(t){case 0:{var i=me.get();if(i<0)return-28;var a;return a=o.createStream(r,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=me.get();return r.flags|=i,0}case 5:{var i=me.get(),d=0;return Jt[i+d>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return nr(28),-1;default:return-28}}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function sr(n,t){try{var s=me.getStreamFromFD(n);return me.doStat(o.stat,s.path,t)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var ir=9007199254740992,or=-9007199254740992;function on(n){return n<or||n>ir?NaN:Number(n)}function ar(n,t){try{return t=on(t),isNaN(t)?-61:(o.ftruncate(n,t),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function lr(n,t){try{if(t===0)return-28;var s=o.cwd(),r=ht(s)+1;return t<r?-68:(Kt(s,n,t),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function cr(n,t,s){me.varargs=s;try{var r=me.getStreamFromFD(n);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=me.get();return qe[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=me.get();return o.ioctl(r,t,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function ur(n,t){try{return n=me.getStr(n),me.doStat(o.lstat,n,t)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function _r(n,t,s){try{return t=me.getStr(t),t=me.calculateAt(n,t),t=Ae.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),o.mkdir(t,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function fr(n,t,s,r){try{t=me.getStr(t);var i=r&256,a=r&4096;return r=r&-6401,t=me.calculateAt(n,t,a),me.doStat(i?o.lstat:o.stat,t,s)}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return-d.errno}}function dr(n,t,s,r){me.varargs=r;try{t=me.getStr(t),t=me.calculateAt(n,t);var i=r?me.get():0;return o.open(t,s,i).fd}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function pr(n,t,s,r){try{if(t=me.getStr(t),t=me.calculateAt(n,t),r<=0)return-28;var i=o.readlink(t),a=Math.min(r,ht(i)),d=$e[s+a];return Kt(i,s,r+1),$e[s+a]=d,a}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function mr(n){try{return n=me.getStr(n),o.rmdir(n),0}catch(t){if(typeof o>"u"||!(t instanceof o.ErrnoError))throw t;return-t.errno}}function hr(n,t){try{return n=me.getStr(n),me.doStat(o.stat,n,t)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function gr(n,t,s){try{return t=me.getStr(t),t=me.calculateAt(n,t),s===0?o.unlink(t):s===512?o.rmdir(t):dt("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Dt(n){return Ne[n>>2]+qe[n+4>>2]*4294967296}function yr(n,t,s,r){try{if(t=me.getStr(t),t=me.calculateAt(n,t,!0),s){var d=Dt(s),g=qe[s+8>>2];i=d*1e3+g/1e6,s+=16,d=Dt(s),g=qe[s+8>>2],a=d*1e3+g/1e6}else var i=Date.now(),a=i;return o.utime(t,i,a),0}catch(D){if(typeof o>"u"||!(D instanceof o.ErrnoError))throw D;return-D.errno}}var br=!0;function qr(){return br}function wr(n){return n%4===0&&(n%100!==0||n%400===0)}var Er=[0,31,60,91,121,152,182,213,244,274,305,335],vr=[0,31,59,90,120,151,181,212,243,273,304,334];function xr(n){var t=wr(n.getFullYear()),s=t?Er:vr,r=s[n.getMonth()]+n.getDate()-1;return r}function Sr(n,t){var s=new Date(Dt(n)*1e3);qe[t>>2]=s.getSeconds(),qe[t+4>>2]=s.getMinutes(),qe[t+8>>2]=s.getHours(),qe[t+12>>2]=s.getDate(),qe[t+16>>2]=s.getMonth(),qe[t+20>>2]=s.getFullYear()-1900,qe[t+24>>2]=s.getDay();var r=xr(s)|0;qe[t+28>>2]=r,qe[t+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),a=new Date(s.getFullYear(),6,1).getTimezoneOffset(),d=i.getTimezoneOffset(),g=(a!=d&&s.getTimezoneOffset()==Math.min(d,a))|0;qe[t+32>>2]=g}function Ar(n,t,s,r,i,a,d){try{var g=me.getStreamFromFD(r),D=o.mmap(g,n,i,t,s),R=D.ptr;return qe[a>>2]=D.allocated,Ne[d>>2]=R,0}catch(U){if(typeof o>"u"||!(U instanceof o.ErrnoError))throw U;return-U.errno}}function kr(n,t,s,r,i,a){try{var d=me.getStreamFromFD(i);s&2&&me.doMsync(n,d,t,r,a),o.munmap(d)}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}function an(n){var t=ht(n)+1,s=fn(t);return s&&mt(n,$e,s,t),s}function Ir(n,t,s){var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),d=i.getTimezoneOffset(),g=a.getTimezoneOffset(),D=Math.max(d,g);Ne[n>>2]=D*60,qe[t>>2]=+(d!=g);function R(M){var q=M.toTimeString().match(/\(([A-Za-z ]+)\)$/);return q?q[1]:"GMT"}var U=R(i),X=R(a),I=an(U),k=an(X);g<d?(Ne[s>>2]=I,Ne[s+4>>2]=k):(Ne[s>>2]=k,Ne[s+4>>2]=I)}function Tr(){return Date.now()}var ln;ln=()=>performance.now();function Fr(){return 2147483648}function Or(n){var t=Je.buffer;try{return Je.grow(n-t.byteLength+65535>>>16),Xt(),1}catch{}}function Pr(n){var t=ft.length;n=n>>>0;var s=Fr();if(n>s)return!1;let r=(D,R)=>D+(R-D%R)%R;for(var i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,n+100663296);var d=Math.min(s,r(Math.max(n,a),65536)),g=Or(d);if(g)return!0}return!1}var Rt={};function Lr(){return se||"./this.program"}function yt(){if(!yt.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Lr()};for(var s in Rt)Rt[s]===void 0?delete t[s]:t[s]=Rt[s];var r=[];for(var s in t)r.push(s+"="+t[s]);yt.strings=r}return yt.strings}function Dr(n,t,s){for(var r=0;r<n.length;++r)$e[t++>>0]=n.charCodeAt(r);$e[t>>0]=0}function Rr(n,t){var s=0;return yt().forEach(function(r,i){var a=t+s;Ne[n+i*4>>2]=a,Dr(r,a),s+=r.length+1}),0}function Cr(n,t){var s=yt();Ne[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),Ne[t>>2]=r,0}function Nr(n){try{var t=me.getStreamFromFD(n);return o.close(t),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Mr(n,t){try{var s=me.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return $e[t>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function jr(n,t,s,r){for(var i=0,a=0;a<s;a++){var d=Ne[t>>2],g=Ne[t+4>>2];t+=8;var D=o.read(n,$e,d,g,r);if(D<0)return-1;if(i+=D,D<g)break}return i}function Br(n,t,s,r){try{var i=me.getStreamFromFD(n),a=jr(i,t,s);return Ne[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}function Ur(n,t,s,r){try{if(t=on(t),isNaN(t))return 61;var i=me.getStreamFromFD(n);return o.llseek(i,t,s),Be=[i.position>>>0,(ve=i.position,+Math.abs(ve)>=1?ve>0?(Math.min(+Math.floor(ve/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)],qe[r>>2]=Be[0],qe[r+4>>2]=Be[1],i.getdents&&t===0&&s===0&&(i.getdents=null),0}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return a.errno}}function zr(n){try{var t=me.getStreamFromFD(n);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Wr(n,t,s,r){for(var i=0,a=0;a<s;a++){var d=Ne[t>>2],g=Ne[t+4>>2];t+=8;var D=o.write(n,$e,d,g,r);if(D<0)return-1;i+=D}return i}function Qr(n,t,s,r){try{var i=me.getStreamFromFD(n),a=Wr(i,t,s);return Ne[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}var cn=function(n,t,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},xt=365,St=146;Object.defineProperties(cn.prototype,{read:{get:function(){return(this.mode&xt)===xt},set:function(n){n?this.mode|=xt:this.mode&=~xt}},write:{get:function(){return(this.mode&St)===St},set:function(n){n?this.mode|=St:this.mode&=~St}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=cn,o.staticInit();var un={__syscall_chmod:Yn,__syscall_faccessat:Zn,__syscall_fchmod:er,__syscall_fchown32:tr,__syscall_fcntl64:rr,__syscall_fstat64:sr,__syscall_ftruncate64:ar,__syscall_getcwd:lr,__syscall_ioctl:cr,__syscall_lstat64:ur,__syscall_mkdirat:_r,__syscall_newfstatat:fr,__syscall_openat:dr,__syscall_readlinkat:pr,__syscall_rmdir:mr,__syscall_stat64:hr,__syscall_unlinkat:gr,__syscall_utimensat:yr,_emscripten_get_now_is_monotonic:qr,_localtime_js:Sr,_mmap_js:Ar,_munmap_js:kr,_tzset_js:Ir,emscripten_date_now:Tr,emscripten_get_now:ln,emscripten_resize_heap:Pr,environ_get:Rr,environ_sizes_get:Cr,fd_close:Nr,fd_fdstat_get:Mr,fd_read:Br,fd_seek:Ur,fd_sync:zr,fd_write:Qr,memory:Je};Gn(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)},e._sqlite3_status64=function(){return(e._sqlite3_status64=e.asm.sqlite3_status64).apply(null,arguments)},e._sqlite3_status=function(){return(e._sqlite3_status=e.asm.sqlite3_status).apply(null,arguments)},e._sqlite3_db_status=function(){return(e._sqlite3_db_status=e.asm.sqlite3_db_status).apply(null,arguments)},e._sqlite3_msize=function(){return(e._sqlite3_msize=e.asm.sqlite3_msize).apply(null,arguments)},e._sqlite3_vfs_find=function(){return(e._sqlite3_vfs_find=e.asm.sqlite3_vfs_find).apply(null,arguments)},e._sqlite3_initialize=function(){return(e._sqlite3_initialize=e.asm.sqlite3_initialize).apply(null,arguments)},e._sqlite3_malloc=function(){return(e._sqlite3_malloc=e.asm.sqlite3_malloc).apply(null,arguments)},e._sqlite3_free=function(){return(e._sqlite3_free=e.asm.sqlite3_free).apply(null,arguments)},e._sqlite3_vfs_register=function(){return(e._sqlite3_vfs_register=e.asm.sqlite3_vfs_register).apply(null,arguments)},e._sqlite3_vfs_unregister=function(){return(e._sqlite3_vfs_unregister=e.asm.sqlite3_vfs_unregister).apply(null,arguments)},e._sqlite3_malloc64=function(){return(e._sqlite3_malloc64=e.asm.sqlite3_malloc64).apply(null,arguments)},e._sqlite3_realloc=function(){return(e._sqlite3_realloc=e.asm.sqlite3_realloc).apply(null,arguments)},e._sqlite3_realloc64=function(){return(e._sqlite3_realloc64=e.asm.sqlite3_realloc64).apply(null,arguments)},e._sqlite3_value_text=function(){return(e._sqlite3_value_text=e.asm.sqlite3_value_text).apply(null,arguments)},e._sqlite3_randomness=function(){return(e._sqlite3_randomness=e.asm.sqlite3_randomness).apply(null,arguments)},e._sqlite3_stricmp=function(){return(e._sqlite3_stricmp=e.asm.sqlite3_stricmp).apply(null,arguments)},e._sqlite3_strnicmp=function(){return(e._sqlite3_strnicmp=e.asm.sqlite3_strnicmp).apply(null,arguments)},e._sqlite3_uri_parameter=function(){return(e._sqlite3_uri_parameter=e.asm.sqlite3_uri_parameter).apply(null,arguments)};var _n=e.___errno_location=function(){return(_n=e.___errno_location=e.asm.__errno_location).apply(null,arguments)};e._sqlite3_uri_boolean=function(){return(e._sqlite3_uri_boolean=e.asm.sqlite3_uri_boolean).apply(null,arguments)},e._sqlite3_serialize=function(){return(e._sqlite3_serialize=e.asm.sqlite3_serialize).apply(null,arguments)},e._sqlite3_prepare_v2=function(){return(e._sqlite3_prepare_v2=e.asm.sqlite3_prepare_v2).apply(null,arguments)},e._sqlite3_step=function(){return(e._sqlite3_step=e.asm.sqlite3_step).apply(null,arguments)},e._sqlite3_column_int64=function(){return(e._sqlite3_column_int64=e.asm.sqlite3_column_int64).apply(null,arguments)},e._sqlite3_reset=function(){return(e._sqlite3_reset=e.asm.sqlite3_reset).apply(null,arguments)},e._sqlite3_exec=function(){return(e._sqlite3_exec=e.asm.sqlite3_exec).apply(null,arguments)},e._sqlite3_column_int=function(){return(e._sqlite3_column_int=e.asm.sqlite3_column_int).apply(null,arguments)},e._sqlite3_finalize=function(){return(e._sqlite3_finalize=e.asm.sqlite3_finalize).apply(null,arguments)},e._sqlite3_file_control=function(){return(e._sqlite3_file_control=e.asm.sqlite3_file_control).apply(null,arguments)},e._sqlite3_column_name=function(){return(e._sqlite3_column_name=e.asm.sqlite3_column_name).apply(null,arguments)},e._sqlite3_column_text=function(){return(e._sqlite3_column_text=e.asm.sqlite3_column_text).apply(null,arguments)},e._sqlite3_column_type=function(){return(e._sqlite3_column_type=e.asm.sqlite3_column_type).apply(null,arguments)},e._sqlite3_errmsg=function(){return(e._sqlite3_errmsg=e.asm.sqlite3_errmsg).apply(null,arguments)},e._sqlite3_deserialize=function(){return(e._sqlite3_deserialize=e.asm.sqlite3_deserialize).apply(null,arguments)},e._sqlite3_clear_bindings=function(){return(e._sqlite3_clear_bindings=e.asm.sqlite3_clear_bindings).apply(null,arguments)},e._sqlite3_value_blob=function(){return(e._sqlite3_value_blob=e.asm.sqlite3_value_blob).apply(null,arguments)},e._sqlite3_value_bytes=function(){return(e._sqlite3_value_bytes=e.asm.sqlite3_value_bytes).apply(null,arguments)},e._sqlite3_value_double=function(){return(e._sqlite3_value_double=e.asm.sqlite3_value_double).apply(null,arguments)},e._sqlite3_value_int=function(){return(e._sqlite3_value_int=e.asm.sqlite3_value_int).apply(null,arguments)},e._sqlite3_value_int64=function(){return(e._sqlite3_value_int64=e.asm.sqlite3_value_int64).apply(null,arguments)},e._sqlite3_value_subtype=function(){return(e._sqlite3_value_subtype=e.asm.sqlite3_value_subtype).apply(null,arguments)},e._sqlite3_value_pointer=function(){return(e._sqlite3_value_pointer=e.asm.sqlite3_value_pointer).apply(null,arguments)},e._sqlite3_value_type=function(){return(e._sqlite3_value_type=e.asm.sqlite3_value_type).apply(null,arguments)},e._sqlite3_value_nochange=function(){return(e._sqlite3_value_nochange=e.asm.sqlite3_value_nochange).apply(null,arguments)},e._sqlite3_value_frombind=function(){return(e._sqlite3_value_frombind=e.asm.sqlite3_value_frombind).apply(null,arguments)},e._sqlite3_value_dup=function(){return(e._sqlite3_value_dup=e.asm.sqlite3_value_dup).apply(null,arguments)},e._sqlite3_value_free=function(){return(e._sqlite3_value_free=e.asm.sqlite3_value_free).apply(null,arguments)},e._sqlite3_result_blob=function(){return(e._sqlite3_result_blob=e.asm.sqlite3_result_blob).apply(null,arguments)},e._sqlite3_result_error_toobig=function(){return(e._sqlite3_result_error_toobig=e.asm.sqlite3_result_error_toobig).apply(null,arguments)},e._sqlite3_result_error_nomem=function(){return(e._sqlite3_result_error_nomem=e.asm.sqlite3_result_error_nomem).apply(null,arguments)},e._sqlite3_result_double=function(){return(e._sqlite3_result_double=e.asm.sqlite3_result_double).apply(null,arguments)},e._sqlite3_result_error=function(){return(e._sqlite3_result_error=e.asm.sqlite3_result_error).apply(null,arguments)},e._sqlite3_result_int=function(){return(e._sqlite3_result_int=e.asm.sqlite3_result_int).apply(null,arguments)},e._sqlite3_result_int64=function(){return(e._sqlite3_result_int64=e.asm.sqlite3_result_int64).apply(null,arguments)},e._sqlite3_result_null=function(){return(e._sqlite3_result_null=e.asm.sqlite3_result_null).apply(null,arguments)},e._sqlite3_result_pointer=function(){return(e._sqlite3_result_pointer=e.asm.sqlite3_result_pointer).apply(null,arguments)},e._sqlite3_result_subtype=function(){return(e._sqlite3_result_subtype=e.asm.sqlite3_result_subtype).apply(null,arguments)},e._sqlite3_result_text=function(){return(e._sqlite3_result_text=e.asm.sqlite3_result_text).apply(null,arguments)},e._sqlite3_result_zeroblob=function(){return(e._sqlite3_result_zeroblob=e.asm.sqlite3_result_zeroblob).apply(null,arguments)},e._sqlite3_result_zeroblob64=function(){return(e._sqlite3_result_zeroblob64=e.asm.sqlite3_result_zeroblob64).apply(null,arguments)},e._sqlite3_result_error_code=function(){return(e._sqlite3_result_error_code=e.asm.sqlite3_result_error_code).apply(null,arguments)},e._sqlite3_user_data=function(){return(e._sqlite3_user_data=e.asm.sqlite3_user_data).apply(null,arguments)},e._sqlite3_context_db_handle=function(){return(e._sqlite3_context_db_handle=e.asm.sqlite3_context_db_handle).apply(null,arguments)},e._sqlite3_vtab_nochange=function(){return(e._sqlite3_vtab_nochange=e.asm.sqlite3_vtab_nochange).apply(null,arguments)},e._sqlite3_vtab_in_first=function(){return(e._sqlite3_vtab_in_first=e.asm.sqlite3_vtab_in_first).apply(null,arguments)},e._sqlite3_vtab_in_next=function(){return(e._sqlite3_vtab_in_next=e.asm.sqlite3_vtab_in_next).apply(null,arguments)},e._sqlite3_aggregate_context=function(){return(e._sqlite3_aggregate_context=e.asm.sqlite3_aggregate_context).apply(null,arguments)},e._sqlite3_get_auxdata=function(){return(e._sqlite3_get_auxdata=e.asm.sqlite3_get_auxdata).apply(null,arguments)},e._sqlite3_set_auxdata=function(){return(e._sqlite3_set_auxdata=e.asm.sqlite3_set_auxdata).apply(null,arguments)},e._sqlite3_column_count=function(){return(e._sqlite3_column_count=e.asm.sqlite3_column_count).apply(null,arguments)},e._sqlite3_data_count=function(){return(e._sqlite3_data_count=e.asm.sqlite3_data_count).apply(null,arguments)},e._sqlite3_column_blob=function(){return(e._sqlite3_column_blob=e.asm.sqlite3_column_blob).apply(null,arguments)},e._sqlite3_column_bytes=function(){return(e._sqlite3_column_bytes=e.asm.sqlite3_column_bytes).apply(null,arguments)},e._sqlite3_column_double=function(){return(e._sqlite3_column_double=e.asm.sqlite3_column_double).apply(null,arguments)},e._sqlite3_column_value=function(){return(e._sqlite3_column_value=e.asm.sqlite3_column_value).apply(null,arguments)},e._sqlite3_bind_blob=function(){return(e._sqlite3_bind_blob=e.asm.sqlite3_bind_blob).apply(null,arguments)},e._sqlite3_bind_double=function(){return(e._sqlite3_bind_double=e.asm.sqlite3_bind_double).apply(null,arguments)},e._sqlite3_bind_int=function(){return(e._sqlite3_bind_int=e.asm.sqlite3_bind_int).apply(null,arguments)},e._sqlite3_bind_int64=function(){return(e._sqlite3_bind_int64=e.asm.sqlite3_bind_int64).apply(null,arguments)},e._sqlite3_bind_null=function(){return(e._sqlite3_bind_null=e.asm.sqlite3_bind_null).apply(null,arguments)},e._sqlite3_bind_pointer=function(){return(e._sqlite3_bind_pointer=e.asm.sqlite3_bind_pointer).apply(null,arguments)},e._sqlite3_bind_text=function(){return(e._sqlite3_bind_text=e.asm.sqlite3_bind_text).apply(null,arguments)},e._sqlite3_bind_parameter_count=function(){return(e._sqlite3_bind_parameter_count=e.asm.sqlite3_bind_parameter_count).apply(null,arguments)},e._sqlite3_bind_parameter_index=function(){return(e._sqlite3_bind_parameter_index=e.asm.sqlite3_bind_parameter_index).apply(null,arguments)},e._sqlite3_db_handle=function(){return(e._sqlite3_db_handle=e.asm.sqlite3_db_handle).apply(null,arguments)},e._sqlite3_stmt_readonly=function(){return(e._sqlite3_stmt_readonly=e.asm.sqlite3_stmt_readonly).apply(null,arguments)},e._sqlite3_stmt_isexplain=function(){return(e._sqlite3_stmt_isexplain=e.asm.sqlite3_stmt_isexplain).apply(null,arguments)},e._sqlite3_stmt_status=function(){return(e._sqlite3_stmt_status=e.asm.sqlite3_stmt_status).apply(null,arguments)},e._sqlite3_sql=function(){return(e._sqlite3_sql=e.asm.sqlite3_sql).apply(null,arguments)},e._sqlite3_expanded_sql=function(){return(e._sqlite3_expanded_sql=e.asm.sqlite3_expanded_sql).apply(null,arguments)},e._sqlite3_preupdate_old=function(){return(e._sqlite3_preupdate_old=e.asm.sqlite3_preupdate_old).apply(null,arguments)},e._sqlite3_preupdate_count=function(){return(e._sqlite3_preupdate_count=e.asm.sqlite3_preupdate_count).apply(null,arguments)},e._sqlite3_preupdate_depth=function(){return(e._sqlite3_preupdate_depth=e.asm.sqlite3_preupdate_depth).apply(null,arguments)},e._sqlite3_preupdate_blobwrite=function(){return(e._sqlite3_preupdate_blobwrite=e.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},e._sqlite3_preupdate_new=function(){return(e._sqlite3_preupdate_new=e.asm.sqlite3_preupdate_new).apply(null,arguments)},e._sqlite3_value_numeric_type=function(){return(e._sqlite3_value_numeric_type=e.asm.sqlite3_value_numeric_type).apply(null,arguments)},e._sqlite3_set_authorizer=function(){return(e._sqlite3_set_authorizer=e.asm.sqlite3_set_authorizer).apply(null,arguments)},e._sqlite3_strglob=function(){return(e._sqlite3_strglob=e.asm.sqlite3_strglob).apply(null,arguments)},e._sqlite3_strlike=function(){return(e._sqlite3_strlike=e.asm.sqlite3_strlike).apply(null,arguments)},e._sqlite3_auto_extension=function(){return(e._sqlite3_auto_extension=e.asm.sqlite3_auto_extension).apply(null,arguments)},e._sqlite3_cancel_auto_extension=function(){return(e._sqlite3_cancel_auto_extension=e.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},e._sqlite3_reset_auto_extension=function(){return(e._sqlite3_reset_auto_extension=e.asm.sqlite3_reset_auto_extension).apply(null,arguments)},e._sqlite3_prepare_v3=function(){return(e._sqlite3_prepare_v3=e.asm.sqlite3_prepare_v3).apply(null,arguments)},e._sqlite3_create_module=function(){return(e._sqlite3_create_module=e.asm.sqlite3_create_module).apply(null,arguments)},e._sqlite3_create_module_v2=function(){return(e._sqlite3_create_module_v2=e.asm.sqlite3_create_module_v2).apply(null,arguments)},e._sqlite3_drop_modules=function(){return(e._sqlite3_drop_modules=e.asm.sqlite3_drop_modules).apply(null,arguments)},e._sqlite3_declare_vtab=function(){return(e._sqlite3_declare_vtab=e.asm.sqlite3_declare_vtab).apply(null,arguments)},e._sqlite3_vtab_on_conflict=function(){return(e._sqlite3_vtab_on_conflict=e.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},e._sqlite3_vtab_collation=function(){return(e._sqlite3_vtab_collation=e.asm.sqlite3_vtab_collation).apply(null,arguments)},e._sqlite3_vtab_in=function(){return(e._sqlite3_vtab_in=e.asm.sqlite3_vtab_in).apply(null,arguments)},e._sqlite3_vtab_rhs_value=function(){return(e._sqlite3_vtab_rhs_value=e.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},e._sqlite3_vtab_distinct=function(){return(e._sqlite3_vtab_distinct=e.asm.sqlite3_vtab_distinct).apply(null,arguments)},e._sqlite3_keyword_name=function(){return(e._sqlite3_keyword_name=e.asm.sqlite3_keyword_name).apply(null,arguments)},e._sqlite3_keyword_count=function(){return(e._sqlite3_keyword_count=e.asm.sqlite3_keyword_count).apply(null,arguments)},e._sqlite3_keyword_check=function(){return(e._sqlite3_keyword_check=e.asm.sqlite3_keyword_check).apply(null,arguments)},e._sqlite3_complete=function(){return(e._sqlite3_complete=e.asm.sqlite3_complete).apply(null,arguments)},e._sqlite3_libversion=function(){return(e._sqlite3_libversion=e.asm.sqlite3_libversion).apply(null,arguments)},e._sqlite3_libversion_number=function(){return(e._sqlite3_libversion_number=e.asm.sqlite3_libversion_number).apply(null,arguments)},e._sqlite3_shutdown=function(){return(e._sqlite3_shutdown=e.asm.sqlite3_shutdown).apply(null,arguments)},e._sqlite3_last_insert_rowid=function(){return(e._sqlite3_last_insert_rowid=e.asm.sqlite3_last_insert_rowid).apply(null,arguments)},e._sqlite3_set_last_insert_rowid=function(){return(e._sqlite3_set_last_insert_rowid=e.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},e._sqlite3_changes64=function(){return(e._sqlite3_changes64=e.asm.sqlite3_changes64).apply(null,arguments)},e._sqlite3_changes=function(){return(e._sqlite3_changes=e.asm.sqlite3_changes).apply(null,arguments)},e._sqlite3_total_changes64=function(){return(e._sqlite3_total_changes64=e.asm.sqlite3_total_changes64).apply(null,arguments)},e._sqlite3_total_changes=function(){return(e._sqlite3_total_changes=e.asm.sqlite3_total_changes).apply(null,arguments)},e._sqlite3_txn_state=function(){return(e._sqlite3_txn_state=e.asm.sqlite3_txn_state).apply(null,arguments)},e._sqlite3_close_v2=function(){return(e._sqlite3_close_v2=e.asm.sqlite3_close_v2).apply(null,arguments)},e._sqlite3_busy_handler=function(){return(e._sqlite3_busy_handler=e.asm.sqlite3_busy_handler).apply(null,arguments)},e._sqlite3_progress_handler=function(){return(e._sqlite3_progress_handler=e.asm.sqlite3_progress_handler).apply(null,arguments)},e._sqlite3_busy_timeout=function(){return(e._sqlite3_busy_timeout=e.asm.sqlite3_busy_timeout).apply(null,arguments)},e._sqlite3_create_function=function(){return(e._sqlite3_create_function=e.asm.sqlite3_create_function).apply(null,arguments)},e._sqlite3_create_function_v2=function(){return(e._sqlite3_create_function_v2=e.asm.sqlite3_create_function_v2).apply(null,arguments)},e._sqlite3_create_window_function=function(){return(e._sqlite3_create_window_function=e.asm.sqlite3_create_window_function).apply(null,arguments)},e._sqlite3_overload_function=function(){return(e._sqlite3_overload_function=e.asm.sqlite3_overload_function).apply(null,arguments)},e._sqlite3_trace_v2=function(){return(e._sqlite3_trace_v2=e.asm.sqlite3_trace_v2).apply(null,arguments)},e._sqlite3_commit_hook=function(){return(e._sqlite3_commit_hook=e.asm.sqlite3_commit_hook).apply(null,arguments)},e._sqlite3_update_hook=function(){return(e._sqlite3_update_hook=e.asm.sqlite3_update_hook).apply(null,arguments)},e._sqlite3_rollback_hook=function(){return(e._sqlite3_rollback_hook=e.asm.sqlite3_rollback_hook).apply(null,arguments)},e._sqlite3_preupdate_hook=function(){return(e._sqlite3_preupdate_hook=e.asm.sqlite3_preupdate_hook).apply(null,arguments)},e._sqlite3_error_offset=function(){return(e._sqlite3_error_offset=e.asm.sqlite3_error_offset).apply(null,arguments)},e._sqlite3_errcode=function(){return(e._sqlite3_errcode=e.asm.sqlite3_errcode).apply(null,arguments)},e._sqlite3_extended_errcode=function(){return(e._sqlite3_extended_errcode=e.asm.sqlite3_extended_errcode).apply(null,arguments)},e._sqlite3_errstr=function(){return(e._sqlite3_errstr=e.asm.sqlite3_errstr).apply(null,arguments)},e._sqlite3_limit=function(){return(e._sqlite3_limit=e.asm.sqlite3_limit).apply(null,arguments)},e._sqlite3_open=function(){return(e._sqlite3_open=e.asm.sqlite3_open).apply(null,arguments)},e._sqlite3_open_v2=function(){return(e._sqlite3_open_v2=e.asm.sqlite3_open_v2).apply(null,arguments)},e._sqlite3_create_collation=function(){return(e._sqlite3_create_collation=e.asm.sqlite3_create_collation).apply(null,arguments)},e._sqlite3_create_collation_v2=function(){return(e._sqlite3_create_collation_v2=e.asm.sqlite3_create_collation_v2).apply(null,arguments)},e._sqlite3_collation_needed=function(){return(e._sqlite3_collation_needed=e.asm.sqlite3_collation_needed).apply(null,arguments)},e._sqlite3_get_autocommit=function(){return(e._sqlite3_get_autocommit=e.asm.sqlite3_get_autocommit).apply(null,arguments)},e._sqlite3_table_column_metadata=function(){return(e._sqlite3_table_column_metadata=e.asm.sqlite3_table_column_metadata).apply(null,arguments)},e._sqlite3_extended_result_codes=function(){return(e._sqlite3_extended_result_codes=e.asm.sqlite3_extended_result_codes).apply(null,arguments)},e._sqlite3_uri_key=function(){return(e._sqlite3_uri_key=e.asm.sqlite3_uri_key).apply(null,arguments)},e._sqlite3_uri_int64=function(){return(e._sqlite3_uri_int64=e.asm.sqlite3_uri_int64).apply(null,arguments)},e._sqlite3_db_name=function(){return(e._sqlite3_db_name=e.asm.sqlite3_db_name).apply(null,arguments)},e._sqlite3_db_filename=function(){return(e._sqlite3_db_filename=e.asm.sqlite3_db_filename).apply(null,arguments)},e._sqlite3_compileoption_used=function(){return(e._sqlite3_compileoption_used=e.asm.sqlite3_compileoption_used).apply(null,arguments)},e._sqlite3_compileoption_get=function(){return(e._sqlite3_compileoption_get=e.asm.sqlite3_compileoption_get).apply(null,arguments)},e._sqlite3session_diff=function(){return(e._sqlite3session_diff=e.asm.sqlite3session_diff).apply(null,arguments)},e._sqlite3session_attach=function(){return(e._sqlite3session_attach=e.asm.sqlite3session_attach).apply(null,arguments)},e._sqlite3session_create=function(){return(e._sqlite3session_create=e.asm.sqlite3session_create).apply(null,arguments)},e._sqlite3session_delete=function(){return(e._sqlite3session_delete=e.asm.sqlite3session_delete).apply(null,arguments)},e._sqlite3session_table_filter=function(){return(e._sqlite3session_table_filter=e.asm.sqlite3session_table_filter).apply(null,arguments)},e._sqlite3session_changeset=function(){return(e._sqlite3session_changeset=e.asm.sqlite3session_changeset).apply(null,arguments)},e._sqlite3session_changeset_strm=function(){return(e._sqlite3session_changeset_strm=e.asm.sqlite3session_changeset_strm).apply(null,arguments)},e._sqlite3session_patchset_strm=function(){return(e._sqlite3session_patchset_strm=e.asm.sqlite3session_patchset_strm).apply(null,arguments)},e._sqlite3session_patchset=function(){return(e._sqlite3session_patchset=e.asm.sqlite3session_patchset).apply(null,arguments)},e._sqlite3session_enable=function(){return(e._sqlite3session_enable=e.asm.sqlite3session_enable).apply(null,arguments)},e._sqlite3session_indirect=function(){return(e._sqlite3session_indirect=e.asm.sqlite3session_indirect).apply(null,arguments)},e._sqlite3session_isempty=function(){return(e._sqlite3session_isempty=e.asm.sqlite3session_isempty).apply(null,arguments)},e._sqlite3session_memory_used=function(){return(e._sqlite3session_memory_used=e.asm.sqlite3session_memory_used).apply(null,arguments)},e._sqlite3session_object_config=function(){return(e._sqlite3session_object_config=e.asm.sqlite3session_object_config).apply(null,arguments)},e._sqlite3session_changeset_size=function(){return(e._sqlite3session_changeset_size=e.asm.sqlite3session_changeset_size).apply(null,arguments)},e._sqlite3changeset_start=function(){return(e._sqlite3changeset_start=e.asm.sqlite3changeset_start).apply(null,arguments)},e._sqlite3changeset_start_v2=function(){return(e._sqlite3changeset_start_v2=e.asm.sqlite3changeset_start_v2).apply(null,arguments)},e._sqlite3changeset_start_strm=function(){return(e._sqlite3changeset_start_strm=e.asm.sqlite3changeset_start_strm).apply(null,arguments)},e._sqlite3changeset_start_v2_strm=function(){return(e._sqlite3changeset_start_v2_strm=e.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},e._sqlite3changeset_next=function(){return(e._sqlite3changeset_next=e.asm.sqlite3changeset_next).apply(null,arguments)},e._sqlite3changeset_op=function(){return(e._sqlite3changeset_op=e.asm.sqlite3changeset_op).apply(null,arguments)},e._sqlite3changeset_pk=function(){return(e._sqlite3changeset_pk=e.asm.sqlite3changeset_pk).apply(null,arguments)},e._sqlite3changeset_old=function(){return(e._sqlite3changeset_old=e.asm.sqlite3changeset_old).apply(null,arguments)},e._sqlite3changeset_new=function(){return(e._sqlite3changeset_new=e.asm.sqlite3changeset_new).apply(null,arguments)},e._sqlite3changeset_conflict=function(){return(e._sqlite3changeset_conflict=e.asm.sqlite3changeset_conflict).apply(null,arguments)},e._sqlite3changeset_fk_conflicts=function(){return(e._sqlite3changeset_fk_conflicts=e.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},e._sqlite3changeset_finalize=function(){return(e._sqlite3changeset_finalize=e.asm.sqlite3changeset_finalize).apply(null,arguments)},e._sqlite3changeset_invert=function(){return(e._sqlite3changeset_invert=e.asm.sqlite3changeset_invert).apply(null,arguments)},e._sqlite3changeset_invert_strm=function(){return(e._sqlite3changeset_invert_strm=e.asm.sqlite3changeset_invert_strm).apply(null,arguments)},e._sqlite3changeset_apply_v2=function(){return(e._sqlite3changeset_apply_v2=e.asm.sqlite3changeset_apply_v2).apply(null,arguments)},e._sqlite3changeset_apply=function(){return(e._sqlite3changeset_apply=e.asm.sqlite3changeset_apply).apply(null,arguments)},e._sqlite3changeset_apply_v2_strm=function(){return(e._sqlite3changeset_apply_v2_strm=e.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},e._sqlite3changeset_apply_strm=function(){return(e._sqlite3changeset_apply_strm=e.asm.sqlite3changeset_apply_strm).apply(null,arguments)},e._sqlite3changegroup_new=function(){return(e._sqlite3changegroup_new=e.asm.sqlite3changegroup_new).apply(null,arguments)},e._sqlite3changegroup_add=function(){return(e._sqlite3changegroup_add=e.asm.sqlite3changegroup_add).apply(null,arguments)},e._sqlite3changegroup_output=function(){return(e._sqlite3changegroup_output=e.asm.sqlite3changegroup_output).apply(null,arguments)},e._sqlite3changegroup_add_strm=function(){return(e._sqlite3changegroup_add_strm=e.asm.sqlite3changegroup_add_strm).apply(null,arguments)},e._sqlite3changegroup_output_strm=function(){return(e._sqlite3changegroup_output_strm=e.asm.sqlite3changegroup_output_strm).apply(null,arguments)},e._sqlite3changegroup_delete=function(){return(e._sqlite3changegroup_delete=e.asm.sqlite3changegroup_delete).apply(null,arguments)},e._sqlite3changeset_concat=function(){return(e._sqlite3changeset_concat=e.asm.sqlite3changeset_concat).apply(null,arguments)},e._sqlite3changeset_concat_strm=function(){return(e._sqlite3changeset_concat_strm=e.asm.sqlite3changeset_concat_strm).apply(null,arguments)},e._sqlite3session_config=function(){return(e._sqlite3session_config=e.asm.sqlite3session_config).apply(null,arguments)},e._sqlite3_sourceid=function(){return(e._sqlite3_sourceid=e.asm.sqlite3_sourceid).apply(null,arguments)},e._sqlite3__wasm_pstack_ptr=function(){return(e._sqlite3__wasm_pstack_ptr=e.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},e._sqlite3__wasm_pstack_restore=function(){return(e._sqlite3__wasm_pstack_restore=e.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},e._sqlite3__wasm_pstack_alloc=function(){return(e._sqlite3__wasm_pstack_alloc=e.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},e._sqlite3__wasm_pstack_remaining=function(){return(e._sqlite3__wasm_pstack_remaining=e.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},e._sqlite3__wasm_pstack_quota=function(){return(e._sqlite3__wasm_pstack_quota=e.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},e._sqlite3__wasm_db_error=function(){return(e._sqlite3__wasm_db_error=e.asm.sqlite3__wasm_db_error).apply(null,arguments)},e._sqlite3__wasm_test_struct=function(){return(e._sqlite3__wasm_test_struct=e.asm.sqlite3__wasm_test_struct).apply(null,arguments)},e._sqlite3__wasm_enum_json=function(){return(e._sqlite3__wasm_enum_json=e.asm.sqlite3__wasm_enum_json).apply(null,arguments)},e._sqlite3__wasm_vfs_unlink=function(){return(e._sqlite3__wasm_vfs_unlink=e.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},e._sqlite3__wasm_db_vfs=function(){return(e._sqlite3__wasm_db_vfs=e.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},e._sqlite3__wasm_db_reset=function(){return(e._sqlite3__wasm_db_reset=e.asm.sqlite3__wasm_db_reset).apply(null,arguments)},e._sqlite3__wasm_db_export_chunked=function(){return(e._sqlite3__wasm_db_export_chunked=e.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},e._sqlite3__wasm_db_serialize=function(){return(e._sqlite3__wasm_db_serialize=e.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},e._sqlite3__wasm_vfs_create_file=function(){return(e._sqlite3__wasm_vfs_create_file=e.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},e._sqlite3__wasm_posix_create_file=function(){return(e._sqlite3__wasm_posix_create_file=e.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},e._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(e._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},e._sqlite3__wasm_kvvfs_methods=function(){return(e._sqlite3__wasm_kvvfs_methods=e.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},e._sqlite3__wasm_vtab_config=function(){return(e._sqlite3__wasm_vtab_config=e.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},e._sqlite3__wasm_db_config_ip=function(){return(e._sqlite3__wasm_db_config_ip=e.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},e._sqlite3__wasm_db_config_pii=function(){return(e._sqlite3__wasm_db_config_pii=e.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},e._sqlite3__wasm_db_config_s=function(){return(e._sqlite3__wasm_db_config_s=e.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},e._sqlite3__wasm_config_i=function(){return(e._sqlite3__wasm_config_i=e.asm.sqlite3__wasm_config_i).apply(null,arguments)},e._sqlite3__wasm_config_ii=function(){return(e._sqlite3__wasm_config_ii=e.asm.sqlite3__wasm_config_ii).apply(null,arguments)},e._sqlite3__wasm_config_j=function(){return(e._sqlite3__wasm_config_j=e.asm.sqlite3__wasm_config_j).apply(null,arguments)},e._sqlite3__wasm_qfmt_token=function(){return(e._sqlite3__wasm_qfmt_token=e.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},e._sqlite3__wasm_init_wasmfs=function(){return(e._sqlite3__wasm_init_wasmfs=e.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},e._sqlite3__wasm_test_intptr=function(){return(e._sqlite3__wasm_test_intptr=e.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},e._sqlite3__wasm_test_voidptr=function(){return(e._sqlite3__wasm_test_voidptr=e.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},e._sqlite3__wasm_test_int64_max=function(){return(e._sqlite3__wasm_test_int64_max=e.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},e._sqlite3__wasm_test_int64_min=function(){return(e._sqlite3__wasm_test_int64_min=e.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},e._sqlite3__wasm_test_int64_times2=function(){return(e._sqlite3__wasm_test_int64_times2=e.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},e._sqlite3__wasm_test_int64_minmax=function(){return(e._sqlite3__wasm_test_int64_minmax=e.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},e._sqlite3__wasm_test_int64ptr=function(){return(e._sqlite3__wasm_test_int64ptr=e.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},e._sqlite3__wasm_test_stack_overflow=function(){return(e._sqlite3__wasm_test_stack_overflow=e.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},e._sqlite3__wasm_test_str_hello=function(){return(e._sqlite3__wasm_test_str_hello=e.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},e._sqlite3__wasm_SQLTester_strglob=function(){return(e._sqlite3__wasm_SQLTester_strglob=e.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var fn=e._malloc=function(){return(fn=e._malloc=e.asm.malloc).apply(null,arguments)};e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e._realloc=function(){return(e._realloc=e.asm.realloc).apply(null,arguments)};var dn=e._emscripten_builtin_memalign=function(){return(dn=e._emscripten_builtin_memalign=e.asm.emscripten_builtin_memalign).apply(null,arguments)};e.stackSave=function(){return(e.stackSave=e.asm.stackSave).apply(null,arguments)},e.stackRestore=function(){return(e.stackRestore=e.asm.stackRestore).apply(null,arguments)},e.stackAlloc=function(){return(e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},e.wasmMemory=Je;var At;gt=function n(){At||pn(),At||(gt=n)};function pn(n){if(lt>0||(jn(),lt>0))return;function t(){At||(At=!0,e.calledRun=!0,!Ze&&(Bn(),L(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Un()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return pn(),e.postRun||(e.postRun=[]),e.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function t(s=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof n<"u"&&n.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof r[l]=="function"&&(r[l]=r[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const i=Object.create(null),a=Object.create(null),d=l=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(l)||"Unknown result code #"+l,g=l=>typeof l=="number"&&l===(l|0);class D extends Error{constructor(...u){let y;if(u.length)if(g(u[0]))if(y=u[0],u.length===1)super(d(u[0]));else{const b=d(y);typeof u[1]=="object"?super(b,u[1]):(u[0]=b+":",super(u.join(" ")))}else u.length===2&&typeof u[1]=="object"?super(...u):super(u.join(" "));this.resultCode=y||i.SQLITE_ERROR,this.name="SQLite3Error"}}D.toss=(...l)=>{throw new D(...l)};const R=D.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&R("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const U=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,X=function l(u){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),u>=l._min&&u<=l._max},I=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,k=function l(u){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),u>=l._min&&u<=l._max},M=l=>l&&l.constructor&&U(l.constructor.BYTES_PER_ELEMENT)?l:!1,q=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,x=l=>l.buffer instanceof q,F=(l,u,y)=>x(l)?l.slice(u,y):l.subarray(u,y),O=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),N=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),A=l=>O(l)||R("Value is not of a supported TypedArray type."),j=new TextDecoder("utf-8"),K=function(l,u,y){return j.decode(F(l,u,y))},c=function(l){return N(l)?K(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class m extends Error{constructor(...u){u.length===2&&typeof u[1]=="object"?super(...u):u.length?super(u.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}m.toss=(...l)=>{throw new m(...l)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,u,y,b,z,re,_e,he,de)=>{},sqlite3_create_function:(l,u,y,b,z,re,_e,he)=>{},sqlite3_create_window_function:(l,u,y,b,z,re,_e,he,de,pe)=>{},sqlite3_prepare_v3:(l,u,y,b,z,re)=>{},sqlite3_prepare_v2:(l,u,y,b,z)=>{},sqlite3_exec:(l,u,y,b,z)=>{},sqlite3_randomness:(l,u)=>{}});const w={affirmBindableTypedArray:A,flexibleString:c,bigIntFits32:I,bigIntFits64:X,bigIntFitsDouble:k,isBindableTypedArray:O,isInt32:U,isSQLableTypedArray:N,isTypedArray:M,typedArrayToString:K,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:x,toss:function(...l){throw new Error(l.join(" "))},toss3:R,typedArrayPart:F,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u="SQLite format 3";u.length>l.byteLength&&R("Input does not contain an SQLite3 database header.");for(let y=0;y<u.length;++y)u.charCodeAt(y)!==l[y]&&R("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u=l.byteLength;(u<512||u%512!==0)&&R("Byte array size",u,"is invalid for an SQLite3 db."),w.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||R("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||R("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),A(l);const u=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],u),u};{const l=r.allocExportName,u=r.deallocExportName,y=r.reallocExportName;for(const b of[l,u,y])a.exports[b]instanceof Function||R("Missing required exports[",b,"] function.");a.alloc=function b(z){return b.impl(z)||m.toss("Failed to allocate",z," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function b(z,re){const _e=b.impl(z,re);return re?_e||m.toss("Failed to reallocate",re," bytes."):0},a.realloc.impl=a.exports[y],a.dealloc=a.exports[u]}a.compileOptionUsed=function l(u){if(arguments.length){if(Array.isArray(u)){const y={};return u.forEach(b=>{y[b]=i.sqlite3_compileoption_used(b)}),y}else if(typeof u=="object")return Object.keys(u).forEach(y=>{u[y]=i.sqlite3_compileoption_used(y)}),u}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(_e,he){const de=l._rx.exec(_e);he[0]=de?de[1]:_e,he[1]=de?l._rxInt.test(de[2])?+de[2]:de[2]:!0});const y={},b=[0,0];let z=0,re;for(;re=i.sqlite3_compileoption_get(z++);)l._opt(re,b),y[b[0]]=b[1];return l._result=y}return typeof u=="string"?!!i.sqlite3_compileoption_used(u):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&m.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3__wasm_pstack_alloc(l)||m.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,u){typeof u=="string"&&!(u=a.sizeofIR(u))&&m.toss("Invalid size value for allocChunks(",arguments[1],")");const y=a.pstack.alloc(l*u),b=[];let z=0,re=0;for(;z<l;++z,re+=u)b.push(y+re);return b},allocPtr:(l=1,u=!0)=>l===1?a.pstack.alloc(u?8:a.ptrSizeof):a.pstack.allocChunks(l,u?8:a.ptrSizeof),call:function(l){const u=a.pstack.pointer;try{return l(h)}finally{a.pstack.restore(u)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(...l)=>{if(l.length===1&&w.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const u=l[0];if(u.byteLength===0)return a.exports.sqlite3_randomness(0,0),u;const y=a.pstack.pointer;try{let b=u.byteLength,z=0;const re=a.exports.sqlite3_randomness,_e=a.heap8u(),he=b<512?b:512,de=a.pstack.alloc(he);do{const pe=b>he?he:b;re(pe,de),u.set(F(_e,de,de+pe),z),b-=pe,z+=pe}while(b>0)}catch(b){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",b)}finally{a.pstack.restore(y)}return u}a.exports.sqlite3_randomness(...l)};let Q;if(i.sqlite3_wasmfs_opfs_dir=function(){if(Q!==void 0)return Q;const l=r.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return Q="";try{return l&&a.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?Q=l:Q=""}catch{return Q=""}},i.sqlite3_wasmfs_filename_is_persistent=function(l){const u=i.sqlite3_wasmfs_opfs_dir();return u&&l?l.startsWith(u+"/"):!1},i.sqlite3_js_db_uses_vfs=function(l,u,y=0){try{const b=i.sqlite3_vfs_find(u);return b?l?b===i.sqlite3_js_db_vfs(l,y)?b:!1:b===i.sqlite3_vfs_find(0)?b:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const l=[];let u=i.sqlite3_vfs_find(0);for(;u;){const y=new i.sqlite3_vfs(u);l.push(a.cstrToJs(y.$zName)),u=y.$pNext,y.dispose()}return l},i.sqlite3_js_db_export=function(l,u=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||R("Invalid sqlite3* argument."),a.bigIntEnabled||R("BigInt64 support is not enabled.");const y=a.scopedAllocPush();let b;try{const z=a.scopedAlloc(8+a.ptrSizeof),re=z+8,_e=u?a.isPtr(u)?u:a.scopedAllocCString(""+u):0;let he=a.exports.sqlite3__wasm_db_serialize(l,_e,re,z,0);he&&R("Database serialization failed with code",h.capi.sqlite3_js_rc_str(he)),b=a.peekPtr(re);const de=a.peek(z,"i64");return he=de?a.heap8u().slice(b,b+Number(de)):new Uint8Array,he}finally{b&&a.exports.sqlite3_free(b),a.scopedAllocPop(y)}},i.sqlite3_js_db_vfs=(l,u=0)=>w.sqlite3__wasm_db_vfs(l,u),i.sqlite3_js_aggregate_context=(l,u)=>i.sqlite3_aggregate_context(l,u)||(u?m.toss("Cannot allocate",u,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(l,u,y){let b;u&&a.isPtr(u)?b=u:u instanceof ArrayBuffer||u instanceof Uint8Array?(b=a.allocFromTypedArray(u),(arguments.length<3||!w.isInt32(y)||y<0)&&(y=u.byteLength)):D.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!w.isInt32(y)||y<0)&&D.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=w.sqlite3__wasm_posix_create_file(l,b,y);z&&D.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(z))}finally{a.dealloc(b)}},i.sqlite3_js_vfs_create_file=function(l,u,y,b){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;y?(a.isPtr(y)?z=y:y instanceof ArrayBuffer&&(y=new Uint8Array(y)),y instanceof Uint8Array?(z=a.allocFromTypedArray(y),(arguments.length<4||!w.isInt32(b)||b<0)&&(b=y.byteLength)):D.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!w.isInt32(b)||b<0)&&(a.dealloc(z),D.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const re=w.sqlite3__wasm_vfs_create_file(l,u,z,b);re&&D.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(re))}finally{a.dealloc(z)}},i.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const u=c(v);return u===v?void 0:u},w.isUIThread()){const l=function(u){const y=Object.create(null);return y.prefix="kvvfs-"+u,y.stores=[],(u==="session"||u==="")&&y.stores.push(globalThis.sessionStorage),(u==="local"||u==="")&&y.stores.push(globalThis.localStorage),y};i.sqlite3_js_kvvfs_clear=function(u=""){let y=0;const b=l(u);return b.stores.forEach(z=>{const re=[];let _e;for(_e=0;_e<z.length;++_e){const he=z.key(_e);he.startsWith(b.prefix)&&re.push(he)}re.forEach(he=>z.removeItem(he)),y+=re.length}),y},i.sqlite3_js_kvvfs_size=function(u=""){let y=0;const b=l(u);return b.stores.forEach(z=>{let re;for(re=0;re<z.length;++re){const _e=z.key(re);_e.startsWith(b.prefix)&&(y+=_e.length,y+=z.getItem(_e).length)}}),y*2}}i.sqlite3_db_config=(function(l,u,...y){switch(this.s||(this.s=a.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=a.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=a.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),u){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,u,y[0],y[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,u,y[0],y[1],y[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,u,y[0]);default:return i.SQLITE_MISUSE}}).bind(Object.create(null)),i.sqlite3_value_to_js=function(l,u=!0){let y;const b=i.sqlite3_value_type(l);switch(b){case i.SQLITE_INTEGER:a.bigIntEnabled?(y=i.sqlite3_value_int64(l),w.bigIntFitsDouble(y)&&(y=Number(y))):y=i.sqlite3_value_double(l);break;case i.SQLITE_FLOAT:y=i.sqlite3_value_double(l);break;case i.SQLITE_TEXT:y=i.sqlite3_value_text(l);break;case i.SQLITE_BLOB:{const z=i.sqlite3_value_bytes(l),re=i.sqlite3_value_blob(l);z&&!re&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),y=z?a.heap8u().slice(re,re+Number(z)):null;break}case i.SQLITE_NULL:y=null;break;default:u&&R(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",b),y=void 0}return y},i.sqlite3_values_to_js=function(l,u,y=!0){let b;const z=[];for(b=0;b<l;++b)z.push(i.sqlite3_value_to_js(a.peekPtr(u+a.ptrSizeof*b),y));return z},i.sqlite3_result_error_js=function(l,u){u instanceof m?i.sqlite3_result_error_nomem(l):i.sqlite3_result_error(l,""+u,-1)},i.sqlite3_result_js=function(l,u){if(u instanceof Error){i.sqlite3_result_error_js(l,u);return}try{switch(typeof u){case"undefined":break;case"boolean":i.sqlite3_result_int(l,u?1:0);break;case"bigint":w.bigIntFits32(u)?i.sqlite3_result_int(l,Number(u)):w.bigIntFitsDouble(u)?i.sqlite3_result_double(l,Number(u)):a.bigIntEnabled?w.bigIntFits64(u)?i.sqlite3_result_int64(l,u):R("BigInt value",u.toString(),"is too BigInt for int64."):R("BigInt value",u.toString(),"is too BigInt.");break;case"number":{let y;w.isInt32(u)?y=i.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(u)&&w.bigIntFits64(BigInt(u))?y=i.sqlite3_result_int64:y=i.sqlite3_result_double,y(l,u);break}case"string":{const[y,b]=a.allocCString(u,!0);i.sqlite3_result_text(l,y,b,i.SQLITE_WASM_DEALLOC);break}case"object":if(u===null){i.sqlite3_result_null(l);break}else if(w.isBindableTypedArray(u)){const y=a.allocFromTypedArray(u);i.sqlite3_result_blob(l,y,u.byteLength,i.SQLITE_WASM_DEALLOC);break}default:R("Don't not how to handle this UDF result value:",typeof u,u)}}catch(y){i.sqlite3_result_error_js(l,y)}},i.sqlite3_column_js=function(l,u,y=!0){const b=i.sqlite3_column_value(l,u);return b===0?void 0:i.sqlite3_value_to_js(b,y)};const _=(function(l,u,y){y=i[y],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const b=y(l,u,this.ptr);if(b)return D.toss(b,arguments[2]+"() failed with code "+b);const z=a.peekPtr(this.ptr);return z?i.sqlite3_value_to_js(z,!0):void 0}).bind(Object.create(null));i.sqlite3_preupdate_new_js=(l,u)=>_(l,u,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(l,u)=>_(l,u,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(l,u)=>_(l,u,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(l,u)=>_(l,u,"sqlite3changeset_old");const h={WasmAllocError:m,SQLite3Error:D,capi:i,util:w,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let u=t.initializersAsync;delete t.initializersAsync;const y=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),b=re=>{throw r.error("an async sqlite3 initializer failed:",re),re};if(!u||!u.length)return l.isReady=y().catch(b);u=u.map(re=>re instanceof Function?async _e=>re(h):re),u.push(y);let z=Promise.resolve(h);for(;u.length;)z=z.then(u.shift());return l.isReady=z.catch(b)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(h)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",i=t.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+c).endsWith("*")?i:void 0}};const d=function(){if(!a.memory)a.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const c=a.memory.buffer;return a.HEAP8=new Int8Array(c),a.HEAP8U=new Uint8Array(c),a.HEAP16=new Int16Array(c),a.HEAP16U=new Uint16Array(c),a.HEAP32=new Int32Array(c),a.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(a.HEAP64=new BigInt64Array(c),a.HEAP64U=new BigUint64Array(c)),a.HEAP32F=new Float32Array(c),a.HEAP64F=new Float64Array(c),a.heapSize=c.byteLength,a};t.heap8=()=>d().HEAP8,t.heap8u=()=>d().HEAP8U,t.heap16=()=>d().HEAP16,t.heap16u=()=>d().HEAP16U,t.heap32=()=>d().HEAP32,t.heap32u=()=>d().HEAP32U,t.heapForSize=function(c,m=!0){const w=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();switch(c){case Int8Array:return w.HEAP8;case Uint8Array:return w.HEAP8U;case Int16Array:return w.HEAP16;case Uint16Array:return w.HEAP16U;case Int32Array:return w.HEAP32;case Uint32Array:return w.HEAP32U;case 8:return m?w.HEAP8U:w.HEAP8;case 16:return m?w.HEAP16U:w.HEAP16;case 32:return m?w.HEAP32U:w.HEAP32;case 64:if(w.HEAP64)return m?w.HEAP64U:w.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return w.HEAP64U;if(c===globalThis.BigInt64Array)return w.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const m=t.functionTable();return c<m.length?m.get(c):void 0},t.jsFuncToWasm=function c(m,w){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,l,u){u<128?h[l](u):h[l](u%128|128,u>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const l=c._.rxJSig.exec(h);return l?l[2]:h.substr(1)},letterType:h=>c._.sigTypes[h]||s("Invalid signature letter:",h),pushSigType:(h,l)=>h.push(c._.typeCodes[c._.letterType(l)])}),typeof m=="string"){const h=w;w=m,m=h}const Q=c._.sigParams(w),_=[1,96];c._.uleb128Encode(_,"push",Q.length);for(const h of Q)c._.pushSigType(_,h);return w[0]==="v"?_.push(0):(_.push(1),c._.pushSigType(_,w[0])),c._.uleb128Encode(_,"unshift",_.length),_.unshift(0,97,115,109,1,0,0,0,1),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(_)),{e:{f:m}}).exports.f};const g=function(m,w,Q){if(Q&&!a.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof m=="string"){const u=w;w=m,m=u}(typeof w!="string"||!(m instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const _=t.functionTable(),h=_.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),_.get(l));){l=null;continue}l||(l=h,_.grow(1));try{return _.set(l,m),Q&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(u){if(!(u instanceof TypeError))throw l===h&&a.freeFuncIndexes.push(h),u}try{const u=t.jsFuncToWasm(m,w);_.set(l,u),Q&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(u){throw l===h&&a.freeFuncIndexes.push(h),u}return l};t.installFunction=(c,m)=>g(c,m,!1),t.scopedInstallFunction=(c,m)=>g(c,m,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const m=a.freeFuncIndexes,w=t.functionTable();m.push(c);const Q=w.get(c);return w.set(c,null),Q},t.peek=function(m,w="i8"){w.endsWith("*")&&(w=r);const Q=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d(),_=Array.isArray(m)?[]:void 0;let h;do{switch(_&&(m=arguments[0].shift()),w){case"i1":case"i8":h=Q.HEAP8[m>>0];break;case"i16":h=Q.HEAP16[m>>1];break;case"i32":h=Q.HEAP32[m>>2];break;case"float":case"f32":h=Q.HEAP32F[m>>2];break;case"double":case"f64":h=Number(Q.HEAP64F[m>>3]);break;case"i64":if(t.bigIntEnabled){h=BigInt(Q.HEAP64[m>>3]);break}default:s("Invalid type for peek():",w)}_&&_.push(h)}while(_&&arguments[0].length);return _||h},t.poke=function(c,m,w="i8"){w.endsWith("*")&&(w=r);const Q=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();for(const _ of Array.isArray(c)?c:[c])switch(w){case"i1":case"i8":Q.HEAP8[_>>0]=m;continue;case"i16":Q.HEAP16[_>>1]=m;continue;case"i32":Q.HEAP32[_>>2]=m;continue;case"float":case"f32":Q.HEAP32F[_>>2]=m;continue;case"double":case"f64":Q.HEAP64F[_>>3]=m;continue;case"i64":if(Q.HEAP64){Q.HEAP64[_>>3]=BigInt(m);continue}default:s("Invalid type for poke(): "+w)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,r),t.pokePtr=(c,m=0)=>t.poke(c,m,r),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,m)=>t.poke(c,m,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,m)=>t.poke(c,m,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,m)=>t.poke(c,m,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,m)=>t.poke(c,m,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,m)=>t.poke(c,m,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,m)=>t.poke(c,m,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const m=d().HEAP8U;let w=c;for(;m[w]!==0;++w);return w-c};const D=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,R=function(c,m,w){return a.utf8Decoder.decode(c.buffer instanceof D?c.slice(m,w):c.subarray(m,w))};t.cstrToJs=function(c){const m=t.cstrlen(c);return m?R(d().HEAP8U,c,c+m):m===null?m:""},t.jstrlen=function(c){if(typeof c!="string")return null;const m=c.length;let w=0;for(let Q=0;Q<m;++Q){let _=c.charCodeAt(Q);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|c.charCodeAt(++Q)&1023),_<=127?++w:_<=2047?w+=2:_<=65535?w+=3:w+=4}return w},t.jstrcpy=function(c,m,w=0,Q=-1,_=!0){if((!m||!(m instanceof Int8Array)&&!(m instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),Q<0&&(Q=m.length-w),!(Q>0)||!(w>=0))return 0;let h=0,l=c.length;const u=w,y=w+Q-(_?1:0);for(;h<l&&w<y;++h){let b=c.charCodeAt(h);if(b>=55296&&b<=57343&&(b=65536+((b&1023)<<10)|c.charCodeAt(++h)&1023),b<=127){if(w>=y)break;m[w++]=b}else if(b<=2047){if(w+1>=y)break;m[w++]=192|b>>6,m[w++]=128|b&63}else if(b<=65535){if(w+2>=y)break;m[w++]=224|b>>12,m[w++]=128|b>>6&63,m[w++]=128|b&63}else{if(w+3>=y)break;m[w++]=240|b>>18,m[w++]=128|b>>12&63,m[w++]=128|b>>6&63,m[w++]=128|b&63}}return _&&(m[w++]=0),w-u},t.cstrncpy=function(c,m,w){if((!c||!m)&&s("cstrncpy() does not accept NULL strings."),w<0)w=t.cstrlen(strPtr)+1;else if(!(w>0))return 0;const Q=t.heap8u();let _=0,h;for(;_<w&&(h=Q[m+_]);++_)Q[c+_]=h;return _<w&&(Q[c+_++]=0),_},t.jstrToUintArray=(c,m=!1)=>a.utf8Encoder.encode(m?c+"\0":c);const U=(c,m)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",m+"().")},X=function(c,m,w,Q){if(U(t,Q),typeof c!="string")return null;{const _=a.utf8Encoder.encode(c),h=w(_.length+1),l=d().HEAP8U;return l.set(_,h),l[h+_.length]=0,m?[h,_.length]:h}};t.allocCString=(c,m=!1)=>X(c,m,t.alloc,"allocCString()"),t.scopedAllocPush=function(){U(t,"scopedAllocPush");const c=[];return a.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){U(t,"scopedAllocPop");const m=arguments.length?a.scopedAlloc.indexOf(c):a.scopedAlloc.length-1;m<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=a.scopedAlloc[m]),a.scopedAlloc.splice(m,1);for(let w;w=c.pop();)t.functionEntry(w)?t.uninstallFunction(w):t.dealloc(w)},t.scopedAlloc=function(c){a.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const m=t.alloc(c);return a.scopedAlloc[a.scopedAlloc.length-1].push(m),m},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),t.scopedAllocCString=(c,m=!1)=>X(c,m,t.scopedAlloc,"scopedAllocCString()");const I=function(c,m){const w=t[c?"scopedAlloc":"alloc"]((m.length+1)*t.ptrSizeof);let Q=0;return m.forEach(_=>{t.pokePtr(w+t.ptrSizeof*Q++,t[c?"scopedAllocCString":"allocCString"](""+_))}),t.pokePtr(w+t.ptrSizeof*Q,0),w};t.scopedAllocMainArgv=c=>I(!0,c),t.allocMainArgv=c=>I(!1,c),t.cArgvToJs=(c,m)=>{const w=[];for(let Q=0;Q<c;++Q){const _=t.peekPtr(m+t.ptrSizeof*Q);w.push(_?t.cstrToJs(_):null)}return w},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const k=function(c,m,w){U(t,w);const Q=m?"i64":r;let _=t[w](c*(m?8:i));if(t.poke(_,0,Q),c===1)return _;const h=[_];for(let l=1;l<c;++l)_+=m?8:i,h[l]=_,t.poke(_,0,Q);return h};t.allocPtr=(c=1,m=!0)=>k(c,m,"alloc"),t.scopedAllocPtr=(c=1,m=!0)=>k(c,m,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||s("Cannot find exported symbol:",c)};const M=(c,m)=>s(c+"() requires",m,"argument(s).");t.xCall=function(c,...m){const w=c instanceof Function?c:t.xGet(c);return w instanceof Function||s("Exported symbol",c,"is not a function."),w.length!==m.length&&M(w===c?w.name:c,w.length),arguments.length===2&&Array.isArray(arguments[1])?w.apply(null,arguments[1]):w.apply(null,m)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const q=a.xWrap.convert.arg,x=a.xWrap.convert.result;t.bigIntEnabled&&q.set("i64",c=>BigInt(c));const F=r==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);q.set("i32",F).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",q.get("f32")).set("f64",q.get("f32")).set("double",q.get("f64")).set("int",q.get("i32")).set("null",c=>c).set(null,q.get("null")).set("**",F).set("*",F),x.set("*",F).set("pointer",F).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,x.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const m=q.get(r);for(const w of c)q.set(w+"*",m),x.set(w+"*",m),x.set(w,q.get(w)||s("Missing arg converter:",w))}const O=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?F(c):null};q.set("string",O).set("utf8",O).set("pointer",O),x.set("string",c=>t.cstrToJs(c)).set("utf8",x.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",x.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const N=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,m,w){s("AbstractArgAdapter must be subclassed.")}};q.FuncPtrAdapter=class st extends N{constructor(m){super(m),q.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",m),this.name=m.name||"unnamed",this.signature=m.signature,m.contextKey instanceof Function&&(this.contextKey=m.contextKey,m.bindScope||(m.bindScope="context")),this.bindScope=m.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),st.bindScopes.indexOf(m.bindScope)<0&&s("Invalid options.bindScope ("+m.bindMod+") for FuncPtrAdapter. Expecting one of: ("+st.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=m.callProxy instanceof Function?m.callProxy:void 0}contextKey(m,w){return this}contextMap(m){const w=this.__cmap||(this.__cmap=new Map);let Q=w.get(m);return Q===void 0&&w.set(m,Q=[]),Q}convertArg(m,w,Q){let _=this.singleton;if(!_&&this.isContext&&(_=this.contextMap(this.contextKey(w,Q))),_&&_[0]===m)return _[1];if(m instanceof Function){this.callProxy&&(m=this.callProxy(m));const h=g(m,this.signature,this.isTransient);if(st.debugFuncInstall&&st.debugOut("FuncPtrAdapter installed",this,this.contextKey(w,Q),"@"+h,m),_){if(_[1]){st.debugFuncInstall&&st.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(w,Q),"@"+_[1],m);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}}_[0]=m,_[1]=h}return h}else if(t.isPtr(m)||m===null||m===void 0){if(_&&_[1]&&_[1]!==m){st.debugFuncInstall&&st.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(w,Q),"@"+_[1],m);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}_[0]=_[1]=m|0}return m||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},q.FuncPtrAdapter.warnOnUse=!1,q.FuncPtrAdapter.debugFuncInstall=!1,q.FuncPtrAdapter.debugOut=console.debug.bind(console),q.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const A=c=>q.get(c)||s("Argument adapter not found:",c),j=c=>x.get(c)||s("Result adapter not found:",c);a.xWrap.convertArg=(c,...m)=>A(c)(...m),a.xWrap.convertArgNoCheck=(c,...m)=>q.get(c)(...m),a.xWrap.convertResult=(c,m)=>c===null?m:c?j(c)(m):void 0,a.xWrap.convertResultNoCheck=(c,m)=>c===null?m:c?x.get(c)(m):void 0,t.xWrap=function(c,m,...w){arguments.length===3&&Array.isArray(arguments[2])&&(w=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||s("Function pointer not found in WASM function table."));const Q=c instanceof Function,_=Q?c:t.xGet(c);if(Q&&(c=_.name||"unnamed function"),w.length!==_.length&&M(c,_.length),m===null&&_.length===0)return _;m!=null&&j(m);for(const l of w)l instanceof N?q.set(l,(...u)=>l.convertArg(...u)):A(l);const h=a.xWrap;return _.length===0?(...l)=>l.length?M(c,_.length):h.convertResult(m,_.call(null)):function(...l){l.length!==_.length&&M(c,_.length);const u=t.scopedAllocPush();try{let y=0;for(;y<l.length;++y)l[y]=h.convertArgNoCheck(w[y],l[y],l,y);return h.convertResultNoCheck(m,_.apply(null,l))}finally{t.scopedAllocPop(u)}}};const K=function(c,m,w,Q,_,h){if(typeof w=="string"){if(m===1)return h.get(w);if(m===2){if(Q)Q instanceof Function||s(_,"requires a function argument.");else return delete h.get(w),c;return h.set(w,Q),c}}s("Invalid arguments to",_)};return t.xWrap.resultAdapter=function c(m,w){return K(c,arguments.length,m,w,"resultAdapter()",x)},t.xWrap.argAdapter=function c(m,w){return K(c,arguments.length,m,w,"argAdapter()",q)},t.xWrap.FuncPtrAdapter=q.FuncPtrAdapter,t.xCallWrapped=function(c,m,w,...Q){return Array.isArray(arguments[3])&&(Q=arguments[3]),t.xWrap(c,m,w||[]).apply(null,Q||[])},t.xWrap.testConvertArg=a.xWrap.convertArg,t.xWrap.testConvertResult=a.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const s=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,i=function(d){if(t.wasmUtilTarget){const g=(...R)=>{throw new Error(R.join(" "))},D=t.wasmUtilTarget;if(D.module=d.module,D.instance=d.instance,D.instance.exports.memory||(D.memory=t.imports&&t.imports.env&&t.imports.env.memory||g("Missing 'memory' object!")),!D.alloc&&d.instance.exports.malloc){const R=d.instance.exports;D.alloc=function(U){return R.malloc(U)||g("Allocation of",U,"bytes failed.")},D.dealloc=function(U){R.free(U)}}r(D)}return t.onload&&t.onload(d,t),d};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),t.imports||{}).then(i)}:function(){return s().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,t.imports||{})).then(i)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(s){const r=(...f)=>{throw new Error(f.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(f){s[f]instanceof Function||r("Config option '"+f+"' must be a function.")});const i=t,a=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),d=s.alloc,g=s.dealloc,D=s.log||console.log.bind(console),R=s.memberPrefix||"",U=s.memberSuffix||"",X=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,I=globalThis.BigInt,k=globalThis.BigInt64Array,M=s.ptrSizeof||4,q=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(f=null){f&&f.__flags&&(f=f.__flags);const S=function T(C){return arguments.length===0?T.__flags:(C<0?(delete T.__flags.getter,delete T.__flags.setter,delete T.__flags.alloc,delete T.__flags.dealloc):(T.__flags.getter=(1&C)!==0,T.__flags.setter=(2&C)!==0,T.__flags.alloc=(4&C)!==0,T.__flags.dealloc=(8&C)!==0),T._flags)};return Object.defineProperty(S,"__flags",{iterable:!1,writable:!1,value:Object.create(f)}),f||S(0),S},i.debugFlags=i.__makeDebugFlags());const x=function(){const f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}(),F=f=>f[1]==="(",O=f=>f==="P",N=f=>F(f)?"p":f[0],A=function(f){switch(N(f)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return q;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",f)},j=k?()=>!0:()=>r("BigInt64Array is not available."),K=function(f){switch(N(f)){case"p":case"P":case"s":{switch(M){case 4:return"getInt32";case 8:return j()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return j()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",f)},c=function(f){switch(N(f)){case"p":case"P":case"s":{switch(M){case 4:return"setInt32";case 8:return j()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return j()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",f)},m=function(f){switch(N(f)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return j()&&I;case"p":case"P":case"s":switch(M){case 4:return Number;case 8:return j()&&I}break}r("Unhandled DataView set wrapper for signature:",f)},w=(f,S)=>f+"::"+S,Q=function(f,S){return()=>r(w(f,S),"is read-only.")},_=new WeakMap,h="(pointer-is-external)",l=function(f,S,T){if(T||(T=_.get(S)),T){if(_.delete(S),Array.isArray(S.ondispose)){let C;for(;C=S.ondispose.shift();)try{C instanceof Function?C.call(S):C instanceof Z?C.dispose():typeof C=="number"&&g(C)}catch(te){console.warn("ondispose() for",f.structName,"@",T,"threw. NOT propagating it.",te)}}else if(S.ondispose instanceof Function)try{S.ondispose()}catch(C){console.warn("ondispose() for",f.structName,"@",T,"threw. NOT propagating it.",C)}delete S.ondispose,f.debugFlags.__flags.dealloc&&D("debug.dealloc:",S[h]?"EXTERNAL":"",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+T),S[h]||g(T)}},u=f=>({configurable:!1,writable:!1,iterable:!1,value:f}),y=function(f,S,T){let C=!T;T?Object.defineProperty(S,h,u(T)):(T=d(f.structInfo.sizeof),T||r("Allocation of",f.structName,"structure failed."));try{f.debugFlags.__flags.alloc&&D("debug.alloc:",C?"":"EXTERNAL",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+T),C&&a().fill(0,T,T+f.structInfo.sizeof),_.set(S,T)}catch(te){throw l(f,S,T),te}},b=function(){const f=this.pointer;return f?new Uint8Array(a().slice(f,f+this.structInfo.sizeof)):null},re=u(f=>R+f+U),_e=function(f,S,T=!0){let C=f.members[S];if(!C&&(R||U)){for(const te of Object.values(f.members))if(te.key===S){C=te;break}!C&&T&&r(w(f.name,S),"is not a mapped struct member.")}return C},he=function f(S,T,C=!1){f._||(f._=ue=>ue.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const te=_e(S.structInfo,T,!0);return C?f._(te.signature):te.signature},de={configurable:!1,enumerable:!1,get:function(){return _.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},pe=u(function(){const f=[];for(const S of Object.keys(this.structInfo.members))f.push(this.memberKey(S));return f}),be=new TextDecoder("utf-8"),Ee=new TextEncoder,ke=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ie=function(f,S,T){return be.decode(f.buffer instanceof ke?f.slice(S,T):f.subarray(S,T))},ze=function(f,S,T=!1){const C=_e(f.structInfo,S,T);return C&&C.signature.length===1&&C.signature[0]==="s"?C:!1},Le=function(f){f.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(f))},P=function(S,T){const C=_e(S.structInfo,T,!0);Le(C);const te=S[C.key];if(!te)return null;let ue=te;const ge=a();for(;ge[ue]!==0;++ue);return te===ue?"":Ie(ge,te,ue)},B=function(f,...S){f.ondispose?Array.isArray(f.ondispose)||(f.ondispose=[f.ondispose]):f.ondispose=[],f.ondispose.push(...S)},W=function(f){const S=Ee.encode(f),T=d(S.length+1);T||r("Allocation error while duplicating string:",f);const C=a();return C.set(S,T),C[T+S.length]=0,T},ne=function(f,S,T){const C=_e(f.structInfo,S,!0);Le(C);const te=W(T);return f[C.key]=te,B(f,te),f},Z=function(S,T){arguments[2]!==u&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(S),structInfo:u(T)})};Z.prototype=Object.create(null,{dispose:u(function(){l(this.constructor,this)}),lookupMember:u(function(f,S=!0){return _e(this.structInfo,f,S)}),memberToJsString:u(function(f){return P(this,f)}),memberIsString:u(function(f,S=!0){return ze(this,f,S)}),memberKey:re,memberKeys:pe,memberSignature:u(function(f,S=!1){return he(this,f,S)}),memoryDump:u(b),pointer:de,setMemberCString:u(function(f,S){return ne(this,f,S)})}),Object.assign(Z.prototype,{addOnDispose:function(...f){return B(this,...f),this}}),Object.defineProperties(Z,{allocCString:u(W),isA:u(f=>f instanceof Z),hasExternalPointer:u(f=>f instanceof Z&&!!f[h]),memberKey:re});const ie=f=>Number.isFinite(f)||f instanceof(I||Number),G=function f(S,T,C){if(!f._){f._={getters:{},setters:{},sw:{}};const He=["i","c","C","p","P","s","f","d","v()"];X&&He.push("j"),He.forEach(function(et){f._.getters[et]=K(et),f._.setters[et]=c(et),f._.sw[et]=m(et)});const Hr=/^[ipPsjfdcC]$/,Vr=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(et,Gr,mn,Ct){Object.prototype.hasOwnProperty.call(et,mn)&&r(et.structName,"already has a property named",mn+"."),Hr.test(Ct)||Vr.test(Ct)||r("Malformed signature for",w(et.structName,Gr)+":",Ct)}}const te=S.memberKey(T);f.sigCheck(S.prototype,T,te,C.signature),C.key=te,C.name=T;const ue=N(C.signature),ge=w(S.prototype.structName,te),Se=S.prototype.debugFlags.__flags,Ke=Object.create(null);Ke.configurable=!1,Ke.enumerable=!1,Ke.get=function(){Se.getter&&D("debug.getter:",f._.getters[ue],"for",A(ue),ge,"@",this.pointer,"+",C.offset,"sz",C.sizeof);let He=new DataView(a().buffer,this.pointer+C.offset,C.sizeof)[f._.getters[ue]](0,x);return Se.getter&&D("debug.getter:",ge,"result =",He),He},C.readOnly?Ke.set=Q(S.prototype.structName,te):Ke.set=function(He){if(Se.setter&&D("debug.setter:",f._.setters[ue],"for",A(ue),ge,"@",this.pointer,"+",C.offset,"sz",C.sizeof,He),this.pointer||r("Cannot set struct property on disposed instance."),He===null)He=0;else for(;!ie(He);){if(O(C.signature)&&He instanceof Z){He=He.pointer||0,Se.setter&&D("debug.setter:",ge,"resolved to",He);break}r("Invalid value for pointer-type",ge+".")}new DataView(a().buffer,this.pointer+C.offset,C.sizeof)[f._.setters[ue]](0,f._.sw[ue](He),x)},Object.defineProperty(S.prototype,te,Ke)},p=function f(S,T){arguments.length===1?(T=S,S=T.name):T.name||(T.name=S),S||r("Struct name is required.");let C=!1;Object.keys(T.members).forEach(ge=>{const Se=T.members[ge];Se.sizeof?Se.sizeof===1?Se.signature==="c"||Se.signature==="C"||r("Unexpected sizeof==1 member",w(T.name,ge),"with signature",Se.signature):(Se.sizeof%4!==0&&(console.warn("Invalid struct member description =",Se,"from",T),r(S,"member",ge,"sizeof is not aligned. sizeof="+Se.sizeof)),Se.offset%4!==0&&(console.warn("Invalid struct member description =",Se,"from",T),r(S,"member",ge,"offset is not aligned. offset="+Se.offset))):r(S,"member",ge,"is missing sizeof."),(!C||C.offset<Se.offset)&&(C=Se)}),C?T.sizeof<C.offset+C.sizeof&&r("Invalid struct config:",S,"max member offset ("+C.offset+") ","extends past end of struct (sizeof="+T.sizeof+")."):r("No member property descriptions found.");const te=u(i.__makeDebugFlags(f.debugFlags)),ue=function ge(Se){this instanceof ge?arguments.length?((Se!==(Se|0)||Se<=0)&&r("Invalid pointer value for",S,"constructor."),y(ge,this,Se)):y(ge,this):r("The",S,"constructor may only be called via 'new'.")};return Object.defineProperties(ue,{debugFlags:te,isA:u(ge=>ge instanceof ue),memberKey:re,memberKeys:pe,methodInfoForKey:u(function(ge){}),structInfo:u(T),structName:u(S)}),ue.prototype=new Z(S,T,u),Object.defineProperties(ue.prototype,{debugFlags:te,constructor:u(ue)}),Object.keys(T.members).forEach(ge=>G(ue,ge,T.members[ge])),ue};return p.StructType=Z,p.config=s,p.allocCString=W,p.debugFlags||(p.debugFlags=i.__makeDebugFlags(i.debugFlags)),p},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(...q)=>{throw new Error(q.join(" "))};t.SQLite3Error.toss;const r=t.capi,i=t.wasm,a=t.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(q,x)=>q[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:q=>{let x;return(F,O,N,A)=>{try{const j=i.cArgvToJs(O,N);return x||(x=i.cArgvToJs(O,A)),q(j,x)|0}catch(j){return j.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(q,x)=>q[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(q,x)=>q[0],callProxy:q=>(x,F,O,N,A,j)=>{try{return O=O&&i.cstrToJs(O),N=N&&i.cstrToJs(N),A=A&&i.cstrToJs(A),j=j&&i.cstrToJs(j),q(x,F,O,N,A,j)||0}catch(K){return K.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(q,x)=>q[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(q,x)=>q[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:q=>q[0],callProxy:q=>(x,F,O,N,A,j,K)=>{q(x,F,O,i.cstrToJs(N),i.cstrToJs(A),j,K)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:q=>q[0],callProxy:q=>(x,F,O,N,A)=>{q(x,F,i.cstrToJs(O),i.cstrToJs(N),A)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const q={signature:"i(ps)",callProxy:x=>(F,O)=>{try{return x(F,i.cstrToJs(O))|0}catch(N){return N.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...q,contextKey:(x,F)=>x[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const q=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",A=>q(a.flexibleString(A))),i.xWrap.argAdapter("string:static",(function(A){return i.isPtr(A)?A:(A=""+A,this[A]||(this[A]=i.allocCString(A)))}).bind(Object.create(null)));const x=i.xWrap.argAdapter("*"),F=function(){};i.xWrap.argAdapter("sqlite3_filename",x)("sqlite3_context*",x)("sqlite3_value*",x)("void*",x)("sqlite3_changegroup*",x)("sqlite3_changeset_iter*",x)("sqlite3_session*",x)("sqlite3_stmt*",A=>{var j;return x(A instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.Stmt)||F)?A.pointer:A)})("sqlite3*",A=>{var j;return x(A instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.DB)||F)?A.pointer:A)})("sqlite3_index_info*",A=>x(A instanceof(r.sqlite3_index_info||F)?A.pointer:A))("sqlite3_module*",A=>x(A instanceof(r.sqlite3_module||F)?A.pointer:A))("sqlite3_vfs*",A=>typeof A=="string"?r.sqlite3_vfs_find(A)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",A):x(A instanceof(r.sqlite3_vfs||F)?A.pointer:A));const O=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",O)("sqlite3_context*",O)("sqlite3_stmt*",O)("sqlite3_value*",O)("sqlite3_vfs*",O)("void*",O),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const A of i.bindingSignatures)r[A[0]]=i.xWrap.apply(null,A);for(const A of i.bindingSignatures.wasmInternal)a[A[0]]=i.xWrap.apply(null,A);const N=function(A){return()=>s(A+"() is unavailable due to lack","of BigInt support in this build.")};for(const A of i.bindingSignatures.int64)r[A[0]]=i.bigIntEnabled?i.xWrap.apply(null,A):N(A[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){const A=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");a.sqlite3__wasm_db_error=function(j,K,c){return K instanceof t.WasmAllocError?(K=r.SQLITE_NOMEM,c=0):K instanceof Error&&(c=c||""+K,K=K.resultCode||r.SQLITE_ERROR),j?A(j,K,c):K}}else a.sqlite3__wasm_db_error=function(A,j,K){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),j}}{const q=i.xCall("sqlite3__wasm_enum_json");q||s("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(q));const x=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&x.push("serialize","session","vtab");for(const N of x)for(const A of Object.entries(i.ctype[N]))r[A[0]]=A[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const F=Object.create(null);for(const N of["resultCodes"])for(const A of Object.entries(i.ctype[N]))F[A[1]]=A[0];r.sqlite3_js_rc_str=N=>F[N];const O=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const N of i.ctype.structs)O[N.name]||(r[N.name]=t.StructBinder(N));if(r.sqlite3_index_info){for(const N of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[N]=r[N],delete r[N];r.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const d=(q,x,F)=>a.sqlite3__wasm_db_error(q,r.SQLITE_MISUSE,x+"() requires "+F+" argument"+(F===1?"":"s")+"."),g=q=>a.sqlite3__wasm_db_error(q,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),D=q=>i.xWrap.argAdapter("sqlite3*")(q),R=q=>i.isPtr(q)?i.cstrToJs(q):q,U=(function(q,x){q=D(q);let F=this.dbMap.get(q);if(x)!F&&x>0&&this.dbMap.set(q,F=Object.create(null));else return this.dbMap.delete(q),F;return F}).bind(Object.assign(Object.create(null),{dbMap:new Map}));U.addCollation=function(q,x){const F=U(q,1);F.collation||(F.collation=new Set),F.collation.add(R(x).toLowerCase())},U._addUDF=function(q,x,F,O){x=R(x).toLowerCase();let N=O.get(x);N||O.set(x,N=new Set),N.add(F<0?-1:F)},U.addFunction=function(q,x,F){const O=U(q,1);O.udf||(O.udf=new Map),this._addUDF(q,x,F,O.udf)},U.addWindowFunc=function(q,x,F){const O=U(q,1);O.wudf||(O.wudf=new Map),this._addUDF(q,x,F,O.wudf)},U.cleanup=function(q){q=D(q);const x=[q];for(const N of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const A=i.exports[N];x.length=A.length;try{r[N](...x)}catch(j){console.warn("close-time call of",N+"(",x,") threw:",j)}}const F=U(q,0);if(!F)return;if(F.collation){for(const N of F.collation)try{r.sqlite3_create_collation_v2(q,N,r.SQLITE_UTF8,0,0,0)}catch{}delete F.collation}let O;for(O=0;O<2;++O){const N=O?F.wudf:F.udf;if(!N)continue;const A=O?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const j of N){const K=j[0],c=j[1],m=[q,K,0,r.SQLITE_UTF8,0,0,0,0,0];O&&m.push(0);for(const w of c)try{m[2]=w,A.apply(null,m)}catch{}c.clear()}N.clear()}delete F.udf,delete F.wudf};{const q=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(x){if(arguments.length!==1)return d(x,"sqlite3_close_v2",1);if(x)try{U.cleanup(x)}catch{}return q(x)}}if(r.sqlite3session_table_filter){const q=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(x){if(arguments.length!==1)return d(pDb,"sqlite3session_delete",1);x&&r.sqlite3session_table_filter(x,0,0),q(x)}}{const q=(F,O)=>"argv["+O+"]:"+F[0]+":"+i.cstrToJs(F[1]).toLowerCase(),x=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:q}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:q})]);r.sqlite3_create_collation_v2=function(F,O,N,A,j,K){if(arguments.length!==6)return d(F,"sqlite3_create_collation_v2",6);if(!(N&15))N|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(N&15))return g(F);try{const c=x(F,O,N,A,j,K);return c===0&&j instanceof Function&&U.addCollation(F,O),c}catch(c){return a.sqlite3__wasm_db_error(F,c)}},r.sqlite3_create_collation=(F,O,N,A,j)=>arguments.length===5?r.sqlite3_create_collation_v2(F,O,N,A,j,0):d(F,"sqlite3_create_collation",5)}{const q=function(N,A){return N[0]+":"+(N[2]<0?-1:N[2])+":"+A+":"+i.cstrToJs(N[1]).toLowerCase()},x=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:q,callProxy:N=>(A,j,K)=>{try{N(A,...r.sqlite3_values_to_js(j,K))}catch(c){r.sqlite3_result_error_js(A,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:q,callProxy:N=>A=>{try{r.sqlite3_result_js(A,N(A))}catch(j){r.sqlite3_result_error_js(A,j)}}},xFunc:{signature:"v(pip)",contextKey:q,callProxy:N=>(A,j,K)=>{try{r.sqlite3_result_js(A,N(A,...r.sqlite3_values_to_js(j,K)))}catch(c){r.sqlite3_result_error_js(A,c)}}},xDestroy:{signature:"v(p)",contextKey:q,callProxy:N=>A=>{try{N(A)}catch(j){console.error("UDF xDestroy method threw:",j)}}}}),F=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...x.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...x.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...x.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...x.xDestroy})]),O=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...x.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...x.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...x.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...x.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...x.xDestroy})]);r.sqlite3_create_function_v2=function N(A,j,K,c,m,w,Q,_,h){if(N.length!==arguments.length)return d(A,"sqlite3_create_function_v2",N.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(A);try{const l=F(A,j,K,c,m,w,Q,_,h);return l===0&&(w instanceof Function||Q instanceof Function||_ instanceof Function||h instanceof Function)&&U.addFunction(A,j,K),l}catch(l){return console.error("sqlite3_create_function_v2() setup threw:",l),a.sqlite3__wasm_db_error(A,l,"Creation of UDF threw: "+l)}},r.sqlite3_create_function=function N(A,j,K,c,m,w,Q,_){return N.length===arguments.length?r.sqlite3_create_function_v2(A,j,K,c,m,w,Q,_,0):d(A,"sqlite3_create_function",N.length)},r.sqlite3_create_window_function=function N(A,j,K,c,m,w,Q,_,h,l){if(N.length!==arguments.length)return d(A,"sqlite3_create_window_function",N.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(A);try{const u=O(A,j,K,c,m,w,Q,_,h,l);return u===0&&(w instanceof Function||Q instanceof Function||_ instanceof Function||h instanceof Function||l instanceof Function)&&U.addWindowFunc(A,j,K),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),a.sqlite3__wasm_db_error(A,u,"Creation of UDF threw: "+u)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const q=(F,O)=>(typeof F=="string"?O=-1:a.isSQLableTypedArray(F)?(O=F.byteLength,F=a.typedArrayToString(F instanceof ArrayBuffer?new Uint8Array(F):F)):Array.isArray(F)&&(F=F.join(""),O=-1),[F,O]),x={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function F(O,N,A,j,K,c){if(F.length!==arguments.length)return d(O,"sqlite3_prepare_v3",F.length);const[m,w]=q(N,A);switch(typeof m){case"string":return x.basic(O,m,w,j,K,null);case"number":return x.full(O,m,w,j,K,c);default:return a.sqlite3__wasm_db_error(O,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function F(O,N,A,j,K){return F.length===arguments.length?r.sqlite3_prepare_v3(O,N,A,0,j,K):d(O,"sqlite3_prepare_v2",F.length)}}{const q=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),x=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function F(O,N,A,j,K){if(F.length!==arguments.length)return d(r.sqlite3_db_handle(O),"sqlite3_bind_text",F.length);if(i.isPtr(A)||A===null)return q(O,N,A,j,K);A instanceof ArrayBuffer?A=new Uint8Array(A):Array.isArray(pMem)&&(A=pMem.join(""));let c,m;try{if(a.isSQLableTypedArray(A))c=i.allocFromTypedArray(A),m=A.byteLength;else if(typeof A=="string")[c,m]=i.allocCString(A);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return q(O,N,c,m,r.SQLITE_WASM_DEALLOC)}catch(w){return i.dealloc(c),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),w)}},r.sqlite3_bind_blob=function F(O,N,A,j,K){if(F.length!==arguments.length)return d(r.sqlite3_db_handle(O),"sqlite3_bind_blob",F.length);if(i.isPtr(A)||A===null)return x(O,N,A,j,K);A instanceof ArrayBuffer?A=new Uint8Array(A):Array.isArray(A)&&(A=A.join(""));let c,m;try{if(a.isBindableTypedArray(A))c=i.allocFromTypedArray(A),m=j>=0?j:A.byteLength;else if(typeof A=="string")[c,m]=i.allocCString(A);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return x(O,N,c,m,r.SQLITE_WASM_DEALLOC)}catch(w){return i.dealloc(c),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(O),w)}}}r.sqlite3_config=function(q,...x){if(arguments.length<2)return r.SQLITE_MISUSE;switch(q){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(q,x[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(q,x[0],x[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(q,x[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const q=new Set;r.sqlite3_auto_extension=function(x){if(x instanceof Function)x=i.installFunction("i(ppp)",x);else if(arguments.length!==1||!i.isPtr(x))return r.SQLITE_MISUSE;const F=i.exports.sqlite3_auto_extension(x);return x!==arguments[0]&&(F===0?q.add(x):i.uninstallFunction(x)),F},r.sqlite3_cancel_auto_extension=function(x){return!x||arguments.length!==1||!i.isPtr(x)?0:i.exports.sqlite3_cancel_auto_extension(x)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const x of q)i.uninstallFunction(x);q.clear()}}const X=r.sqlite3_vfs_find("kvvfs");if(X)if(a.isUIThread()){const q=new r.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const x=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,F=i.pstack,O=A=>i.peek(A)===115?sessionStorage:localStorage,N={xRead:(A,j,K,c)=>{const m=F.pointer,w=i.scopedAllocPush();try{const Q=x(A,j);if(!Q)return-3;const _=i.cstrToJs(Q),h=O(A).getItem(_);if(!h)return-1;const l=h.length;if(c<=0)return l;if(c===1)return i.poke(K,0),l;const u=i.scopedAllocCString(h);return c>l+1&&(c=l+1),i.heap8u().copyWithin(K,u,u+c-1),i.poke(K+c-1,0),c-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{F.restore(m),i.scopedAllocPop(w)}},xWrite:(A,j,K)=>{const c=F.pointer;try{const m=x(A,j);if(!m)return 1;const w=i.cstrToJs(m);return O(A).setItem(w,i.cstrToJs(K)),0}catch(m){return console.error("kvstorageWrite()",m),r.SQLITE_IOERR}finally{F.restore(c)}},xDelete:(A,j)=>{const K=F.pointer;try{const c=x(A,j);return c?(O(A).removeItem(i.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),r.SQLITE_IOERR}finally{F.restore(K)}}};for(const A of Object.keys(N))q[q.memberKey(A)]=i.installFunction(q.memberSignature(A),N[A])}else r.sqlite3_vfs_unregister(X);i.xWrap.FuncPtrAdapter.warnOnUse=!0;const I=t.StructBinder,k=function q(x,F,O,N=q.installMethodArgcCheck){if(x instanceof I.StructType?!(O instanceof Function)&&!i.isPtr(O)&&s("Usage errror: expecting a Function or WASM pointer to one."):s("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,m)=>q(x,c,m,N);q.argcProxy||(q.argcProxy=function(c,m,w,Q){return function(..._){return w.length!==arguments.length&&s("Argument mismatch for",c.structInfo.name+"::"+m+": Native signature is:",Q),w.apply(this,_)}},q.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,m)=>{if(typeof c=="number")try{i.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const A=x.memberSignature(F);A.length<2&&s("Member",F,"does not have a function pointer signature:",A);const j=x.memberKey(F),K=N&&!i.isPtr(O)?q.argcProxy(x,j,O,A):O;if(i.isPtr(K))K&&!i.functionEntry(K)&&s("Pointer",K,"is not a WASM function table entry."),x[j]=K;else{const c=i.installFunction(K,x.memberSignature(F,!0));x[j]=c,(!x.ondispose||!x.ondispose.__removeFuncList)&&(x.addOnDispose("ondispose.__removeFuncList handler",q.removeFuncList),x.ondispose.__removeFuncList=[]),x.ondispose.__removeFuncList.push(j,c)}return(c,m)=>q(x,c,m,N)};k.installMethodArgcCheck=!1;const M=function(q,x,F=k.installMethodArgcCheck){const O=new Map;for(const N of Object.keys(x)){const A=x[N],j=O.get(A);if(j){const K=q.memberKey(N);q[K]=q[q.memberKey(j)]}else k(q,N,A,F),O.set(A,N)}return q};I.StructType.prototype.installMethod=function(x,F,O=k.installMethodArgcCheck){return arguments.length<3&&x&&typeof x=="object"?M(this,...arguments):k(this,...arguments)},I.StructType.prototype.installMethods=function(q,x=k.installMethodArgcCheck){return M(this,q,x)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.46.1",libVersionNumber:3046001,sourceId:"2024-08-13 09:16:08 c9c2ab54ba1f5f46360f1b4f35d849cd3f080e6fc2b6c60e91b16c63f69a1e33",downloadVersion:3460100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=(..._)=>{throw new t.SQLite3Error(..._)},r=t.capi,i=t.wasm,a=t.util,d=new WeakMap,g=new WeakMap,D=(_,h,l)=>{const u=Object.getOwnPropertyDescriptor(_,h);return u?u.value:l},R=function(_,h){return h&&(_ instanceof k&&(_=_.pointer),s(h,"sqlite3 result code",h+":",_?r.sqlite3_errmsg(_):r.sqlite3_errstr(h))),arguments[0]},U=i.installFunction("i(ippp)",(function(_,h,l,u){r.SQLITE_TRACE_STMT===_&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+h+":",i.cstrToJs(u))}).bind({counter:0})),X=Object.create(null),I=function _(...h){if(!_._name2vfs){_._name2vfs=Object.create(null);const pe=typeof importScripts=="function"?be=>s("The VFS for",be,"is only available in the main window thread."):!1;_._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:pe||(()=>"local")},_._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:pe||(()=>"session")}}const l=_.normalizeArgs(...h);let u=l.filename,y=l.vfs,b=l.flags;(typeof u!="string"&&typeof u!="number"||typeof b!="string"||y&&typeof y!="string"&&typeof y!="number")&&(t.config.error("Invalid DB ctor args",l,arguments),s("Invalid arguments for DB constructor."));let z=typeof u=="number"?i.cstrToJs(u):u;const re=_._name2vfs[z];re&&(y=re.vfs,u=z=re.filename(z));let _e,he=0;b.indexOf("c")>=0&&(he|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),b.indexOf("w")>=0&&(he|=r.SQLITE_OPEN_READWRITE),he===0&&(he|=r.SQLITE_OPEN_READONLY),he|=r.SQLITE_OPEN_EXRESCODE;const de=i.pstack.pointer;try{const pe=i.pstack.allocPtr();let be=r.sqlite3_open_v2(u,pe,he,y||0);_e=i.peekPtr(pe),R(_e,be),r.sqlite3_extended_result_codes(_e,1),b.indexOf("t")>=0&&r.sqlite3_trace_v2(_e,r.SQLITE_TRACE_STMT,U,_e)}catch(pe){throw _e&&r.sqlite3_close_v2(_e),pe}finally{i.pstack.restore(de)}this.filename=z,d.set(this,_e),g.set(this,Object.create(null));try{const pe=r.sqlite3_js_db_vfs(_e)||s("Internal error: cannot get VFS for new db handle."),be=X[pe];be&&(be instanceof Function?be(this,t):R(_e,r.sqlite3_exec(_e,be,0,0,0)))}catch(pe){throw this.close(),pe}};I.setVfsPostOpenSql=function(_,h){X[_]=h},I.normalizeArgs=function(_=":memory:",h="c",l=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=_,u.flags=h,u.vfs=l),u};const k=function(..._){I.apply(this,_)};k.dbCtorHelper=I;const M={null:1,number:2,string:3,boolean:4,blob:5};M.undefined==M.null,i.bigIntEnabled&&(M.bigint=M.number);const q=function(){M!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],d.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},x=function(_){return _.pointer||s("DB has been closed."),_},F=function(_,h){return(h!==(h|0)||h<0||h>=_.columnCount)&&s("Column index",h,"is out of range."),_},O=function(_,h){const l=Object.create(null);switch(l.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||a.isSQLableTypedArray(h[0])||Array.isArray(h[0])?l.sql=h[0]:h[0]&&typeof h[0]=="object"&&(l.opt=h[0],l.sql=l.opt.sql);break;case 2:l.sql=h[0],l.opt=h[1];break;default:s("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const u=l.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),l.returnVal=()=>u.saveSql;break;case void 0:case"this":l.returnVal=()=>_;break;default:s("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":l.cbArg=(y,b)=>{b.columnNames||(b.columnNames=y.getColumnNames([]));const z=y.get([]),re=Object.create(null);for(const _e in b.columnNames)re[b.columnNames[_e]]=z[_e];return re};break;case"array":l.cbArg=y=>y.get([]);break;case"stmt":Array.isArray(u.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=y=>y;break;default:if(a.isInt32(u.rowMode)){l.cbArg=y=>y.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const y=u.rowMode.substr(1);l.cbArg=b=>{const z=b.get(Object.create(null))[y];return z===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",y):z};break}s("Invalid rowMode:",u.rowMode)}return l},N=(_,h,l,...u)=>{const y=_.prepare(h);try{const b=y.bind(l).step()?y.get(...u):void 0;return y.reset(),b}finally{y.finalize()}},A=(_,h,l,u)=>_.exec({sql:h,bind:l,rowMode:u,returnValue:"resultRows"});k.checkRc=(_,h)=>R(_,h),k.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return x(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const _=this.pointer;if(Object.keys(g.get(this)).forEach((h,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),d.delete(this),g.delete(this),r.sqlite3_close_v2(_),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(_=!1,h=!1){const l=x(this).pointer;return _?h?r.sqlite3_total_changes64(l):r.sqlite3_total_changes(l):h?r.sqlite3_changes64(l):r.sqlite3_changes(l)},dbFilename:function(_="main"){return r.sqlite3_db_filename(x(this).pointer,_)},dbName:function(_=0){return r.sqlite3_db_name(x(this).pointer,_)},dbVfsName:function(_=0){let h;const l=r.sqlite3_js_db_vfs(x(this).pointer,_);if(l){const u=new r.sqlite3_vfs(l);try{h=i.cstrToJs(u.$zName)}finally{u.dispose()}}return h},prepare:function(_){x(this);const h=i.pstack.pointer;let l,u;try{l=i.pstack.alloc(8),k.checkRc(this,r.sqlite3_prepare_v2(this.pointer,_,-1,l,null)),u=i.peekPtr(l)}finally{i.pstack.restore(h)}u||s("Cannot prepare empty SQL.");const y=new q(this,u,M);return g.get(this)[u]=y,y},exec:function(){x(this);const _=O(this,arguments);if(!_.sql)return s("exec() requires an SQL string.");const h=_.opt,l=h.callback,u=Array.isArray(h.resultRows)?h.resultRows:void 0;let y,b=h.bind,z=!!(_.cbArg||h.columnNames||u);const re=i.scopedAllocPush(),_e=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const he=a.isSQLableTypedArray(_.sql);let de=he?_.sql.byteLength:i.jstrlen(_.sql);const pe=i.scopedAlloc(2*i.ptrSizeof+(de+1)),be=pe+i.ptrSizeof;let Ee=be+i.ptrSizeof;const ke=Ee+de;for(he?i.heap8().set(_.sql,Ee):i.jstrcpy(_.sql,i.heap8(),Ee,de,!1),i.poke(Ee+de,0);Ee&&i.peek(Ee,"i8");){i.pokePtr([pe,be],0),k.checkRc(this,r.sqlite3_prepare_v3(this.pointer,Ee,de,0,pe,be));const Ie=i.peekPtr(pe);if(Ee=i.peekPtr(be),de=ke-Ee,!!Ie){if(_e&&_e.push(r.sqlite3_sql(Ie).trim()),y=new q(this,Ie,M),b&&y.parameterCount&&(y.bind(b),b=null),z&&y.columnCount){let ze=Array.isArray(h.columnNames)?0:1;if(z=!1,_.cbArg||u){const Le=Object.create(null);for(;y.step();y._lockedByExec=!1){ze++===0&&y.getColumnNames(Le.columnNames=h.columnNames||[]),y._lockedByExec=!0;const P=_.cbArg(y,Le);if(u&&u.push(P),l&&l.call(h,P,y)===!1)break}y._lockedByExec=!1}ze===0&&y.getColumnNames(h.columnNames)}else y.step();y.reset().finalize(),y=null}}}finally{i.scopedAllocPop(re),y&&(delete y._lockedByExec,y.finalize())}return _.returnVal()},createFunction:function(h,l,u){const y=Le=>Le instanceof Function;switch(arguments.length){case 1:u=h,h=u.name,l=u.xFunc||0;break;case 2:y(l)||(u=l,l=u.xFunc||0);break}u||(u={}),typeof h!="string"&&s("Invalid arguments: missing function name.");let b=u.xStep||0,z=u.xFinal||0;const re=u.xValue||0,_e=u.xInverse||0;let he;y(l)?(he=!1,(y(b)||y(z))&&s("Ambiguous arguments: scalar or aggregate?"),b=z=null):y(b)?(y(z)||s("Missing xFinal() callback for aggregate or window UDF."),l=null):y(z)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),he===!1?(y(re)||y(_e))&&s("xValue and xInverse are not permitted for non-window UDFs."):y(re)?(y(_e)||s("xInverse must be provided if xValue is."),he=!0):y(_e)&&s("xValue must be provided if xInverse is.");const de=u.pApp;de!=null&&(typeof de!="number"||!a.isInt32(de))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const pe=u.xDestroy||0;pe&&!y(pe)&&s("xDestroy property must be a function.");let be=0;D(u,"deterministic")&&(be|=r.SQLITE_DETERMINISTIC),D(u,"directOnly")&&(be|=r.SQLITE_DIRECTONLY),D(u,"innocuous")&&(be|=r.SQLITE_INNOCUOUS),h=h.toLowerCase();const Ee=l||b,ke=D(u,"arity"),Ie=typeof ke=="number"?ke:Ee.length?Ee.length-1:0;let ze;return he?ze=r.sqlite3_create_window_function(this.pointer,h,Ie,r.SQLITE_UTF8|be,de||0,b,z,re,_e,pe):ze=r.sqlite3_create_function_v2(this.pointer,h,Ie,r.SQLITE_UTF8|be,de||0,l,b,z,pe),k.checkRc(this,ze),this},selectValue:function(_,h,l){return N(this,_,h,0,l)},selectValues:function(_,h,l){const u=this.prepare(_),y=[];try{for(u.bind(h);u.step();)y.push(u.get(0,l));u.reset()}finally{u.finalize()}return y},selectArray:function(_,h){return N(this,_,h,[])},selectObject:function(_,h){return N(this,_,h,{})},selectArrays:function(_,h){return A(this,_,h,"array")},selectObjects:function(_,h){return A(this,_,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(g.get(this)).length:0},transaction:function(_){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],_=arguments[1]),x(this).exec(h);try{const l=_(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(_){x(this).exec("SAVEPOINT oo1");try{const h=_(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(_){return R(this,_)}};const j=function(_){return _.pointer||s("Stmt has been closed."),_},K=function(_){let h=M[_==null?"null":typeof _];switch(h){case M.boolean:case M.null:case M.number:case M.string:return h;case M.bigint:if(i.bigIntEnabled)return h;default:return a.isBindableTypedArray(_)?M.blob:void 0}},c=function(_){return K(_)||s("Unsupported bind() argument type:",typeof _)},m=function(_,h){const l=typeof h=="number"?h:r.sqlite3_bind_parameter_index(_.pointer,h);return l===0||!a.isInt32(l)?s("Invalid bind() parameter name: "+h):(l<1||l>_.parameterCount)&&s("Bind index",h,"is out of range."),l},w=function(_,h){return _._lockedByExec&&s("Operation is illegal when statement is locked:",h),_},Q=function _(h,l,u,y){w(j(h),"bind()"),_._||(_._tooBigInt=z=>s("BigInt value is too big to store without precision loss:",z),_._={string:function(z,re,_e,he){const[de,pe]=i.allocCString(_e,!0);return(he?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,re,de,pe,r.SQLITE_WASM_DEALLOC)}}),c(y),l=m(h,l);let b=0;switch(y==null?M.null:u){case M.null:b=r.sqlite3_bind_null(h.pointer,l);break;case M.string:b=_._.string(h,l,y,!1);break;case M.number:{let z;a.isInt32(y)?z=r.sqlite3_bind_int:typeof y=="bigint"?a.bigIntFits64(y)?i.bigIntEnabled?z=r.sqlite3_bind_int64:a.bigIntFitsDouble(y)?(y=Number(y),z=r.sqlite3_bind_double):_._tooBigInt(y):_._tooBigInt(y):(y=Number(y),i.bigIntEnabled&&Number.isInteger(y)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),b=z(h.pointer,l,y);break}case M.boolean:b=r.sqlite3_bind_int(h.pointer,l,y?1:0);break;case M.blob:{if(typeof y=="string"){b=_._.string(h,l,y,!0);break}else y instanceof ArrayBuffer?y=new Uint8Array(y):a.isBindableTypedArray(y)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=i.alloc(y.byteLength||1);i.heap8().set(y.byteLength?y:[0],z),b=r.sqlite3_bind_blob(h.pointer,l,z,y.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",y),s("Unsupported bind() argument type: "+typeof y)}return b&&k.checkRc(h.db.pointer,b),h._mayGet=!1,h};q.prototype={finalize:function(){if(this.pointer){w(this,"finalize()");const _=r.sqlite3_finalize(this.pointer);return delete g.get(this.db)[this.pointer],d.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,_}},clearBindings:function(){return w(j(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(_){w(this,"reset()"),_&&this.clearBindings();const h=r.sqlite3_reset(j(this).pointer);return this._mayGet=!1,R(this.db,h),this},bind:function(){j(this);let _,h;switch(arguments.length){case 1:_=1,h=arguments[0];break;case 2:_=arguments[0],h=arguments[1];break;default:s("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,h===null?Q(this,_,M.null,h):Array.isArray(h)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),h.forEach((l,u)=>Q(this,u+1,c(l),l)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!a.isBindableTypedArray(h)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(l=>Q(this,l,c(h[l]),h[l])),this):Q(this,_,c(h),h)))},bindAsBlob:function(_,h){j(this),arguments.length===1&&(h=_,_=1);const l=c(h);return M.string!==l&&M.blob!==l&&M.null!==l&&s("Invalid value type for bindAsBlob()"),Q(this,_,M.blob,h)},step:function(){w(this,"step()");const _=r.sqlite3_step(j(this).pointer);switch(_){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",_,r.sqlite3_js_rc_str(_),"SQL =",r.sqlite3_sql(this.pointer)),k.checkRc(this.db.pointer,_)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const _=this.step();return this.reset(),_}finally{try{this.finalize()}catch{}}},get:function(_,h){if(j(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(_)){let l=0;const u=this.columnCount;for(;l<u;)_[l]=this.get(l++);return _}else if(_&&typeof _=="object"){let l=0;const u=this.columnCount;for(;l<u;)_[r.sqlite3_column_name(this.pointer,l)]=this.get(l++);return _}switch(F(this,_),h===void 0?r.sqlite3_column_type(this.pointer,_):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const l=r.sqlite3_column_int64(this.pointer,_);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=r.sqlite3_column_double(this.pointer,_);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,_);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,_);case r.SQLITE_BLOB:{const l=r.sqlite3_column_bytes(this.pointer,_),u=r.sqlite3_column_blob(this.pointer,_),y=new Uint8Array(l);return l&&y.set(i.heap8u().slice(u,u+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(y.buffer),y}default:s("Don't know how to translate","type of result column #"+_+".")}s("Not reached.")},getInt:function(_){return this.get(_,r.SQLITE_INTEGER)},getFloat:function(_){return this.get(_,r.SQLITE_FLOAT)},getString:function(_){return this.get(_,r.SQLITE_TEXT)},getBlob:function(_){return this.get(_,r.SQLITE_BLOB)},getJSON:function(_){const h=this.get(_,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(_){return r.sqlite3_column_name(F(j(this),_).pointer,_)},getColumnNames:function(_=[]){F(j(this),0);const h=this.columnCount;for(let l=0;l<h;++l)_.push(r.sqlite3_column_name(this.pointer,l));return _},getParamIndex:function(_){return j(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,_):void 0}};{const _={enumerable:!0,get:function(){return d.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(q.prototype,"pointer",_),Object.defineProperty(k.prototype,"pointer",_)}if(Object.defineProperty(q.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),t.oo1={DB:k,Stmt:q},a.isUIThread()){t.oo1.JsStorageDb=function(h="session"){const l=I.normalizeArgs(...arguments);h=l.filename,h!=="session"&&h!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),l.vfs="kvvfs",I.call(this,l)};const _=t.oo1.JsStorageDb;_.prototype=Object.create(k.prototype),_.clearStorage=r.sqlite3_js_kvvfs_clear,_.prototype.clearStorage=function(){return _.clearStorage(x(this).filename)},_.storageSize=r.sqlite3_js_kvvfs_size,_.prototype.storageSize=function(){return _.storageSize(x(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.util;t.initWorker1API=(function(){const r=(...I)=>{throw new Error(I.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const i=this.sqlite3||r("Missing this.sqlite3 object."),a=i.oo1.DB,d=function(I){let k=g.idMap.get(I);return k||(k="db#"+ ++g.idSeq+"@"+I.pointer,g.idMap.set(I,k),k)},g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(I){const k=new a(I);return this.dbs[d(k)]=k,this.dbList.indexOf(k)<0&&this.dbList.push(k),k},close:function(I,k){if(I){delete this.dbs[d(I)];const M=I.filename,q=s.sqlite3__wasm_db_vfs(I.pointer,0);I.close();const x=this.dbList.indexOf(I);x>=0&&this.dbList.splice(x,1),k&&M&&q&&s.sqlite3__wasm_vfs_unlink(q,M)}},post:function(I,k){k&&k.length?(globalThis.postMessage(I,Array.from(k)),k.length=0):globalThis.postMessage(I)},dbs:Object.create(null),getDb:function(I,k=!0){return this.dbs[I]||(k?r("Unknown (or closed) DB ID:",I):void 0)}},D=function(I=g.dbList[0]){return I&&I.pointer?I:r("DB is not opened.")},R=function(I,k=!0){const M=g.getDb(I.dbId,!1)||g.dbList[0];return k?D(M):M},U=function(){return g.dbList[0]&&d(g.dbList[0])},X={open:function(I){const k=Object.create(null),M=I.args||Object.create(null);M.simulateError&&r("Throwing because of simulateError flag.");const q=Object.create(null);k.vfs=M.vfs,k.filename=M.filename||"";const x=g.open(k);return q.filename=x.filename,q.persistent=!!i.capi.sqlite3_js_db_uses_vfs(x.pointer,"opfs"),q.dbId=d(x),q.vfs=x.dbVfsName(),q},close:function(I){const k=R(I,!1),M={filename:k&&k.filename};if(k){const q=I.args&&typeof I.args=="object"?!!I.args.unlink:!1;g.close(k,q)}return M},exec:function(I){const k=typeof I.args=="string"?{sql:I.args}:I.args||Object.create(null);k.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):k.sql||r("'exec' requires input SQL.");const M=R(I);(k.callback||Array.isArray(k.resultRows))&&(M._blobXfer=g.xfer);const q=k.callback;let x=0;const F=!!k.columnNames;typeof q=="string"&&(F||(k.columnNames=[]),k.callback=function(O,N){g.post({type:q,columnNames:k.columnNames,rowNumber:++x,row:O},g.xfer)});try{const O=k.countChanges?M.changes(!0,k.countChanges===64):void 0;M.exec(k),O!==void 0&&(k.changeCount=M.changes(!0,k.countChanges===64)-O),k.callback instanceof Function&&(k.callback=q,g.post({type:q,columnNames:k.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,k.callback&&(k.callback=q)}return k},"config-get":function(){const I=Object.create(null),k=i.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(k,M)&&(I[M]=k[M])}),I.version=i.version,I.vfsList=i.capi.sqlite3_js_vfs_list(),I.opfsEnabled=!!i.opfs,I},export:function(I){const k=R(I),M={byteArray:i.capi.sqlite3_js_db_export(k.pointer),filename:k.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(M.byteArray.buffer),M},toss:function(I){r("Testing worker exception")},"opfs-tree":async function(I){return i.opfs||r("OPFS support is unavailable."),await i.opfs.treeList()}};globalThis.onmessage=async function(I){I=I.data;let k,M=I.dbId,q=I.type;const x=performance.now();try{X.hasOwnProperty(q)&&X[q]instanceof Function?k=await X[q](I):r("Unknown db worker message type:",I.type)}catch(F){q="error",k={operation:I.type,message:F.message,errorClass:F.name,input:I},F.stack&&(k.stack=typeof F.stack=="string"?F.stack.split(/\n\s*/):F.stack)}M||(M=k.dbId||U()),g.post({type:q,dbId:M,messageId:I.messageId,workerReceivedTime:x,workerRespondTime:performance.now(),departureTime:I.departureTime,result:k},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,a=Object.create(null);t.vfs=a,r.sqlite3_vfs.prototype.registerVfs=function(d=!1){this instanceof t.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const g=r.sqlite3_vfs_register(this,d?1:0);return g&&i("sqlite3_vfs_register(",this,") failed with rc",g),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(d){let g=0;const D=["io","vfs"];for(const R of D){const U=d[R];U&&(++g,U.struct.installMethods(U.methods,!!U.applyArgcCheck),R==="vfs"&&(!U.struct.$zName&&typeof U.name=="string"&&U.struct.addOnDispose(U.struct.$zName=s.allocCString(U.name)),U.struct.registerVfs(!!U.asDefault)))}return g||i("Misuse: installVfs() options object requires at least","one of:",D),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=t.wasm,r=t.capi,i=t.util.toss3,a=Object.create(null);t.vtab=a;const d=r.sqlite3_index_info;d.prototype.nthConstraint=function(R,U=!1){if(R<0||R>=this.$nConstraint)return!1;const X=this.$aConstraint+d.sqlite3_index_constraint.structInfo.sizeof*R;return U?X:new d.sqlite3_index_constraint(X)},d.prototype.nthConstraintUsage=function(R,U=!1){if(R<0||R>=this.$nConstraint)return!1;const X=this.$aConstraintUsage+d.sqlite3_index_constraint_usage.structInfo.sizeof*R;return U?X:new d.sqlite3_index_constraint_usage(X)},d.prototype.nthOrderBy=function(R,U=!1){if(R<0||R>=this.$nOrderBy)return!1;const X=this.$aOrderBy+d.sqlite3_index_orderby.structInfo.sizeof*R;return U?X:new d.sqlite3_index_orderby(X)};const g=function(R,U){return(function(X,I=!1){if(arguments.length===0&&(X=new U),X instanceof U)return this.set(X.pointer,X),X;s.isPtr(X)||t.SQLite3Error.toss("Invalid argument to",R+"()");let k=this.get(X);return I&&this.delete(X),k}).bind(new Map)},D=function(R,U){const X=g(R,U);return Object.assign(Object.create(null),{StructType:U,create:I=>{const k=X();return s.pokePtr(I,k.pointer),k},get:I=>X(I),unget:I=>X(I,!0),dispose:I=>{const k=X(I,!0);k&&k.dispose()}})};a.xVtab=D("xVtab",r.sqlite3_vtab),a.xCursor=D("xCursor",r.sqlite3_vtab_cursor),a.xIndexInfo=R=>new r.sqlite3_index_info(R),a.xError=function R(U,X,I){if(R.errorReporter instanceof Function)try{R.errorReporter("sqlite3_module::"+U+"(): "+X.message)}catch{}let k;return X instanceof t.WasmAllocError?k=r.SQLITE_NOMEM:arguments.length>2?k=I:X instanceof t.SQLite3Error&&(k=X.resultCode),k||r.SQLITE_ERROR},a.xError.errorReporter=console.error.bind(console),a.xRowid=(R,U)=>s.poke(R,U,"i64"),a.setupModule=function(R){let U=!1;const X=this instanceof r.sqlite3_module?this:R.struct||(U=new r.sqlite3_module);try{const I=R.methods||i("Missing 'methods' object.");for(const k of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const M=k[0],q=k[1];I[M]===!0?I[M]=I[q]:I[q]===!0&&(I[q]=I[M])}if(R.catchExceptions){const k=function(x,F){return["xConnect","xCreate"].indexOf(x)>=0?function(O,N,A,j,K,c){try{return F(...arguments)||0}catch(m){return m instanceof t.WasmAllocError||(s.dealloc(s.peekPtr(c)),s.pokePtr(c,s.allocCString(m.message))),a.xError(x,m)}}:function(...O){try{return F(...O)||0}catch(N){return a.xError(x,N)}}},M=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],q=Object.create(null);for(const x of M){const F=I[x];if(F instanceof Function)x==="xConnect"&&I.xCreate===F?q[x]=I.xCreate:x==="xCreate"&&I.xConnect===F?q[x]=I.xConnect:q[x]=k(x,F);else continue}X.installMethods(q,!1)}else X.installMethods(I,!!R.applyArgcCheck);if(X.$iVersion===0){let k;typeof R.iVersion=="number"?k=R.iVersion:X.$xShadowName?k=3:X.$xSavePoint||X.$xRelease||X.$xRollbackTo?k=2:k=1,X.$iVersion=k}}catch(I){throw U&&U.dispose(),I}return X},r.sqlite3_module.prototype.setupModule=function(R){return a.setupModule.call(this,R)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const s=function r(i){var g;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((g=navigator==null?void 0:navigator.storage)!=null&&g.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(t):(i.verbose===void 0&&(i.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=a.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(D,R){const U=[t.config.error,t.config.warn,t.config.log],X=(P,...B)=>{i.verbose>P&&U[P]("OPFS syncer:",...B)},I=(...P)=>X(2,...P),k=(...P)=>X(1,...P),M=(...P)=>X(0,...P),q=t.util.toss,x=t.capi,F=t.util,O=t.wasm,N=x.sqlite3_vfs,A=x.sqlite3_file,j=x.sqlite3_io_methods,K=Object.create(null),c=()=>{var P;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((P=navigator==null?void 0:navigator.storage)==null?void 0:P.getDirectory)};K.metrics={dump:function(){let P,B=0,W=0,ne=0;for(P in b.opIds){const Z=z[P];B+=Z.count,W+=Z.time,ne+=Z.wait,Z.avgTime=Z.count&&Z.time?Z.time/Z.count:0,Z.avgWait=Z.count&&Z.wait?Z.wait/Z.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",z,`
Total of`,B,"op(s) for",W,"ms (incl. "+ne+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",z.s11n),l.postMessage({type:"opfs-async-metrics"})},reset:function(){let P;const B=ne=>ne.count=ne.time=ne.wait=0;for(P in b.opIds)B(z[P]=Object.create(null));let W=z.s11n=Object.create(null);W=W.serialize=Object.create(null),W.count=W.time=0,W=z.s11n.deserialize=Object.create(null),W.count=W.time=0}};const m=new j,w=new N().addOnDispose(()=>m.dispose());let Q;const _=P=>(Q=!0,w.dispose(),R(P)),h=()=>(Q=!1,D(t)),l=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-D34PESGD.js",self.location.href));setTimeout(()=>{Q===void 0&&_(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),l._originalOnError=l.onerror,l.onerror=function(P){M("Error initializing OPFS asyncer:",P),_(new Error("Loading OPFS async Worker failed for unknown reasons."))};const u=x.sqlite3_vfs_find(null),y=u?new N(u):null;m.$iVersion=1,w.$iVersion=2,w.$szOsFile=x.sqlite3_file.structInfo.sizeof,w.$mxPathname=1024,w.$zName=O.allocCString("opfs"),w.$xDlOpen=w.$xDlError=w.$xDlSym=w.$xDlClose=null,w.addOnDispose("$zName",w.$zName,"cleanup default VFS wrapper",()=>y?y.dispose():null);const b=Object.create(null);b.verbose=i.verbose,b.littleEndian=(()=>{const P=new ArrayBuffer(2);return new DataView(P).setInt16(0,256,!0),new Int16Array(P)[0]===256})(),b.asyncIdleWaitTime=150,b.asyncS11nExceptions=1,b.fileBufferSize=1024*64,b.sabS11nOffset=b.fileBufferSize,b.sabS11nSize=w.$mxPathname*2,b.sabIO=new SharedArrayBuffer(b.fileBufferSize+b.sabS11nSize),b.opIds=Object.create(null);const z=Object.create(null);{let P=0;b.opIds.whichOp=P++,b.opIds.rc=P++,b.opIds.xAccess=P++,b.opIds.xClose=P++,b.opIds.xDelete=P++,b.opIds.xDeleteNoWait=P++,b.opIds.xFileSize=P++,b.opIds.xLock=P++,b.opIds.xOpen=P++,b.opIds.xRead=P++,b.opIds.xSleep=P++,b.opIds.xSync=P++,b.opIds.xTruncate=P++,b.opIds.xUnlock=P++,b.opIds.xWrite=P++,b.opIds.mkdir=P++,b.opIds["opfs-async-metrics"]=P++,b.opIds["opfs-async-shutdown"]=P++,b.opIds.retry=P++,b.sabOP=new SharedArrayBuffer(P*4),K.metrics.reset()}b.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(P=>{(b.sq3Codes[P]=x[P])===void 0&&q("Maintenance required: not found:",P)}),b.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const re=(P,...B)=>{const W=b.opIds[P]||q("Invalid op ID:",P);b.s11n.serialize(...B),Atomics.store(b.sabOPView,b.opIds.rc,-1),Atomics.store(b.sabOPView,b.opIds.whichOp,W),Atomics.notify(b.sabOPView,b.opIds.whichOp);const ne=performance.now();for(;Atomics.wait(b.sabOPView,b.opIds.rc,-1)!=="not-equal";);const Z=Atomics.load(b.sabOPView,b.opIds.rc);if(z[P].wait+=performance.now()-ne,Z&&b.asyncS11nExceptions){const ie=b.s11n.deserialize();ie&&M(P+"() async error:",...ie)}return Z};K.debug={asyncShutdown:()=>{k("Shutting down OPFS async listener. The OPFS VFS will no longer work."),re("opfs-async-shutdown")},asyncRestart:()=>{k("Attempting to restart OPFS VFS async listener. Might work, might not."),l.postMessage({type:"opfs-async-restart"})}};const _e=()=>{if(b.s11n)return b.s11n;const P=new TextDecoder,B=new TextEncoder("utf-8"),W=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),ne=new DataView(b.sabIO,b.sabS11nOffset,b.sabS11nSize);b.s11n=Object.create(null);const Z=Object.create(null);Z.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},Z.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},Z.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},Z.string={id:4};const ie=p=>Z[typeof p]||q("Maintenance required: this value type cannot be serialized.",p),G=p=>{switch(p){case Z.number.id:return Z.number;case Z.bigint.id:return Z.bigint;case Z.boolean.id:return Z.boolean;case Z.string.id:return Z.string;default:q("Invalid type ID:",p)}};return b.s11n.deserialize=function(p=!1){++z.s11n.deserialize.count;const f=performance.now(),S=W[0],T=S?[]:null;if(S){const C=[];let te=1,ue,ge,Se;for(ue=0;ue<S;++ue,++te)C.push(G(W[te]));for(ue=0;ue<S;++ue){const Ke=C[ue];Ke.getter?(Se=ne[Ke.getter](te,b.littleEndian),te+=Ke.size):(ge=ne.getInt32(te,b.littleEndian),te+=4,Se=P.decode(W.slice(te,te+ge)),te+=ge),T.push(Se)}}return p&&(W[0]=0),z.s11n.deserialize.time+=performance.now()-f,T},b.s11n.serialize=function(...p){const f=performance.now();if(++z.s11n.serialize.count,p.length){const S=[];let T=0,C=1;for(W[0]=p.length&255;T<p.length;++T,++C)S.push(ie(p[T])),W[C]=S[T].id;for(T=0;T<p.length;++T){const te=S[T];if(te.setter)ne[te.setter](C,p[T],b.littleEndian),C+=te.size;else{const ue=B.encode(p[T]);ne.setInt32(C,ue.byteLength,b.littleEndian),C+=4,W.set(ue,C),C+=ue.byteLength}}}else W[0]=0;z.s11n.serialize.time+=performance.now()-f},b.s11n},he=function P(B=16){P._chars||(P._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",P._n=P._chars.length);const W=[];let ne=0;for(;ne<B;++ne){const Z=Math.random()*(P._n*64)%P._n|0;W[ne]=P._chars[Z]}return W.join("")},de=Object.create(null),pe=Object.create(null);pe.op=void 0,pe.start=void 0;const be=P=>{pe.start=performance.now(),pe.op=P,++z[P].count},Ee=()=>z[pe.op].time+=performance.now()-pe.start,ke={xCheckReservedLock:function(P,B){return O.poke(B,0,"i32"),0},xClose:function(P){be("xClose");let B=0;const W=de[P];return W&&(delete de[P],B=re("xClose",P),W.sq3File&&W.sq3File.dispose()),Ee(),B},xDeviceCharacteristics:function(P){return x.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(P,B,W){return x.SQLITE_NOTFOUND},xFileSize:function(P,B){be("xFileSize");let W=re("xFileSize",P);if(W==0)try{const ne=b.s11n.deserialize()[0];O.poke(B,ne,"i64")}catch(ne){M("Unexpected error reading xFileSize() result:",ne),W=b.sq3Codes.SQLITE_IOERR}return Ee(),W},xLock:function(P,B){be("xLock");const W=de[P];let ne=0;return W.lockType?W.lockType=B:(ne=re("xLock",P,B),ne===0&&(W.lockType=B)),Ee(),ne},xRead:function(P,B,W,ne){be("xRead");const Z=de[P];let ie;try{ie=re("xRead",P,W,Number(ne)),(ie===0||x.SQLITE_IOERR_SHORT_READ===ie)&&O.heap8u().set(Z.sabView.subarray(0,W),B)}catch(G){M("xRead(",arguments,") failed:",G,Z),ie=x.SQLITE_IOERR_READ}return Ee(),ie},xSync:function(P,B){be("xSync"),++z.xSync.count;const W=re("xSync",P,B);return Ee(),W},xTruncate:function(P,B){be("xTruncate");const W=re("xTruncate",P,Number(B));return Ee(),W},xUnlock:function(P,B){be("xUnlock");const W=de[P];let ne=0;return x.SQLITE_LOCK_NONE===B&&W.lockType&&(ne=re("xUnlock",P,B)),ne===0&&(W.lockType=B),Ee(),ne},xWrite:function(P,B,W,ne){be("xWrite");const Z=de[P];let ie;try{Z.sabView.set(O.heap8u().subarray(B,B+W)),ie=re("xWrite",P,W,Number(ne))}catch(G){M("xWrite(",arguments,") failed:",G,Z),ie=x.SQLITE_IOERR_WRITE}return Ee(),ie}},Ie={xAccess:function(P,B,W,ne){be("xAccess");const Z=re("xAccess",O.cstrToJs(B));return O.poke(ne,Z?0:1,"i32"),Ee(),0},xCurrentTime:function(P,B){return O.poke(B,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(P,B){return O.poke(B,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(P,B,W){be("xDelete");const ne=re("xDelete",O.cstrToJs(B),W,!1);return Ee(),ne},xFullPathname:function(P,B,W,ne){return O.cstrncpy(ne,B,W)<W?0:x.SQLITE_CANTOPEN},xGetLastError:function(P,B,W){return k("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(B,W,ne,Z,ie){be("xOpen");let G=0;W===0?W=he():O.isPtr(W)&&(x.sqlite3_uri_boolean(W,"opfs-unlock-asap",0)&&(G|=b.opfsFlags.OPFS_UNLOCK_ASAP),x.sqlite3_uri_boolean(W,"delete-before-open",0)&&(G|=b.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),W=O.cstrToJs(W));const p=Object.create(null);p.fid=ne,p.filename=W,p.sab=new SharedArrayBuffer(b.fileBufferSize),p.flags=Z;const f=re("xOpen",ne,W,Z,G);return f||(p.readOnly&&O.poke(ie,x.SQLITE_OPEN_READONLY,"i32"),de[ne]=p,p.sabView=b.sabFileBufView,p.sq3File=new A(ne),p.sq3File.$pMethods=m.pointer,p.lockType=x.SQLITE_LOCK_NONE),Ee(),f}};y&&(w.$xRandomness=y.$xRandomness,w.$xSleep=y.$xSleep),w.$xRandomness||(Ie.xRandomness=function(P,B,W){const ne=O.heap8u();let Z=0;for(;Z<B;++Z)ne[W+Z]=Math.random()*255e3&255;return Z}),w.$xSleep||(Ie.xSleep=function(P,B){return Atomics.wait(b.sabOPView,b.opIds.xSleep,0,B),0}),K.getResolvedPath=function(P,B){const W=new URL(P,"file://irrelevant").pathname;return B?W.split("/").filter(ne=>!!ne):W},K.getDirForFilename=async function(B,W=!1){const ne=K.getResolvedPath(B,!0),Z=ne.pop();let ie=K.rootDirectory;for(const G of ne)G&&(ie=await ie.getDirectoryHandle(G,{create:!!W}));return[ie,Z]},K.mkdir=async function(P){try{return await K.getDirForFilename(P+"/filepart",!0),!0}catch{return!1}},K.entryExists=async function(P){try{const[B,W]=await K.getDirForFilename(P);return await B.getFileHandle(W),!0}catch{return!1}},K.randomFilename=he,K.treeList=async function(){const P=async function W(ne,Z){Z.name=ne.name,Z.dirs=[],Z.files=[];for await(const ie of ne.values())if(ie.kind==="directory"){const G=Object.create(null);Z.dirs.push(G),await W(ie,G)}else Z.files.push(ie.name)},B=Object.create(null);return await P(K.rootDirectory,B),B},K.rmfr=async function(){const P=K.rootDirectory,B={recurse:!0};for await(const W of P.values())P.removeEntry(W.name,B)},K.unlink=async function(P,B=!1,W=!1){try{const[ne,Z]=await K.getDirForFilename(P,!1);return await ne.removeEntry(Z,{recursive:B}),!0}catch(ne){if(W)throw new Error("unlink(",arguments[0],") failed: "+ne.message,{cause:ne});return!1}},K.traverse=async function(P){const B={recursive:!0,directory:K.rootDirectory};typeof P=="function"&&(P={callback:P}),P=Object.assign(B,P||{}),async function ne(Z,ie){for await(const G of Z.values()){if(P.callback(G,Z,ie)===!1)return!1;if(P.recursive&&G.kind==="directory"&&await ne(G,ie+1)===!1)break}}(P.directory,0)};const ze=async function(P,B){const[W,ne]=await K.getDirForFilename(P,!0);let ie=await(await W.getFileHandle(ne,{create:!0})).createSyncAccessHandle(),G=0,p,f=!1;try{for(ie.truncate(0);(p=await B())!==void 0;)p instanceof ArrayBuffer&&(p=new Uint8Array(p)),G===0&&p.byteLength>=15&&(F.affirmDbHeader(p),f=!0),ie.write(p,{at:G}),G+=p.byteLength;if((G<512||G%512!==0)&&q("Input size",G,"is not correct for an SQLite database."),!f){const S=new Uint8Array(20);ie.read(S,{at:0}),F.affirmDbHeader(S)}return ie.write(new Uint8Array([1,1]),{at:18}),G}catch(S){throw await ie.close(),ie=void 0,await W.removeEntry(ne).catch(()=>{}),S}finally{ie&&await ie.close()}};if(K.importDb=async function(P,B){if(B instanceof Function)return ze(P,B);B instanceof ArrayBuffer&&(B=new Uint8Array(B)),F.affirmIsDb(B);const W=B.byteLength,[ne,Z]=await K.getDirForFilename(P,!0);let ie,G=0;try{return ie=await(await ne.getFileHandle(Z,{create:!0})).createSyncAccessHandle(),ie.truncate(0),G=ie.write(B,{at:0}),G!=W&&q("Expected to write "+W+" bytes but wrote "+G+"."),ie.write(new Uint8Array([1,1]),{at:18}),G}catch(p){throw ie&&(await ie.close(),ie=void 0),await ne.removeEntry(Z).catch(()=>{}),p}finally{ie&&await ie.close()}},t.oo1){const P=function(...B){const W=t.oo1.DB.dbCtorHelper.normalizeArgs(...B);W.vfs=w.$zName,t.oo1.DB.dbCtorHelper.call(this,W)};P.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=P,P.importDb=K.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenSql(w.pointer,function(B,W){W.capi.sqlite3_busy_timeout(B,1e4),W.capi.sqlite3_exec(B,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Le=function(){const P=O.scopedAllocPush(),B=new A;try{const W=B.pointer,ne=x.SQLITE_OPEN_CREATE|x.SQLITE_OPEN_READWRITE|x.SQLITE_OPEN_MAIN_DB,Z=O.scopedAlloc(8),ie="/sanity/check/file"+he(8),G=O.scopedAllocCString(ie);let p;if(b.s11n.serialize("This is  string."),p=b.s11n.deserialize(),I("deserialize() says:",p),p[0]!=="This is  string."&&q("String d13n error."),Ie.xAccess(w.pointer,G,0,Z),p=O.peek(Z,"i32"),I("xAccess(",ie,") exists ?=",p),p=Ie.xOpen(w.pointer,G,W,ne,Z),I("open rc =",p,"state.sabOPView[xOpen] =",b.sabOPView[b.opIds.xOpen]),p!==0){M("open failed with code",p);return}Ie.xAccess(w.pointer,G,0,Z),p=O.peek(Z,"i32"),p||q("xAccess() failed to detect file."),p=ke.xSync(B.pointer,0),p&&q("sync failed w/ rc",p),p=ke.xTruncate(B.pointer,1024),p&&q("truncate failed w/ rc",p),O.poke(Z,0,"i64"),p=ke.xFileSize(B.pointer,Z),p&&q("xFileSize failed w/ rc",p),I("xFileSize says:",O.peek(Z,"i64")),p=ke.xWrite(B.pointer,G,10,1),p&&q("xWrite() failed!");const f=O.scopedAlloc(16);p=ke.xRead(B.pointer,f,6,2),O.poke(f+6,0);let S=O.cstrToJs(f);I("xRead() got:",S),S!=="sanity"&&q("Unexpected xRead() value."),Ie.xSleep&&(I("xSleep()ing before close()ing..."),Ie.xSleep(w.pointer,2e3),I("waking up from xSleep()")),p=ke.xClose(W),I("xClose rc =",p,"sabOPView =",b.sabOPView),I("Deleting file:",ie),Ie.xDelete(w.pointer,G,4660),Ie.xAccess(w.pointer,G,0,Z),p=O.peek(Z,"i32"),p&&q("Expecting 0 from xAccess(",ie,") after xDelete()."),k("End of OPFS sanity checks.")}finally{B.dispose(),O.scopedAllocPop(P)}};l.onmessage=function({data:P}){switch(P.type){case"opfs-unavailable":_(new Error(P.payload.join(" ")));break;case"opfs-async-loaded":l.postMessage({type:"opfs-async-init",args:b});break;case"opfs-async-inited":{if(Q===!0)break;try{t.vfs.installVfs({io:{struct:m,methods:ke},vfs:{struct:w,methods:Ie}}),b.sabOPView=new Int32Array(b.sabOP),b.sabFileBufView=new Uint8Array(b.sabIO,0,b.fileBufferSize),b.sabS11nView=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),_e(),i.sanityChecks&&(k("Running sanity checks because of opfs-sanity-check URL arg..."),Le()),c()?navigator.storage.getDirectory().then(B=>{l.onerror=l._originalOnError,delete l._originalOnError,t.opfs=K,K.rootDirectory=B,I("End of OPFS sqlite3_vfs setup.",w),h()}).catch(_):h()}catch(B){M(B),_(B)}break}default:{const B="Unexpected message from the OPFS async worker: "+JSON.stringify(P);M(B),_(new Error(B));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var de,pe,be,Ee,ke,Ie,ze,Le,P,B,W,ne,kt,ie;const s=t.util.toss,r=t.util.toss3,i=Object.create(null),a=t.capi,d=t.util,g=t.wasm,D=4096,R=512,U=4,X=8,I=R+U,k=R,M=I,q=D,x=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,F=".opaque",O=()=>Math.random().toString(36).slice(2),N=new TextDecoder,A=new TextEncoder,j=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),K=[t.config.error,t.config.warn,t.config.log];t.config.log;const c=t.config.warn;t.config.error;const m=new Map,w=G=>m.get(G),Q=(G,p)=>{p?m.set(G,p):m.delete(G)},_=new Map,h=G=>_.get(G),l=(G,p)=>{p?_.set(G,p):_.delete(G)},u={xCheckReservedLock:function(G,p){const f=h(G);return f.log("xCheckReservedLock"),f.storeErr(),g.poke32(p,1),0},xClose:function(G){const p=h(G);p.storeErr();const f=p.getOFileForS3File(G);if(f)try{p.log(`xClose ${f.path}`),p.mapS3FileToOFile(G,!1),f.sah.flush(),f.flags&a.SQLITE_OPEN_DELETEONCLOSE&&p.deletePath(f.path)}catch(S){return p.storeErr(S,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(G){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(G,p,f){return a.SQLITE_NOTFOUND},xFileSize:function(G,p){const f=h(G);f.log("xFileSize");const T=f.getOFileForS3File(G).sah.getSize()-q;return g.poke64(p,BigInt(T)),0},xLock:function(G,p){const f=h(G);f.log(`xLock ${p}`),f.storeErr();const S=f.getOFileForS3File(G);return S.lockType=p,0},xRead:function(G,p,f,S){const T=h(G);T.storeErr();const C=T.getOFileForS3File(G);T.log(`xRead ${C.path} ${f} @ ${S}`);try{const te=C.sah.read(g.heap8u().subarray(p,p+f),{at:q+Number(S)});return te<f?(g.heap8u().fill(0,p+te,p+f),a.SQLITE_IOERR_SHORT_READ):0}catch(te){return T.storeErr(te,a.SQLITE_IOERR)}},xSectorSize:function(G){return D},xSync:function(G,p){const f=h(G);f.log(`xSync ${p}`),f.storeErr();const S=f.getOFileForS3File(G);try{return S.sah.flush(),0}catch(T){return f.storeErr(T,a.SQLITE_IOERR)}},xTruncate:function(G,p){const f=h(G);f.log(`xTruncate ${p}`),f.storeErr();const S=f.getOFileForS3File(G);try{return S.sah.truncate(q+Number(p)),0}catch(T){return f.storeErr(T,a.SQLITE_IOERR)}},xUnlock:function(G,p){const f=h(G);f.log("xUnlock");const S=f.getOFileForS3File(G);return S.lockType=p,0},xWrite:function(G,p,f,S){const T=h(G);T.storeErr();const C=T.getOFileForS3File(G);T.log(`xWrite ${C.path} ${f} ${S}`);try{const te=C.sah.write(g.heap8u().subarray(p,p+f),{at:q+Number(S)});return f===te?0:s("Unknown write() failure.")}catch(te){return T.storeErr(te,a.SQLITE_IOERR)}}},y=new a.sqlite3_io_methods;y.$iVersion=1,t.vfs.installVfs({io:{struct:y,methods:u}});const b={xAccess:function(G,p,f,S){const T=w(G);T.storeErr();try{const C=T.getPath(p);g.poke32(S,T.hasFilename(C)?1:0)}catch{g.poke32(S,0)}return 0},xCurrentTime:function(G,p){return g.poke(p,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(G,p){return g.poke(p,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(G,p,f){const S=w(G);S.log(`xDelete ${g.cstrToJs(p)}`),S.storeErr();try{return S.deletePath(S.getPath(p)),0}catch(T){return S.storeErr(T),a.SQLITE_IOERR_DELETE}},xFullPathname:function(G,p,f,S){return g.cstrncpy(S,p,f)<f?0:a.SQLITE_CANTOPEN},xGetLastError:function(G,p,f){const S=w(G),T=S.popErr();if(S.log(`xGetLastError ${p} e =`,T),T){const C=g.scopedAllocPush();try{const[te,ue]=g.scopedAllocCString(T.message,!0);g.cstrncpy(f,te,p),ue>p&&g.poke8(f+p-1,0)}catch{return a.SQLITE_NOMEM}finally{g.scopedAllocPop(C)}}return T?T.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(p,f,S,T,C){const te=w(p);try{te.log(`xOpen ${g.cstrToJs(f)} ${T}`);const ue=f&&g.peek8(f)?te.getPath(f):O();let ge=te.getSAHForPath(ue);!ge&&T&a.SQLITE_OPEN_CREATE&&(te.getFileCount()<te.getCapacity()?(ge=te.nextAvailableSAH(),te.setAssociatedPath(ge,ue,T)):s("SAH pool is full. Cannot create file",ue)),ge||s("file not found:",ue);const Se={path:ue,flags:T,sah:ge};te.mapS3FileToOFile(S,Se),Se.lockType=a.SQLITE_LOCK_NONE;const Ke=new a.sqlite3_file(S);return Ke.$pMethods=y.pointer,Ke.dispose(),g.poke32(C,T),0}catch(ue){return te.storeErr(ue),a.SQLITE_CANTOPEN}}},z=function(G){t.capi.sqlite3_vfs_find(G)&&r("VFS name is already registered:",G);const p=new a.sqlite3_vfs,f=a.sqlite3_vfs_find(null),S=f?new a.sqlite3_vfs(f):null;return p.$iVersion=2,p.$szOsFile=a.sqlite3_file.structInfo.sizeof,p.$mxPathname=R,p.addOnDispose(p.$zName=g.allocCString(G),()=>Q(p.pointer,0)),S&&(p.$xRandomness=S.$xRandomness,p.$xSleep=S.$xSleep,S.dispose()),!p.$xRandomness&&!b.xRandomness&&(b.xRandomness=function(T,C,te){const ue=g.heap8u();let ge=0;for(;ge<C;++ge)ue[te+ge]=Math.random()*255e3&255;return ge}),!p.$xSleep&&!b.xSleep&&(b.xSleep=(T,C)=>0),t.vfs.installVfs({vfs:{struct:p,methods:b}}),p};class re{constructor(p=Object.create(null)){Me(this,ne);gn(this,"vfsDir");Me(this,de);Me(this,pe);Me(this,be);Me(this,Ee,new Map);Me(this,ke,new Map);Me(this,Ie,new Set);Me(this,ze,new Map);Me(this,Le,new Uint8Array(I));Me(this,P);Me(this,B);Me(this,W);Ve(this,W,p.verbosity??j.verbosity),this.vfsName=p.name||j.name,Ve(this,B,z(this.vfsName)),Q(V(this,B).pointer,this),this.vfsDir=p.directory||"."+this.vfsName,Ve(this,P,new DataView(V(this,Le).buffer,V(this,Le).byteOffset)),this.isReady=this.reset(!!(p.clearOnInit??j.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(p.initialCapacity||j.initialCapacity)})}log(...p){Ce(this,ne,kt).call(this,2,...p)}warn(...p){Ce(this,ne,kt).call(this,1,...p)}error(...p){Ce(this,ne,kt).call(this,0,...p)}getVfs(){return V(this,B)}getCapacity(){return V(this,Ee).size}getFileCount(){return V(this,ke).size}getFileNames(){const p=[],f=V(this,ke).keys();for(const S of f)p.push(S);return p}async addCapacity(p){for(let f=0;f<p;++f){const S=O(),C=await(await V(this,pe).getFileHandle(S,{create:!0})).createSyncAccessHandle();V(this,Ee).set(C,S),this.setAssociatedPath(C,"",0)}return this.getCapacity()}async reduceCapacity(p){let f=0;for(const S of Array.from(V(this,Ie))){if(f===p||this.getFileCount()===this.getCapacity())break;const T=V(this,Ee).get(S);S.close(),await V(this,pe).removeEntry(T),V(this,Ee).delete(S),V(this,Ie).delete(S),++f}return f}releaseAccessHandles(){for(const p of V(this,Ee).keys())p.close();V(this,Ee).clear(),V(this,ke).clear(),V(this,Ie).clear()}async acquireAccessHandles(p){const f=[];for await(const[S,T]of V(this,pe))T.kind==="file"&&f.push([S,T]);return Promise.all(f.map(async([S,T])=>{try{const C=await T.createSyncAccessHandle();if(V(this,Ee).set(C,S),p)C.truncate(q),this.setAssociatedPath(C,"",0);else{const te=this.getAssociatedPath(C);te?V(this,ke).set(te,C):V(this,Ie).add(C)}}catch(C){throw this.storeErr(C),this.releaseAccessHandles(),C}}))}getAssociatedPath(p){p.read(V(this,Le),{at:0});const f=V(this,P).getUint32(k);if(V(this,Le)[0]&&(f&a.SQLITE_OPEN_DELETEONCLOSE||!(f&x)))return c(`Removing file with unexpected flags ${f.toString(16)}`,V(this,Le)),this.setAssociatedPath(p,"",0),"";const S=new Uint32Array(X/4);p.read(S,{at:M});const T=this.computeDigest(V(this,Le));if(S.every((C,te)=>C===T[te])){const C=V(this,Le).findIndex(te=>te===0);return C===0&&p.truncate(q),C?N.decode(V(this,Le).subarray(0,C)):""}else return c("Disassociating file with bad digest."),this.setAssociatedPath(p,"",0),""}setAssociatedPath(p,f,S){const T=A.encodeInto(f,V(this,Le));R<=T.written+1&&s("Path too long:",f),V(this,Le).fill(0,T.written,R),V(this,P).setUint32(k,S);const C=this.computeDigest(V(this,Le));p.write(V(this,Le),{at:0}),p.write(C,{at:M}),p.flush(),f?(V(this,ke).set(f,p),V(this,Ie).delete(p)):(p.truncate(q),V(this,Ie).add(p))}computeDigest(p){let f=3735928559,S=1103547991;for(const T of p)f=31*f+T*307,S=31*S+T*307;return new Uint32Array([f>>>0,S>>>0])}async reset(p){await this.isReady;let f=await navigator.storage.getDirectory(),S;for(const T of this.vfsDir.split("/"))T&&(S=f,f=await f.getDirectoryHandle(T,{create:!0}));return Ve(this,de,f),Ve(this,be,S),Ve(this,pe,await V(this,de).getDirectoryHandle(F,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(p)}getPath(p){return g.isPtr(p)&&(p=g.cstrToJs(p)),(p instanceof URL?p:new URL(p,"file://localhost/")).pathname}deletePath(p){const f=V(this,ke).get(p);return f&&(V(this,ke).delete(p),this.setAssociatedPath(f,"",0)),!!f}storeErr(p,f){return p&&(p.sqlite3Rc=f||a.SQLITE_IOERR,this.error(p)),this.$error=p,f}popErr(){const p=this.$error;return this.$error=void 0,p}nextAvailableSAH(){const[p]=V(this,Ie).keys();return p}getOFileForS3File(p){return V(this,ze).get(p)}mapS3FileToOFile(p,f){f?(V(this,ze).set(p,f),l(p,this)):(V(this,ze).delete(p),l(p,!1))}hasFilename(p){return V(this,ke).has(p)}getSAHForPath(p){return V(this,ke).get(p)}async removeVfs(){if(!V(this,B).pointer||!V(this,pe))return!1;a.sqlite3_vfs_unregister(V(this,B).pointer),V(this,B).dispose();try{this.releaseAccessHandles(),await V(this,de).removeEntry(F,{recursive:!0}),Ve(this,pe,void 0),await V(this,be).removeEntry(V(this,de).name,{recursive:!0}),Ve(this,de,Ve(this,be,void 0))}catch(p){t.config.error(this.vfsName,"removeVfs() failed:",p)}return!0}exportFile(p){const f=V(this,ke).get(p)||s("File not found:",p),S=f.getSize()-q,T=new Uint8Array(S>0?S:0);if(S>0){const C=f.read(T,{at:q});C!=S&&s("Expected to read "+S+" bytes but read "+C+".")}return T}async importDbChunked(p,f){const S=V(this,ke).get(p)||this.nextAvailableSAH()||s("No available handles to import to.");S.truncate(0);let T=0,C,te=!1;try{for(;(C=await f())!==void 0;)C instanceof ArrayBuffer&&(C=new Uint8Array(C)),T===0&&C.byteLength>=15&&(d.affirmDbHeader(C),te=!0),S.write(C,{at:q+T}),T+=C.byteLength;if((T<512||T%512!==0)&&s("Input size",T,"is not correct for an SQLite database."),!te){const ue=new Uint8Array(20);S.read(ue,{at:0}),d.affirmDbHeader(ue)}S.write(new Uint8Array([1,1]),{at:q+18})}catch(ue){throw this.setAssociatedPath(S,"",0),ue}return this.setAssociatedPath(S,p,a.SQLITE_OPEN_MAIN_DB),T}importDb(p,f){if(f instanceof ArrayBuffer)f=new Uint8Array(f);else if(f instanceof Function)return this.importDbChunked(p,f);const S=V(this,ke).get(p)||this.nextAvailableSAH()||s("No available handles to import to."),T=f.byteLength;(T<512||T%512!=0)&&s("Byte array size is invalid for an SQLite db.");const C="SQLite format 3";for(let ue=0;ue<C.length;++ue)C.charCodeAt(ue)!==f[ue]&&s("Input does not contain an SQLite database header.");const te=S.write(f,{at:q});return te!=T?(this.setAssociatedPath(S,"",0),s("Expected to write "+T+" bytes but wrote "+te+".")):(S.write(new Uint8Array([1,1]),{at:q+18}),this.setAssociatedPath(S,p,a.SQLITE_OPEN_MAIN_DB)),te}}de=new WeakMap,pe=new WeakMap,be=new WeakMap,Ee=new WeakMap,ke=new WeakMap,Ie=new WeakMap,ze=new WeakMap,Le=new WeakMap,P=new WeakMap,B=new WeakMap,W=new WeakMap,ne=new WeakSet,kt=function(p,...f){V(this,W)>p&&K[p](this.vfsName+":",...f)};class _e{constructor(p){Me(this,ie);Ve(this,ie,p),this.vfsName=p.vfsName}async addCapacity(p){return V(this,ie).addCapacity(p)}async reduceCapacity(p){return V(this,ie).reduceCapacity(p)}getCapacity(){return V(this,ie).getCapacity(V(this,ie))}getFileCount(){return V(this,ie).getFileCount()}getFileNames(){return V(this,ie).getFileNames()}async reserveMinimumCapacity(p){const f=V(this,ie).getCapacity();return f<p?V(this,ie).addCapacity(p-f):f}exportFile(p){return V(this,ie).exportFile(p)}importDb(p,f){return V(this,ie).importDb(p,f)}async wipeFiles(){return V(this,ie).reset(!0)}unlink(p){return V(this,ie).deletePath(p)}async removeVfs(){return V(this,ie).removeVfs()}}ie=new WeakMap;const he=async()=>{const G=await navigator.storage.getDirectory(),p=".opfs-sahpool-sync-check-"+O(),T=(await(await G.getFileHandle(p,{create:!0})).createSyncAccessHandle()).close();return await T,await G.removeEntry(p),T!=null&&T.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(G=Object.create(null)){var f;const p=G.name||j.name;return i[p]?i[p]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((f=navigator==null?void 0:navigator.storage)!=null&&f.getDirectory)?i[p]=Promise.reject(new Error("Missing required OPFS APIs.")):i[p]=he().then(async function(){if(G.$testThrowInInit)throw G.$testThrowInInit;const S=new re(G);return S.isReady.then(async()=>{const T=new _e(S);if(t.oo1){const C=t.oo1,te=S.getVfs(),ue=function(...ge){const Se=C.DB.dbCtorHelper.normalizeArgs(...ge);Se.vfs=te.$zName,C.DB.dbCtorHelper.call(this,Se)};ue.prototype=Object.create(C.DB.prototype),T.OpfsSAHPoolDb=ue,C.DB.dbCtorHelper.setVfsPostOpenSql(te.pointer,function(ge,Se){Se.capi.sqlite3_exec(ge,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return S.log("VFS initialized."),T}).catch(async T=>{throw await S.removeVfs().catch(()=>{}),T})}).catch(S=>i[p]=Promise.reject(S))}}),typeof n<"u"){const t=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),E.ready}})();Oe=function(){var E,e;const J=Oe;if(!J)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const H=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(E=globalThis==null?void 0:globalThis.document)==null?void 0:E.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(e=globalThis==null?void 0:globalThis.location)!=null&&e.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(H.debugModule=H.urlParams.has("sqlite3.debugModule")?(...L)=>console.warn("sqlite3.debugModule:",...L):()=>{},H.urlParams.has("sqlite3.dir"))H.sqlite3Dir=H.urlParams.get("sqlite3.dir")+"/";else if(H.moduleScript){const L=H.moduleScript.src.split("/");L.pop(),H.sqlite3Dir=L.join("/")+"/"}if(globalThis.sqlite3InitModule=function L(...Y){return J(...Y).then(le=>{const ee=le.sqlite3;ee.scriptInfo=H,L.__isUnderTest&&(ee.__isUnderTest=!0);const oe=ee.asyncPostInit;return delete ee.asyncPostInit,oe()}).catch(le=>{throw console.error("Exception loading sqlite3 module:",le),le})},globalThis.sqlite3InitModule.ready=J.ready,globalThis.sqlite3InitModuleState.moduleScript){const L=globalThis.sqlite3InitModuleState;let Y=L.moduleScript.src.split("/");Y.pop(),L.scriptDir=Y.join("/")+"/"}return H.debugModule("sqlite3InitModuleState =",H),globalThis.sqlite3InitModule}();var je=Oe;globalThis.sqlite3Worker1Promiser=function J(H=J.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const $=H;H=Object.assign(Object.create(null),J.defaultConfig),H.onready=$}else H=Object.assign(Object.create(null),J.defaultConfig,H);const E=Object.create(null),e=function(){},L=H.onerror||e,Y=H.debug||e,le=H.generateMessageId?void 0:Object.create(null),ee=H.generateMessageId||function($){return $.type+"#"+(le[$.type]=(le[$.type]||0)+1)},oe=(...$)=>{throw new Error($.join(" "))};H.worker||(H.worker=J.defaultConfig.worker),typeof H.worker=="function"&&(H.worker=H.worker());let se,ae;return H.worker.onmessage=function($){$=$.data,Y("worker1.onmessage",$);let fe=E[$.messageId];if(!fe){if($&&$.type==="sqlite3-api"&&$.result==="worker1-ready"){H.onready&&H.onready(ae);return}if(fe=E[$.type],fe&&fe.onrow){fe.onrow($);return}H.onunhandled?H.onunhandled(arguments[0]):L("sqlite3Worker1Promiser() unhandled worker message:",$);return}switch(delete E[$.messageId],$.type){case"error":fe.reject($);return;case"open":se||(se=$.dbId);break;case"close":$.dbId===se&&(se=void 0);break}try{fe.resolve($)}catch(we){fe.reject(we)}},ae=function(){let $;arguments.length===1?$=arguments[0]:arguments.length===2?($=Object.create(null),$.type=arguments[0],$.args=arguments[1],$.dbId=$.args.dbId):oe("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!$.dbId&&$.type!=="open"&&($.dbId=se),$.messageId=ee($),$.departureTime=performance.now();const fe=Object.create(null);fe.message=$;let we;$.type==="exec"&&$.args&&(typeof $.args.callback=="function"?(we=$.messageId+":row",fe.onrow=$.args.callback,$.args.callback=we,E[we]=fe):typeof $.args.callback=="string"&&oe("exec callback may not be a string when using the Promise interface."));let xe=new Promise(function(Ue,ce){fe.resolve=Ue,fe.reject=ce,E[$.messageId]=fe,Y("Posting",$.type,"message to Worker dbId="+(se||"default")+":",$),H.worker.postMessage($)});return we&&(xe=xe.finally(()=>delete E[we])),xe}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-C0USlvNK.js",self.location.href),{type:"module"})},onerror:(...J)=>console.error("worker1 promiser error",...J)},sqlite3Worker1Promiser.v2=(function(J){let H;typeof J=="function"?(H=J,J={}):typeof(J==null?void 0:J.onready)=="function"&&(H=J.onready,delete J.onready);const E=Object.create(null);J=Object.assign(J||Object.create(null),{onready:async function(L){try{H&&await H(L),E.resolve(L)}catch(Y){E.reject(Y)}}});const e=new Promise(function(L,Y){E.resolve=L,E.reject=Y});try{this.original(J)}catch(L){E.reject(L)}return e}).bind({original:sqlite3Worker1Promiser}),sqlite3Worker1Promiser.v2;function bt(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}var Bt={exports:{}};(function(J){var H=Object.prototype.hasOwnProperty,E="~";function e(){}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(E=!1));function L(oe,se,ae){this.fn=oe,this.context=se,this.once=ae||!1}function Y(oe,se,ae,$,fe){if(typeof ae!="function")throw new TypeError("The listener must be a function");var we=new L(ae,$||oe,fe),xe=E?E+se:se;return oe._events[xe]?oe._events[xe].fn?oe._events[xe]=[oe._events[xe],we]:oe._events[xe].push(we):(oe._events[xe]=we,oe._eventsCount++),oe}function le(oe,se){--oe._eventsCount===0?oe._events=new e:delete oe._events[se]}function ee(){this._events=new e,this._eventsCount=0}ee.prototype.eventNames=function(){var se=[],ae,$;if(this._eventsCount===0)return se;for($ in ae=this._events)H.call(ae,$)&&se.push(E?$.slice(1):$);return Object.getOwnPropertySymbols?se.concat(Object.getOwnPropertySymbols(ae)):se},ee.prototype.listeners=function(se){var ae=E?E+se:se,$=this._events[ae];if(!$)return[];if($.fn)return[$.fn];for(var fe=0,we=$.length,xe=new Array(we);fe<we;fe++)xe[fe]=$[fe].fn;return xe},ee.prototype.listenerCount=function(se){var ae=E?E+se:se,$=this._events[ae];return $?$.fn?1:$.length:0},ee.prototype.emit=function(se,ae,$,fe,we,xe){var Ue=E?E+se:se;if(!this._events[Ue])return!1;var ce=this._events[Ue],Pe=arguments.length,Re,Fe;if(ce.fn){switch(ce.once&&this.removeListener(se,ce.fn,void 0,!0),Pe){case 1:return ce.fn.call(ce.context),!0;case 2:return ce.fn.call(ce.context,ae),!0;case 3:return ce.fn.call(ce.context,ae,$),!0;case 4:return ce.fn.call(ce.context,ae,$,fe),!0;case 5:return ce.fn.call(ce.context,ae,$,fe,we),!0;case 6:return ce.fn.call(ce.context,ae,$,fe,we,xe),!0}for(Fe=1,Re=new Array(Pe-1);Fe<Pe;Fe++)Re[Fe-1]=arguments[Fe];ce.fn.apply(ce.context,Re)}else{var Je=ce.length,Ze;for(Fe=0;Fe<Je;Fe++)switch(ce[Fe].once&&this.removeListener(se,ce[Fe].fn,void 0,!0),Pe){case 1:ce[Fe].fn.call(ce[Fe].context);break;case 2:ce[Fe].fn.call(ce[Fe].context,ae);break;case 3:ce[Fe].fn.call(ce[Fe].context,ae,$);break;case 4:ce[Fe].fn.call(ce[Fe].context,ae,$,fe);break;default:if(!Re)for(Ze=1,Re=new Array(Pe-1);Ze<Pe;Ze++)Re[Ze-1]=arguments[Ze];ce[Fe].fn.apply(ce[Fe].context,Re)}}return!0},ee.prototype.on=function(se,ae,$){return Y(this,se,ae,$,!1)},ee.prototype.once=function(se,ae,$){return Y(this,se,ae,$,!0)},ee.prototype.removeListener=function(se,ae,$,fe){var we=E?E+se:se;if(!this._events[we])return this;if(!ae)return le(this,we),this;var xe=this._events[we];if(xe.fn)xe.fn===ae&&(!fe||xe.once)&&(!$||xe.context===$)&&le(this,we);else{for(var Ue=0,ce=[],Pe=xe.length;Ue<Pe;Ue++)(xe[Ue].fn!==ae||fe&&!xe[Ue].once||$&&xe[Ue].context!==$)&&ce.push(xe[Ue]);ce.length?this._events[we]=ce.length===1?ce[0]:ce:le(this,we)}return this},ee.prototype.removeAllListeners=function(se){var ae;return se?(ae=E?E+se:se,this._events[ae]&&le(this,ae)):(this._events=new e,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=E,ee.EventEmitter=ee,J.exports=ee})(Bt);var bn=Bt.exports,Ut=bt(bn);function Ye(){return new Date().getTime()}function zt(J,H){var e,L,Y;if(H.since&&J.created_at<H.since||H.until&&J.created_at>H.until||!(((e=H.ids)==null?void 0:e.includes(J.id))??!0)||!(((L=H.authors)==null?void 0:L.includes(J.pubkey))??!0)||!(((Y=H.kinds)==null?void 0:Y.includes(J.kind))??!0))return!1;const E=Object.entries(H).filter(([le])=>le.startsWith("#"));for(const[le,ee]of E){const oe=ee;for(const se of oe)if(!J.tags.find(ae=>ae[0]===le.slice(1)&&ae[1]===se))return!1}return!0}let Wt=!1;function qt(J,H,...E){Wt&&console.log(J,H,...E)}function qn(J){Wt=J}const wn=(J,...H)=>qt("SqliteRelay:migrations",J,...H),En=[{version:1,script:vn},{version:2,script:xn},{version:3,script:Sn},{version:4,script:An},{version:5,script:kn},{version:6,script:In}];async function Qt(J){if(!J.db)throw new Error("DB must be open");J.db.exec("CREATE TABLE IF NOT EXISTS __migration (    version INTEGER PRIMARY KEY,     migrated_at INTEGER   )");let E=J.db.exec("SELECT MAX(version) FROM __migration",{returnValue:"resultRows"})[0][0]??0;for(const{version:e,script:L}of En)E<e&&(wn(`Migrating to v${e}`),await L(J),E=e)}function vn(J){var H;return(H=J.db)==null?void 0:H.transaction(E=>{E.exec("CREATE TABLE events (      id TEXT(64) PRIMARY KEY,       pubkey TEXT(64),       created INTEGER,       kind INTEGER,       json TEXT     )"),E.exec("CREATE TABLE tags (      event_id TEXT(64),       key TEXT,       value TEXT,       CONSTRAINT tags_FK FOREIGN KEY (event_id) REFERENCES events(id) ON DELETE CASCADE       )"),E.exec("CREATE INDEX tags_key_IDX ON tags (key,value)"),E.exec("insert into __migration values(1, ?)",{bind:[new Date().getTime()/1e3]})})}function xn(J){var H;(H=J.db)==null||H.transaction(E=>{E.exec("CREATE INDEX pubkey_kind_IDX ON events (pubkey,kind)"),E.exec("CREATE INDEX pubkey_created_IDX ON events (pubkey,created)"),E.exec("insert into __migration values(2, ?)",{bind:[new Date().getTime()/1e3]})})}function Sn(J){var H;(H=J.db)==null||H.transaction(E=>{E.exec("CREATE VIRTUAL TABLE search_content using fts5(id UNINDEXED, content)");const e=E.selectArrays("select json from events where kind in (?,?)",[0,1]);for(const L of e){const Y=JSON.parse(L[0]);Y&&J.insertIntoSearchIndex(E,Y)}E.exec("insert into __migration values(3, ?)",{bind:[new Date().getTime()/1e3]})})}async function An(J){var H;(H=J.db)==null||H.transaction(E=>{E.exec("ALTER TABLE events ADD COLUMN seen_at INTEGER"),E.exec("insert into __migration values(4, ?)",{bind:[new Date().getTime()/1e3]})})}async function kn(J){var H;(H=J.db)==null||H.transaction(E=>{E.exec("CREATE INDEX seen_at_IDX ON events (seen_at)"),E.exec("insert into __migration values(5, ?)",{bind:[new Date().getTime()/1e3]})})}async function In(J){var H;(H=J.db)==null||H.transaction(E=>{E.exec("ALTER TABLE events ADD COLUMN relays TEXT"),E.exec("insert into __migration values(6, ?)",{bind:[new Date().getTime()/1e3]})})}var Tn="/assets/sqlite3-BqX9F35q.wasm";async function Fn(J){}class On extends Ut{constructor(){super(...arguments);Me(this,Te);Me(this,it);Me(this,Qe,(E,...e)=>qt("SqliteRelay",E,...e));Me(this,tt);Me(this,at,new Set)}async init(E){V(this,it)||(Ve(this,it,await je({locateFile:(e,L)=>e==="sqlite3.wasm"?Tn:L+e,print:e=>V(this,Qe).call(this,e),printErr:e=>V(this,Qe).call(this,e)})),V(this,Qe).call(this,`Got SQLite version: ${V(this,it).version.libVersion}`),await Ce(this,Te,It).call(this,E),this.db&&(await Qt(this),Fn()))}async wipe(){if(V(this,tt)&&this.db){const E=this.db.filename;this.close(),await V(this,tt).wipeFiles(),await Ce(this,Te,It).call(this,E),await Qt(this)}}close(){var E;(E=this.db)==null||E.close(),this.db=void 0}event(E){return Ce(this,Te,Mt).call(this,this.db,E)?(V(this,Qe).call(this,`Inserted: kind=${E.kind},authors=${E.pubkey},id=${E.id}`),this.emit("event",[E]),!0):!1}sql(E,e){var L;return(L=this.db)==null?void 0:L.selectArrays(E,e)}eventBatch(E){var Y;const e=Ye();let L=[];return(Y=this.db)==null||Y.transaction(le=>{for(const ee of E)Ce(this,Te,Mt).call(this,le,ee)&&L.push(ee)}),L.length>0&&(V(this,Qe).call(this,`Inserted Batch: ${L.length}/${E.length}, ${(Ye()-e).toLocaleString()}ms`),this.emit("event",L)),L.length>0}setEventMetadata(E,e){var L;e.seen_at&&((L=this.db)==null||L.exec("update events set seen_at = ? where id = ?",{bind:[e.seen_at,E]}))}req(E,e){var ae;const L=Ye(),[Y,le]=Ce(this,Te,jt).call(this,e),ee=(ae=this.db)==null?void 0:ae.selectArrays(Y,le),oe=(ee==null?void 0:ee.map($=>{var we;return e.ids_only===!0?$[0]:{...JSON.parse($[0]),relays:(we=$[1])==null?void 0:we.split(",")}}))??[],se=Ye()-L;return V(this,Qe).call(this,`Query ${E} results took ${se.toLocaleString()}ms`),oe}count(E){var se,ae;const e=Ye(),[L,Y]=Ce(this,Te,jt).call(this,E,!0),le=(se=this.db)==null?void 0:se.exec(L,{bind:Y,returnValue:"resultRows"}),ee=((ae=le==null?void 0:le.at(0))==null?void 0:ae.at(0))??0,oe=Ye()-e;return V(this,Qe).call(this,`Query count results took ${oe.toLocaleString()}ms`),ee}delete(E){V(this,Qe).call(this,`Starting delete of ${JSON.stringify(E)}`);const e=Ye(),L=this.req("ids-for-delete",{...E,ids_only:!0}),Y=L.reduce((ee,oe,se)=>{const ae=(se/1e3).toFixed(0);return ee[ae]??=[],ee[ae].push(oe),ee},{});V(this,Qe).call(this,`Starting delete of ${Object.keys(Y).length} batches`),Object.entries(Y).forEach(([ee,oe])=>{Ce(this,Te,pt).call(this,this.db,oe)});const le=Ye()-e;return V(this,Qe).call(this,`Delete ${L.length} events took ${le.toLocaleString()}ms`),L}summary(){var e;const E=(e=this.db)==null?void 0:e.exec("select kind, count(*) from events group by kind",{returnValue:"resultRows"});return Object.fromEntries((E==null?void 0:E.map(L=>[String(L[0]),L[1]]))??[])}async dump(){var e;const E=String(((e=this.db)==null?void 0:e.filename)??"");if(this.db&&V(this,tt))try{return await V(this,tt).exportFile(`/${E}`)}catch(L){console.error(L)}finally{await Ce(this,Te,It).call(this,E)}return new Uint8Array}insertIntoSearchIndex(E,e){if(e.kind===0){const L=JSON.parse(e.content);if(L){const Y=[L.name,L.display_name,L.about,L.website,L.lud16,L.nip05].join(" ");E.exec("insert into search_content values(?,?)",{bind:[e.id,Y]})}}else e.kind===1&&E.exec("insert into search_content values(?,?)",{bind:[e.id,e.content]})}}it=new WeakMap,Qe=new WeakMap,tt=new WeakMap,at=new WeakMap,Te=new WeakSet,It=async function(E){if(!V(this,it))throw new Error("Must call init first");this.db||(Ve(this,tt,await V(this,it).installOpfsSAHPoolVfs({})),this.db=new(V(this,tt)).OpfsSAHPoolDb(E),V(this,Qe).call(this,`Opened ${this.db.filename}`))},pt=function(E,e){if(e.length===0)return;E.exec(`delete from events where id in (${Ce(this,Te,ut).call(this,e.length)})`,{bind:e});const L=E.changes();E.exec(`delete from search_content where id in (${Ce(this,Te,ut).call(this,e.length)})`,{bind:e}),V(this,Qe).call(this,"Deleted",e,L)},Mt=function(E,e){if(V(this,at).has(e.id))return!1;if([0,3,41].includes(e.kind)||e.kind>=1e4&&e.kind<2e4){const ee=E.selectValues("select id from events where kind = ? and pubkey = ? and created <= ?",[e.kind,e.pubkey,e.created_at]);if(ee.includes(e.id)){if(V(this,at).add(e.id),ee.length>1){const oe=ee.filter(se=>se!==e.id);Ce(this,Te,pt).call(this,E,oe)}return!1}else Ce(this,Te,pt).call(this,E,ee)}if(e.kind>=3e4&&e.kind<4e4){const ee=e.tags.find(se=>se[0]==="d")[1],oe=E.selectValues("select id from events where id in (select id from events, tags where events.id = tags.event_id and tags.key = ? and tags.value = ?)",["d",ee]);if(oe.includes(e.id)){if(V(this,at).add(e.id),oe.length>1){const se=oe.filter(ae=>ae!==e.id);Ce(this,Te,pt).call(this,E,se)}return!1}else Ce(this,Te,pt).call(this,E,oe)}const Y={...e};delete Y.relays,E.exec("insert or ignore into events(id, pubkey, created, kind, json, relays) values(?,?,?,?,?,?)",{bind:[e.id,e.pubkey,e.created_at,e.kind,JSON.stringify(Y),(e.relays??[]).join(",")]});const le=E.changes();if(le>0){for(const ee of e.tags.filter(oe=>oe[0].length===1))E.exec("insert into tags(event_id, key, value) values(?, ?, ?)",{bind:[e.id,ee[0],ee[1]]});this.insertIntoSearchIndex(E,e)}else return Ce(this,Te,yn).call(this,E,e),0;return V(this,at).add(e.id),le},yn=function(E,e){var ee,oe;const L=E.selectArrays("select relays from events where id = ?",[e.id]),Y=new Set(((oe=(ee=L==null?void 0:L.at(0))==null?void 0:ee.at(0))==null?void 0:oe.split(","))??[]);let le=!1;for(const se of e.relays??[])Y.has(se)||(Y.add(se),le=!0);le&&E.exec("update events set relays = ? where id = ?",{bind:[[...Y].join(","),e.id]})},jt=function(E,e=!1,L=!1){const Y=[],le=[];let ee="json,relays";e?ee="count(json)":E.ids_only===!0&&(ee="id");let oe=`select ${ee}`;L&&(oe="delete");let se=`${oe} from events`;const ae=Object.entries(E).filter(([fe])=>fe.startsWith("#"));let $=0;for(const[fe,we]of ae){const xe=we;se+=` inner join tags t_${$} on events.id = t_${$}.event_id and t_${$}.key = ? and t_${$}.value in (${Ce(this,Te,ut).call(this,xe.length)})`,le.push(fe.slice(1)),le.push(...xe),$++}return E.search&&(se+=" inner join search_content on search_content.id = events.id",Y.push("search_content match ?"),le.push(E.search.replaceAll(".","+").replaceAll("@","+"))),E.ids&&(Y.push(`id in (${Ce(this,Te,ut).call(this,E.ids.length)})`),le.push(...E.ids)),E.authors&&(Y.push(`pubkey in (${Ce(this,Te,ut).call(this,E.authors.length)})`),le.push(...E.authors)),E.kinds&&(Y.push(`kind in (${Ce(this,Te,ut).call(this,E.kinds.length)})`),le.push(...E.kinds)),E.since&&(Y.push("created >= ?"),le.push(E.since)),E.until&&(Y.push("created < ?"),le.push(E.until)),Y.length>0&&(se+=` where ${Y.join(" and ")}`),E.limit&&(se+=` order by created desc limit ${E.limit}`),[se,le]},ut=function(E){const e=[];for(let L=0;L<E;L++)e.push("?");return e.join(", ")},Jr=function(E,e){let L="",Y=0;for(const le of E)if(le==="?"){const ee=e[Y++];typeof ee=="number"?L+=ee.toString():typeof ee=="string"&&(L+=`'${ee}'`)}else L+=le;return L},Xr=function(E){};class Ht extends Ut{constructor(){super(...arguments);Me(this,Ge,new Map);Me(this,wt,(E,...e)=>qt("InMemoryRelay",E,...e))}init(){return V(this,wt).call(this,"Using in-memory relay"),Promise.resolve()}count(E){let e=0;for(const[,L]of V(this,Ge))zt(L,E)&&e++;return e}summary(){let E={};for(const[e,L]of V(this,Ge))E[L.kind.toString()]??=0,E[L.kind.toString()]++;return E}dump(){const E=new TextEncoder;return Promise.resolve(E.encode(JSON.stringify(V(this,Ge).values())))}close(){}wipe(){return Ve(this,Ge,new Map),Promise.resolve()}event(E){return V(this,Ge).has(E.id)?!1:(V(this,Ge).set(E.id,E),this.emit("event",[E]),!0)}eventBatch(E){const e=[];for(const L of E)V(this,Ge).has(L.id)||(V(this,Ge).set(L.id,L),e.push(L));return e.length>0?(this.emit("event",e),!0):!1}sql(E,e){return[]}req(E,e){const L=[];for(const[,Y]of V(this,Ge))zt(Y,e)&&(e.ids_only===!0?L.push(Y.id):L.push(Y));return L}delete(E){const e=this.req("ids-for-delete",{...E,ids_only:!0});return e.forEach(L=>V(this,Ge).delete(L)),e}setEventMetadata(E,e){}}Ge=new WeakMap,wt=new WeakMap;const Pn=J=>({event:null}),ot=(J,...H)=>qt("getForYouFeed",J,...H);async function Ln(J,H){console.time("For You feed generation time"),ot("pubkey",H);const E=await Rn(J,H);ot("my reacted events",E);const e=await Dn(J,E,H);ot("my reacted authors",e);const L=await Cn(J,E,H);ot("others who reacted",L);const Y=await Nn(J,L,E,H);ot("reacted by others",Y);const le=await Mn(J,Y,e);return ot("feed.length",le.length),console.timeEnd("For You feed generation time"),le}async function Dn(J,H,E){const e=new Map;return J.req("getMyReactedAuthors",{"#e":Array.from(H)}).forEach(Y=>{Y.pubkey!==E&&e.set(Y.pubkey,(e.get(Y.pubkey)||0)+1)}),e}async function Rn(J,H){const E=new Set;return J.req("getMyReactedEventIds",{authors:[H],kinds:[1,6,7,9735]}).forEach(L=>{var le,ee;const Y=L.kind===9735?(le=Pn().event)==null?void 0:le.id:(ee=L.tags.find(oe=>oe[0]==="e"))==null?void 0:ee[1];Y&&E.add(Y)}),E}async function Cn(J,H,E){const e=new Map;return J.req("getOthersWhoReacted",{"#e":Array.from(H)}).forEach(Y=>{Y.pubkey!==E&&e.set(Y.pubkey,(e.get(Y.pubkey)||0)+1)}),e}async function Nn(J,H,E,e){const L=new Map;return J.req("getEventIdsReactedByOthers",{authors:[...H.keys()],kinds:[1,6,7,9735]}).forEach(le=>{le.pubkey===e||E.has(le.id)||le.tags.forEach(ee=>{if(ee[0]==="e"){const oe=Math.ceil(Math.sqrt(H.get(le.pubkey)||0));L.set(ee[1],(L.get(ee[1])||0)+oe)}})}),L}async function Mn(J,H,E){const e=J.sql(`select json from events where id in (${Array.from(H.keys()).map(()=>"?").join(", ")}) and kind = 1 order by seen_at ASC, created DESC limit 1000`,Array.from(H.keys())).map(ce=>JSON.parse(ce[0])),L=new Set(e.map(ce=>ce.id));ot("reactedToAuthors",E);const Y=Array.from(E.keys()).sort((ce,Pe)=>E.get(Pe)-E.get(ce)).slice(20);J.sql(`select json from events where pubkey in (${Y.map(()=>"?").join(", ")}) and kind = 1 order by seen_at ASC, created DESC limit 100`,Y).map(ce=>JSON.parse(ce[0])).forEach(ce=>{L.has(ce.id)||e.push(ce)});const ee=e.filter(ce=>!ce.tags.some(Pe=>Pe[0]==="e")),oe=new Date().getTime();let se=1/0,ae=-1/0,$=1/0,fe=-1/0;ee.forEach(ce=>{const Pe=H.get(ce.id)||0;se=Math.min(se,Pe),ae=Math.max(ae,Pe);const Re=oe-new Date(ce.created_at).getTime();$=Math.min($,Re),fe=Math.max(fe,Re)});const we=(ce,Pe,Re)=>(ce-Pe)/(Re-Pe),xe=Math.max(...Array.from(E.values())),Ue=.5;return ee.sort((ce,Pe)=>{const Re=we(H.get(ce.id)||0,se,ae),Fe=we(H.get(Pe.id)||0,se,ae),Je=we(oe-new Date(ce.created_at).getTime(),$,fe),Ze=we(oe-new Date(Pe.created_at).getTime(),$,fe),Tt=we(E.get(ce.pubkey)||0,0,xe),Et=we(E.get(Pe.pubkey)||0,0,xe),nt=Math.random()>.75?-.1:-10,Ft=Re+nt*Je+Tt*Ue;return Fe+nt*Ze+Et*Ue-Ft}),ee}let We,Vt=10,_t=[];async function Gt(){if(_t.length>0){const J=Ye(),H=1e3;if(We)for(;_t.length>0&&!(Ye()-J>=H);){const E=_t.splice(0,Vt);_t=_t.slice(E.length),We.eventBatch(E)}}setTimeout(()=>Gt(),100)}try{setTimeout(()=>Gt(),100)}catch(J){console.error(J)}const $t=async(J,H)=>{async function E(L,Y){J.postMessage({id:L,cmd:"reply",args:Y})}const e=H.data;try{switch(e.cmd){case"debug":{qn(!0),E(e.id,!0);break}case"init":{const L=e.args;Vt=L.insertBatchSize??10;try{"WebAssembly"in self?We=new On:We=new Ht,await We.init(L.databasePath)}catch(Y){console.error("Fallback to InMemoryRelay",Y),We=new Ht,await We.init(L.databasePath)}E(e.id,!0);break}case"event":{const L=e.args;_t.push(L),E(e.id,{ok:!0,id:L.id,relay:""});break}case"close":{const L=We.close();E(e.id,L);break}case"req":{const L=e.args,Y=L.slice(2),le=[],ee=new Set;for(const oe of Y){const se=We.req(L[1],oe);for(const ae of se)typeof ae=="string"&&ee.has(ae)||ee.has(ae.id)||(ee.add(typeof ae=="string"?ae:ae.id),le.push(ae))}E(e.id,le);break}case"count":{const L=e.args;let Y=0;const le=L.slice(2);for(const ee of le){const oe=We.count(ee);Y+=oe}E(e.id,Y);break}case"delete":{const L=e.args;let Y=[];const le=L.slice(2);for(const ee of le){const oe=We.delete(ee);Y.push(...oe)}E(e.id,Y);break}case"summary":{const L=We.summary();E(e.id,L);break}case"dumpDb":{const L=await We.dump();E(e.id,L);break}case"wipe":{await We.wipe(),E(e.id,!0);break}case"forYouFeed":{const L=await Ln(We,e.args);E(e.id,L);break}case"setEventMetadata":{const[L,Y]=e.args;We.setEventMetadata(L,Y);break}default:{E(e.id,{error:"Unknown command"});break}}}catch(L){L instanceof Error?E(e.id,{error:L.message}):typeof L=="string"?E(e.id,{error:L}):E(e.id,"Unknown error")}};"SharedWorkerGlobalScope"in globalThis&&(onconnect=J=>{const H=J.ports[0];H.onmessage=E=>$t(H,E),H.start()}),"DedicatedWorkerGlobalScope"in globalThis&&(onmessage=J=>{$t(self,J)})})();
//# sourceMappingURL=worker-TpePvOaT.js.map
